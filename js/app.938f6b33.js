(function(e){function t(t){for(var o,a,i=t[0],s=t[1],l=t[2],u=0,b=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&b.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(b.length)b.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},c=[];function a(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0d6b32":"0b839db5"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=a(e);var l=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",l.name="ChunkLoadError",l.type=o,l.request=c,n[1](l)}r[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:s})}),12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/library/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"026e":function(e,t,n){"use strict";n("1d96")},"06ab":function(e,t,n){},"0ab2":function(e,t,n){"use strict";n("3fa2")},"113e":function(e,t,n){},"1d96":function(e,t,n){},"20f7":function(e,t,n){"use strict";n("c0b0")},"2e28":function(e,t,n){},3158:function(e,t,n){},"3fa2":function(e,t,n){},4650:function(e,t,n){"use strict";n("06ab")},4832:function(e,t,n){"use strict";n("5129")},"4cca":function(e,t,n){"use strict";n("113e")},"4e79":function(e,t,n){},5129:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("159b"),n("d3b7"),n("ddb0"),n("ac1f"),n("5319"),n("1276"),n("a15b");var o=n("7a23");function r(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(a.layout),null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,Object(o["mergeProps"])({onLoadedBook:a.loadBook,"book-props":e.book},e.$attrs),null,16,["onLoadedBook","book-props"])]})),_:1})}var c=Object(o["withScopeId"])("data-v-157c2388");Object(o["pushScopeId"])("data-v-157c2388");var a={class:"auth-wrap"},i=Object(o["createVNode"])("div",{class:"stars",id:"stars"},null,-1),s=Object(o["createVNode"])("div",{class:"moon"},null,-1);Object(o["popScopeId"])();var l=c((function(e,t,n,r,c,l){var u=Object(o["resolveComponent"])("login");return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])(u),i,s])})),u=(n("99af"),n("a55b")),d={name:"LayoutAuth",components:{Login:u["default"]},data:function(){return{}},methods:{generateDots:function(){var e=document.createElement("style");e.innerHTML=".star-animating { } .star-animating:before { ".concat(this.createDotsString(),"; } .star-animating:after { ").concat(this.createDotsString(),"; }"),document.getElementsByTagName("head")[0].appendChild(e),document.getElementById("stars").className="star-animating stars"},createDotsString:function(){for(var e=document.documentElement.clientHeight>900?500:150,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o="box-shadow: ",r=0;r<e;r++){var c=this.randomInteger(0,n),a=this.randomInteger(0,t);o+="".concat(0===r?"":", "," ").concat(a,"px ").concat(c,"px #A1B8D0")}return o},randomInteger:function(e,t){var n=e+Math.random()*(t+1-e);return Math.floor(n)}},mounted:function(){this.generateDots()}};n("4cca");d.render=l,d.__scopeId="data-v-157c2388";var b=d,p=Object(o["withScopeId"])("data-v-53bac061");Object(o["pushScopeId"])("data-v-53bac061");var f={class:"basement"},m={class:"header"},g={class:"breadcrumb"},h={class:"breadcrumb-li"},O=Object(o["createTextVNode"])("Home"),j={key:0,class:"breadcrumb-li"},k={key:1,class:"breadcrumb-li"},v=Object(o["createVNode"])("rect",{y:"0",width:"26",height:"4",fill:"black"},null,-1),y=Object(o["createVNode"])("rect",{y:"10",width:"26",height:"4",fill:"black"},null,-1),B=Object(o["createVNode"])("rect",{y:"20",width:"26",height:"4",fill:"black"},null,-1),w={class:"breadcrumb-li"},N=Object(o["createTextVNode"])("Books"),C={class:"breadcrumb-li"},V=Object(o["createTextVNode"])("Genre"),x={class:"breadcrumb-li"},L=Object(o["createTextVNode"])("Note"),S={class:"breadcrumb-li"},M=Object(o["createTextVNode"])("Settings");Object(o["popScopeId"])();var _=p((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])("div",f,[Object(o["createVNode"])("header",m,[Object(o["createVNode"])("ul",g,[Object(o["createVNode"])("li",h,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:"/"},{default:p((function(){return[O]})),_:1})]),a.listParentTitle?(Object(o["openBlock"])(),Object(o["createBlock"])("li",j,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:{name:"list-genre",params:{id:e.$route.params.id}}},{default:p((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.listParentTitle),1)]})),_:1},8,["to"])])):Object(o["createCommentVNode"])("",!0),a.listGenreTitle?(Object(o["openBlock"])(),Object(o["createBlock"])("li",k,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:{name:"list-book",params:{id:e.$route.params.id}}},{default:p((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.listGenreTitle),1)]})),_:1},8,["to"])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",{class:["burger",{mobile:a.isMobile,active:e.activeBurger}]},[(Object(o["openBlock"])(),Object(o["createBlock"])("svg",{class:"icon-btn",onClick:t[1]||(t[1]=function(t){return e.activeBurger=!e.activeBurger}),width:"100%",height:"100%",viewBox:"0 0 26 24"},[v,y,B])),Object(o["createVNode"])("ul",{class:"breadcrumb",onClick:t[2]||(t[2]=function(t){return e.activeBurger=!1})},[Object(o["createVNode"])("li",w,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:"/book"},{default:p((function(){return[N]})),_:1})]),Object(o["createVNode"])("li",C,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:"/genre"},{default:p((function(){return[V]})),_:1})]),Object(o["createVNode"])("li",x,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:"/note"},{default:p((function(){return[L]})),_:1})]),Object(o["createVNode"])("li",S,[Object(o["createVNode"])(i,{class:"breadcrumb-link",to:"/settings"},{default:p((function(){return[M]})),_:1})])])],2)]),Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])})),I=n("1da1"),$=(n("b0c0"),n("7db0"),n("96cf"),{name:"LayoutDefault",components:{},props:{},data:function(){return{activeBurger:!1}},methods:{loadParents:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.genresParent||0!==e.genresParent.length||!sessionStorage.getItem("lib-token")){t.next=3;break}return t.next=3,e.$store.dispatch("genre/loadGenres");case 3:case"end":return t.stop()}}),t)})))()}},computed:{listParentTitle:function(){var e=this;if(this.$store.state.main.isMobile)return!1;if("list-genre"===this.$route.name&&this.$route.params.id){var t=this.genresParent.find((function(t){return t.id===+e.$route.params.id}));return t.name}return"list-book"===this.$route.name&&this.$route.params.id?this.$route.params.parent:null},listGenreTitle:function(){return!this.$store.state.main.isMobile&&("list-book"===this.$route.name&&this.$route.params.id?this.$route.params.name:null)},bookTitle:function(){return"book-view"===this.$route.name&&this.$route.params.id?this.$route.params.name:null},genresParent:function(){return this.$store.state.genre.items},isMobile:function(){return this.$store.state.main.isMobile}},watch:{},created:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadParents();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){},updated:function(){}});n("feba");$.render=_,$.__scopeId="data-v-53bac061";var P=$,T=Object(o["withScopeId"])("data-v-70fa589e");Object(o["pushScopeId"])("data-v-70fa589e");var R={class:"test-wrap"};Object(o["popScopeId"])();var G=T((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",R,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])})),D={name:"LayoutTest",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}};D.render=G,D.__scopeId="data-v-70fa589e";var F=D,A={components:{LayoutDefault:P,LayoutAuth:b,LayoutTest:F},data:function(){return{book:{}}},computed:{layout:function(){return this.$route.meta.layout||"layout-default"}},methods:{onResize:function(){document.documentElement.clientWidth>892?this.$store.commit("main/setIsDesktop"):this.$store.commit("main/setIsMobile")},loadBook:function(e){console.log({event:e}),this.book=e}},created:function(){this.onResize(),window.addEventListener("resize",this.onResize)}};A.render=r;var E=A,U=n("9483");Object(U["a"])("".concat("/library/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("3ca3");var z=n("6c02"),H=Object(o["withScopeId"])("data-v-1046b2b8");Object(o["pushScopeId"])("data-v-1046b2b8");var Z={class:"home"},J={class:"nav"};Object(o["popScopeId"])();var W=H((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])("main",Z,[Object(o["createVNode"])("nav",J,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.parentsArr,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(i,{class:"content-link",to:{name:"list-genre",params:{id:e.id}},key:e.id},{default:H((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])})),128))])])})),q={name:"Home",components:{},props:{},data:function(){return{}},methods:{},computed:{parentsArr:function(){return this.$store.state.genre.items}},watch:{},created:function(){document.title="Home"},mounted:function(){},updated:function(){}};n("ee16");q.render=W,q.__scopeId="data-v-1046b2b8";var X=q,Y=Object(o["withScopeId"])("data-v-74566746");Object(o["pushScopeId"])("data-v-74566746");var K={class:"header"},Q={class:"book-text-wrap"},ee={class:"book-name"},te={class:"book-annotation"},ne={key:0,class:"loader"};Object(o["popScopeId"])();var oe=Y((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("observer"),s=Object(o["resolveComponent"])("sorting-modal"),l=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])("main",{class:"list-book",onTouchstart:t[7]||(t[7]=function(){return a.touchStart&&a.touchStart.apply(a,arguments)}),onTouchend:t[8]||(t[8]=function(){return a.touchEnd&&a.touchEnd.apply(a,arguments)}),onScrollPassive:t[9]||(t[9]=function(){return a.onScroll&&a.onScroll.apply(a,arguments)})},[Object(o["createVNode"])("header",K,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"search-input",type:"search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchParams=t}),onInput:t[2]||(t[2]=Object(o["withModifiers"])((function(){return a.searchByName&&a.searchByName.apply(a,arguments)}),["prevent","stop"])),placeholder:"Search by name..."},null,544),[[o["vModelText"],e.searchParams]]),a.isMobile?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("select",{key:0,class:"select","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.activeGenre=t}),onChange:t[4]||(t[4]=function(){return a.changeGenre&&a.changeGenre.apply(a,arguments)})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.genres,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("optgroup",{label:e.name,key:"parent-"+e.id},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.childes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:"select-genre"+e.id,value:e},Object(o["toDisplayString"])(e.name),9,["value"])})),128))],8,["label"])})),128))],544)),[[o["vModelSelect"],e.activeGenre]]):Object(o["createCommentVNode"])("",!0)]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.data.items,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("section",{class:"book",onClick:function(t){return a.openBook(e)},key:"book"+e.id},[Object(o["createVNode"])("img",{src:a.getCover(e),alt:"",class:"book-cover"},null,8,["src"]),Object(o["createVNode"])("div",Q,[Object(o["createVNode"])("div",ee,Object(o["toDisplayString"])(e.name),1),Object(o["createVNode"])("div",te,Object(o["toDisplayString"])(e.annotation),1)])],8,["onClick"])})),128)),Object(o["createVNode"])(i,{onIntersect:t[5]||(t[5]=function(e){return a.loadBooks("push")})}),e.infinityLoading?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ne)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,{ref:"sortings"},{default:Y((function(){return[Object(o["createVNode"])(s,{onSorting:a.updateBySorting},null,8,["onSorting"])]})),_:1},512),Object(o["createVNode"])("button",{class:"scroll-btn",ref:"topBtn",title:"Go to top",onClick:t[6]||(t[6]=function(){return a.scrollToTop&&a.scrollToTop.apply(a,arguments)})},"Top",512)],32)})),re=n("b85c"),ce=n("2909"),ae=(n("c740"),{class:"sorting"}),ie={class:"fieldset"},se=Object(o["createTextVNode"])("sorting ");function le(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-sort-asc"),s=Object(o["resolveComponent"])("icon-sort-desc"),l=Object(o["resolveComponent"])("base-icon");return Object(o["openBlock"])(),Object(o["createBlock"])("main",ae,[Object(o["createVNode"])("fieldset",ie,[Object(o["createVNode"])("legend",null,[se,Object(o["createVNode"])(l,{class:"icon"},{default:Object(o["withCtx"])((function(){return[e.ascending?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0})):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1}))]})),_:1})]),Object(o["createVNode"])("button",{class:["srt-btn",{active:"name"===this.orderBy}],onClick:t[1]||(t[1]=function(e){return a.changeOrderBy("name")})},"name",2),Object(o["createVNode"])("button",{class:["srt-btn",{active:"view_count"===this.orderBy}],onClick:t[2]||(t[2]=function(e){return a.changeOrderBy("view_count")})},"view_count",2),Object(o["createVNode"])("button",{class:["srt-btn",{active:"rating"===this.orderBy}],onClick:t[3]||(t[3]=function(e){return a.changeOrderBy("rating")})},"rating",2),Object(o["createVNode"])("button",{class:["srt-btn",{active:"updated_at"===this.orderBy}],onClick:t[4]||(t[4]=function(e){return a.changeOrderBy("updated_at")})},"updated",2),Object(o["createVNode"])("button",{class:["srt-btn",{active:"last_read"===this.orderBy}],onClick:t[5]||(t[5]=function(e){return a.changeOrderBy("last_read")})},"last read",2),Object(o["createVNode"])("button",{class:"close-find",onClick:t[6]||(t[6]=function(){return a.sorting&&a.sorting.apply(a,arguments)})},"close&filter")])])}var ue=Object(o["createVNode"])("path",{d:"M 7.847656 12.046875 L 6.375 12.046875 L 6.375 0.367188 C 6.375 0.164062 6.210938 0 6.007812 0 L 3.046875 0 C 2.84375 0 2.679688 0.164062 2.679688 0.367188 L 2.679688 12.046875 L 1.207031 12.046875 C 1.066406 12.046875 0.9375 12.128906 0.875 12.257812 C 0.8125 12.382812 0.832031 12.535156 0.921875 12.644531 L 4.242188 17.597656 C 4.308594 17.683594 4.414062 17.734375 4.527344 17.734375 C 4.636719 17.734375 4.742188 17.683594 4.8125 17.597656 L 8.132812 12.644531 C 8.222656 12.535156 8.238281 12.382812 8.179688 12.257812 C 8.117188 12.128906 7.988281 12.046875 7.847656 12.046875 Z M 7.847656 12.046875 "},null,-1),de=Object(o["createVNode"])("path",{d:"M 17.082031 7.222656 L 14.632812 0.28125 C 14.582031 0.136719 14.441406 0.0390625 14.285156 0.0390625 L 13.578125 0.0390625 C 13.558594 0.0390625 13.539062 0.0390625 13.519531 0.0429688 C 13.5 0.0390625 13.480469 0.0390625 13.460938 0.0390625 L 12.769531 0.0390625 C 12.613281 0.0390625 12.476562 0.136719 12.421875 0.285156 L 9.984375 7.222656 C 9.945312 7.332031 9.960938 7.457031 10.03125 7.554688 C 10.101562 7.652344 10.210938 7.710938 10.332031 7.710938 L 11.390625 7.710938 C 11.554688 7.710938 11.695312 7.605469 11.742188 7.449219 L 12.207031 5.921875 L 14.855469 5.921875 L 15.324219 7.449219 C 15.371094 7.605469 15.511719 7.710938 15.675781 7.710938 L 16.734375 7.710938 C 16.851562 7.710938 16.964844 7.652344 17.035156 7.554688 C 17.101562 7.457031 17.121094 7.332031 17.082031 7.222656 Z M 12.648438 4.460938 C 13.089844 3.03125 13.386719 2.042969 13.535156 1.515625 L 14.4375 4.460938 Z M 12.648438 4.460938 "},null,-1),be=Object(o["createVNode"])("path",{d:"M 16.027344 16.5 L 12.753906 16.5 L 16.230469 11.503906 C 16.273438 11.441406 16.296875 11.371094 16.296875 11.292969 L 16.296875 10.667969 C 16.296875 10.464844 16.132812 10.300781 15.929688 10.300781 L 11.140625 10.300781 C 10.9375 10.300781 10.773438 10.464844 10.773438 10.667969 L 10.773438 11.371094 C 10.773438 11.574219 10.9375 11.738281 11.140625 11.738281 L 14.222656 11.738281 L 10.742188 16.730469 C 10.699219 16.792969 10.675781 16.867188 10.675781 16.941406 L 10.675781 17.574219 C 10.675781 17.777344 10.839844 17.941406 11.042969 17.941406 L 16.027344 17.941406 C 16.230469 17.941406 16.394531 17.777344 16.394531 17.574219 L 16.394531 16.867188 C 16.394531 16.664062 16.230469 16.5 16.027344 16.5 Z M 16.027344 16.5 "},null,-1);function pe(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[ue,de,be])}const fe={};fe.render=pe;var me=fe,ge=Object(o["createVNode"])("path",{d:"M 7.855469 12.046875 L 6.382812 12.046875 L 6.382812 0.367188 C 6.382812 0.164062 6.21875 0 6.015625 0 L 3.050781 0 C 2.851562 0 2.683594 0.164062 2.683594 0.367188 L 2.683594 12.046875 L 1.214844 12.046875 C 1.074219 12.046875 0.945312 12.128906 0.882812 12.257812 C 0.820312 12.382812 0.839844 12.535156 0.929688 12.644531 L 4.246094 17.597656 C 4.316406 17.683594 4.421875 17.734375 4.535156 17.734375 C 4.644531 17.734375 4.75 17.683594 4.820312 17.597656 L 8.140625 12.644531 C 8.230469 12.535156 8.246094 12.382812 8.183594 12.257812 C 8.125 12.128906 7.996094 12.046875 7.855469 12.046875 Z M 7.855469 12.046875 "},null,-1),he=Object(o["createVNode"])("path",{d:"M 17.089844 17.46875 L 14.640625 10.527344 C 14.589844 10.382812 14.449219 10.285156 14.292969 10.285156 L 13.585938 10.285156 C 13.566406 10.285156 13.546875 10.285156 13.527344 10.289062 C 13.507812 10.285156 13.488281 10.285156 13.46875 10.285156 L 12.777344 10.285156 C 12.621094 10.285156 12.484375 10.382812 12.429688 10.527344 L 9.992188 17.46875 C 9.953125 17.578125 9.96875 17.703125 10.039062 17.800781 C 10.109375 17.898438 10.21875 17.957031 10.339844 17.957031 L 11.398438 17.957031 C 11.5625 17.957031 11.703125 17.851562 11.75 17.695312 L 12.214844 16.167969 L 14.863281 16.167969 L 15.332031 17.695312 C 15.378906 17.851562 15.519531 17.957031 15.683594 17.957031 L 16.742188 17.957031 C 16.863281 17.957031 16.972656 17.898438 17.042969 17.800781 C 17.109375 17.703125 17.128906 17.578125 17.089844 17.46875 Z M 12.65625 14.707031 C 13.097656 13.277344 13.394531 12.289062 13.542969 11.757812 L 14.445312 14.707031 Z M 12.65625 14.707031 "},null,-1),Oe=Object(o["createVNode"])("path",{d:"M 16.035156 6.253906 L 12.761719 6.253906 L 16.238281 1.257812 C 16.28125 1.195312 16.304688 1.121094 16.304688 1.046875 L 16.304688 0.421875 C 16.304688 0.21875 16.140625 0.0546875 15.9375 0.0546875 L 11.148438 0.0546875 C 10.945312 0.0546875 10.78125 0.21875 10.78125 0.421875 L 10.78125 1.125 C 10.78125 1.328125 10.945312 1.492188 11.148438 1.492188 L 14.230469 1.492188 L 10.75 6.484375 C 10.707031 6.546875 10.683594 6.621094 10.683594 6.695312 L 10.683594 7.328125 C 10.683594 7.53125 10.847656 7.695312 11.050781 7.695312 L 16.035156 7.695312 C 16.238281 7.695312 16.402344 7.53125 16.402344 7.328125 L 16.402344 6.621094 C 16.402344 6.417969 16.238281 6.253906 16.035156 6.253906 Z M 16.035156 6.253906 "},null,-1);function je(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[ge,he,Oe])}const ke={};ke.render=je;var ve=ke,ye={name:"SortingModal",components:{IconSortAsc:me,IconSortDesc:ve},props:{},data:function(){return{ascending:0,orderBy:"",orderRandom:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{sorting:function(){this.$emit("sorting",{orderBy:this.orderBy,ascending:this.ascending}),this.closeModal()},changeOrderBy:function(e){this.orderBy=e,this.ascending=!this.ascending},closeModal:function(){this.$parent.hide("sortings",this)}}};n("0ab2");ye.render=le;var Be=ye,we={name:"ListBook",components:{SortingModal:Be},props:{},data:function(){return{data:{items:[],_links:{},_meta:{}},searchParams:null,activeGenre:null,activeParent:null,infinityState:!0,infinityLoading:!1,orderBy:"updated_at",limit:25,page:1,ascending:0,startPos:{x:0,y:0},endPos:{x:0,y:0}}},computed:{isMobile:function(){return this.$store.state.main.isMobile},genres:function(){return this.$store.state.genre.items}},watch:{},created:function(){document.title="Books"},mounted:function(){this.prepareGenre()},methods:{searchByName:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=1,e.loadBooks();case 2:case"end":return t.stop()}}),t)})))()},loadBooks:function(){var e=arguments,t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var o,r,c,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:null,r=t.activeGenre?t.activeGenre.id:t.$route.params.id?t.$route.params.id:null,null!==r){n.next=4;break}return n.abrupt("return",!1);case 4:if(t.infinityState||!o){n.next=8;break}return n.abrupt("return",!1);case 8:null===o&&(t.infinityState=!0);case 9:return c="/book?page=".concat(t.page,"&limit=").concat(t.limit,"&sort=").concat(t.ascending?"":"-").concat(t.orderBy?t.orderBy:"id","&genre_id=").concat(r),t.searchParams&&(c+="&name=".concat(t.searchParams)),t.infinityLoading=!0,t.$loader.show(),n.next=15,t.$get(c);case 15:a=n.sent,t.$loader.hide(),t.infinityLoading=!1,a&&("push"===o?((i=t.data.items).push.apply(i,Object(ce["a"])(a.items)),t.page=++t.page):(t.data.items.length=0,(s=t.data.items).push.apply(s,Object(ce["a"])(a.items)),t.page=++t.page),a.items.length<t.limit&&(t.infinityState=!1));case 19:case"end":return n.stop()}}),n)})))()},changeGenre:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=1,e.loadBooks();case 2:case"end":return t.stop()}}),t)})))()},prepareGenre:function(){var e=this;if(this.$route.params.id){var t,n=Object(re["a"])(this.genres);try{for(n.s();!(t=n.n()).done;){var o=t.value,r=o.childes.find((function(t){return t.id===+e.$route.params.id}));if(r){this.activeGenre=r;break}}}catch(c){n.e(c)}finally{n.f()}}},openBook:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.genres.findIndex((function(e){return"comics"===e.parent.name}))>-1,n.next=3,t.$router.push({name:o?"book-media":"book-view",params:{id:e.id}});case 3:case"end":return n.stop()}}),n)})))()},getCover:function(e){return e.cover_url?"".concat("https://google.com","/").concat(e.cover_url):"/img/book-dead-solid.svg"},touchStart:function(e){this.startPos={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},this.endPos={x:0,y:0}},touchEnd:function(e){this.endPos={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var t=this.endPos.x-this.startPos.x,n=this.startPos.y-this.endPos.y;t>100&&n<50&&this.$modal.show("sortings",this)},updateBySorting:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.orderBy=e.orderBy,t.ascending=e.ascending,t.page=1,t.loadBooks();case 4:case"end":return n.stop()}}),n)})))()},onScroll:function(){},loadAndPush:function(){this.loadBooks("push")},scrollToTop:function(){this.$el.scrollTop=0}}};n("e099");we.render=oe,we.__scopeId="data-v-74566746";var Ne=we,Ce=Object(o["withScopeId"])("data-v-ebcfce4e");Object(o["pushScopeId"])("data-v-ebcfce4e");var Ve={class:"list-genre"},xe={key:0,class:"header"};Object(o["popScopeId"])();var Le=Ce((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",Ve,[e.$store.state.main.isMobile?(Object(o["openBlock"])(),Object(o["createBlock"])("header",xe,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{class:"select","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeParent=t}),onChange:t[2]||(t[2]=function(){return a.loadGenre&&a.loadGenre.apply(a,arguments)})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.genresParent,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{class:"option",value:e,key:e.id},Object(o["toDisplayString"])(e.name),9,["value"])})),128))],544),[[o["vModelSelect"],e.activeParent]])])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.genres,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("section",{class:"genre",key:"genre"+e.id,onClick:function(t){return a.openGenre(e)}},Object(o["toDisplayString"])(e.name),9,["onClick"])})),128))])})),Se={name:"ListGenre",components:{},props:{},data:function(){return{activeParent:{childes:[]},genres:[]}},computed:{parentId:function(){return this.activeParent.id?this.activeParent.id:this.$route.params.id?this.$route.params.id:null},genresParent:function(){return this.$store.state.genre.items}},watch:{},created:function(){var e=this;if(document.title="Genres",this.$route.params.id){var t=this.genresParent.find((function(t){return t.id===+e.$route.params.id}));t&&(this.activeParent=t),this.loadGenre()}},mounted:function(){},methods:{openGenre:function(e){var t=this;this.$router.push({name:"list-book",params:{id:e.id,name:e.name,parent:this.genresParent.find((function(e){return e.id===+t.$route.params.id})).name}})},loadGenre:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$loader.show(),t.next=3,e.$get("/genre?parent_id=".concat(e.parentId));case 3:n=t.sent,e.$loader.hide(),n&&(e.genres=n);case 6:case"end":return t.stop()}}),t)})))()}}};n("7d1c");Se.render=Le,Se.__scopeId="data-v-ebcfce4e";var Me=Se,_e={key:0,class:"footer"},Ie={class:"progress-value"},$e={key:1,id:"image-modal",class:"image-modal"},Pe={class:"picture-action-panel"},Te={class:"picture-action-panel"};function Re(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("editor-modal"),s=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",Object(o["mergeProps"])({class:"book-container"},e.$attrs),[Object(o["createVNode"])("div",{class:"book",ref:"book",onScrollPassive:t[2]||(t[2]=function(){return a.handleScroll&&a.handleScroll.apply(a,arguments)}),id:"book"},[Object(o["createVNode"])("div",{class:"text",ref:"text",innerHTML:e.book.text,onMouseup:t[1]||(t[1]=Object(o["withModifiers"])((function(){return a.editMode&&a.editMode.apply(a,arguments)}),["ctrl"]))},null,40,["innerHTML"])],544)],16),"media"!==e.book.annotation?(Object(o["openBlock"])(),Object(o["createBlock"])("footer",_e,[Object(o["createVNode"])("progress",{class:"progress",value:e.progress,max:"100",id:"progressbar",onClick:t[3]||(t[3]=function(){return a.scrollByClick&&a.scrollByClick.apply(a,arguments)})},null,8,["value"]),Object(o["createVNode"])("div",Ie,Object(o["toDisplayString"])(e.progress),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{ref:"editor"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{"editor-node":e.editorNode,onSaveEditor:a.saveEditor},null,8,["editor-node","onSaveEditor"])]})),_:1},512),e.activeImage?(Object(o["openBlock"])(),Object(o["createBlock"])("div",$e,[Object(o["createVNode"])("span",{class:"close",onClick:t[4]||(t[4]=function(t){return e.activeImage=null})},"×"),Object(o["createVNode"])("aside",Pe,[Object(o["createVNode"])("button",{class:"picture-arrow-btn",onClick:t[5]||(t[5]=function(e){return a.showSlide("first")})},"1"),Object(o["createVNode"])("button",{class:"picture-arrow-btn",onClick:t[6]||(t[6]=function(e){return a.showSlide("prev")})},"Back")]),Object(o["createVNode"])("img",{class:"modal-content",id:"img01",src:e.activeImage},null,8,["src"]),Object(o["createVNode"])("aside",Te,[Object(o["createVNode"])("button",{class:"picture-arrow-btn",onClick:t[7]||(t[7]=function(e){return a.showSlide("last")})},"e"),Object(o["createVNode"])("button",{class:"picture-arrow-btn",onClick:t[8]||(t[8]=function(e){return a.showSlide("next")})},"Forward")])])):Object(o["createCommentVNode"])("",!0)],64)}n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4d63"),n("25f0");var Ge={class:"editor-modal"},De={class:"btn-bar"};function Fe(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",Ge,[e.rawEditor?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("textarea",{key:0,class:"textarea",rows:"10","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.editorNode.outerHTML=e})},null,512)),[[o["vModelText"],n.editorNode.outerHTML]]):Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("textarea",{key:1,class:"textarea",rows:"10","onUpdate:modelValue":t[2]||(t[2]=function(e){return n.editorNode.innerHTML=e})},null,512)),[[o["vModelText"],n.editorNode.innerHTML]]),Object(o["createVNode"])("footer",De,[Object(o["createVNode"])("button",{class:"negative-btn",onClick:t[3]||(t[3]=function(){return a.closeModal&&a.closeModal.apply(a,arguments)})},"сброс"),Object(o["createVNode"])("button",{class:"regular-btn",onClick:t[4]||(t[4]=function(t){return e.rawEditor=!e.rawEditor})},Object(o["toDisplayString"])(e.rawEditor?"HTML":"RAW"),1),Object(o["createVNode"])("button",{class:"positive-btn",onClick:t[5]||(t[5]=function(){return a.saveEditor&&a.saveEditor.apply(a,arguments)})},"сохранить")])])}var Ae={name:"EditorModal",components:{},props:{editorNode:{}},data:function(){return{rawEditor:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{saveEditor:function(){this.$emit("save-editor"),this.closeModal()},closeModal:function(){this.$parent.hide("editor",this)}},unmounted:function(){this.initialText=""}};n("cf1c");Ae.render=Fe;var Ee=Ae,Ue="https://google.com",ze={name:"Book",components:{EditorModal:Ee},props:{},data:function(){return{book:{annotation:null,text:null,genres:[]},progress:0,progressLoad:0,windowScroll:0,timer:null,activeImage:null,activeImageIndex:0,activeMedia:{type:null,url:null},editorNode:{},initialText:""}},methods:{loadBook:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c,a,i,s,l,u,d,b,p,f,m,g,h,O,j,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=null!==(n=sessionStorage.getItem("lib-token"))&&void 0!==n?n:"",r="Bearer ".concat(o),c="".concat("https://google.com","/book/view?id=").concat(e.$route.params.id),t.next=5,fetch(c,{headers:{Authorization:r}});case 5:if(a=t.sent,!a){t.next=41;break}i=a.body.getReader(),s=a.headers.get("Content-Length")?+a.headers.get("Content-Length"):+a.headers.get("Data-Size"),l=0,u=[];case 11:return t.next=14,i.read();case 14:if(d=t.sent,b=d.done,p=d.value,!b){t.next=19;break}return t.abrupt("break",26);case 19:u.push(p),l+=p.length,f=Math.round(100*l/s),f>=100&&(f=100,setTimeout((function(){return e.progressLoad=0}),500)),e.progressLoad=f,t.next=11;break;case 26:for(m=new Uint8Array(l),g=0,h=0,O=u;h<O.length;h++)j=O[h],m.set(j,g),g+=j.length;return k=JSON.parse(new TextDecoder("utf-8").decode(m)),t.next=32,e.checkLoadedBook(k);case 32:if(!t.sent){t.next=37;break}return t.next=35,e.relocateToMedia(k);case 35:t.next=41;break;case 37:return t.next=39,e.prepareUrlForMedia(k);case 39:e.book=t.sent,document.title="Book: ".concat(k.name);case 41:case"end":return t.stop()}}),t)})))()},checkLoadedBook:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.genres.findIndex((function(e){return"comics"===e.parent.name}))>-1);case 1:case"end":return t.stop()}}),t)})))()},relocateToMedia:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$emit("loaded-book",e);case 2:return n.next=4,t.$router.push({name:"book-media",params:{id:e.id}});case 4:case"end":return n.stop()}}),n)})))()},scrollByClick:function(e){var t=document.getElementById("progressbar").clientWidth,n=e.offsetX,o=100*n/t;console.log({scrollByClick:e,y:r,x:o,o:n}),document.getElementById("progressbar").value=o;var r=this.windowHeights*o/100;document.getElementById("book").scrollTo(0,r)},editMode:function(e){this.editorNode=e.target,this.$modal.show("editor",this)},saveEditor:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.book.text=e.$refs.text.innerHTML,n="/book/update?id=".concat(e.$route.params.id),t.next=4,e.$patch(n,{text:e.book.text});case 4:o=t.sent,o?e.$toast.success("Успешно сохранено"):console.log({editor:o});case 6:case"end":return t.stop()}}),t)})))()},handleScroll:function(e){this.progress=Math.round(100*e.target.scrollTop/(e.target.scrollHeight-e.target.clientHeight))},prepareUrlForMedia:function(e){if(e.text){var t=new RegExp("APIURL","g");return e.text=e.text.replace(t,"https://google.com"),e}return e},moveMedia:function(){var e,t=!0,n=document.querySelectorAll(".media"),o=Object(re["a"])(n);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.classList.add(t?"media--right":"media--left"),t=!t}}catch(c){o.e(c)}finally{o.f()}},scrollLog:function(e){console.log({e:e})},listenClickbyImg:function(){var e,t=document.getElementsByClassName("picture"),n=Object(re["a"])(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.addEventListener("click",this.openImage)}}catch(r){n.e(r)}finally{n.f()}},openImage:function(e){this.activeImage=e.target.src},showSlide:function(e){var t=0;"prev"===e?t=this.activeImageIndex>1?this.activeImageIndex-1:this.book.files.length-1:"next"===e?t=this.activeImageIndex<this.book.files.length-1?this.activeImageIndex+1:0:"last"===e?t=this.book.files.length-1:"first"===e&&(t=0),this.activeImageIndex=t,this.activeImage=this.getSrcImgUrl(this.book.files[t])},getSrcImgUrl:function(e){return e.url?"".concat(Ue,"/").concat(e.url):""}},computed:{windowHeights:function(){return document.getElementById("book").scrollHeight-document.getElementById("book").clientHeight}},watch:{},created:function(){this.loadBook()},mounted:function(){},updated:function(){this.moveMedia(),this.listenClickbyImg()}};n("9db8");ze.render=Re;var He=ze,Ze=(n("4de4"),{class:"books-table"}),Je={class:"header"},We=Object(o["createTextVNode"])("create"),qe={class:"table"},Xe={class:"thead"},Ye={class:"td-title"},Ke={class:"table-paginator"};function Qe(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("icon-sort-asc"),l=Object(o["resolveComponent"])("icon-sort-desc"),u=Object(o["resolveComponent"])("base-icon"),d=Object(o["resolveComponent"])("filter-modal"),b=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Ze,[Object(o["createVNode"])("header",Je,[Object(o["createVNode"])(i,{to:{name:"book-create"},class:"btn create-btn"},{default:Object(o["withCtx"])((function(){return[We]})),_:1}),Object(o["createVNode"])("button",{class:"btn",onClick:t[1]||(t[1]=function(){return a.showFilterModal&&a.showFilterModal.apply(a,arguments)})},"filter"),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"search",class:"searchText","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.bookName=t}),placeholder:"Search by name...",onInput:t[3]||(t[3]=function(){return a.searchByName&&a.searchByName.apply(a,arguments)})},null,544),[[o["vModelText"],e.bookName,void 0,{trim:!0}]])]),Object(o["createVNode"])("table",qe,[Object(o["createVNode"])("thead",Xe,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.columns,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])("th",{class:["th",e.columnsClasses[t]],key:n},[Object(o["createVNode"])("div",{class:["table-cell",{active:e.orderBy===t}]},[Object(o["createVNode"])("div",Ye,Object(o["toDisplayString"])(t),1),Object(o["createVNode"])("div",{class:"td-action",onClick:function(n){return a.sortBy(t,e.ascending?0:1)}},[Object(o["createVNode"])(u,{class:"icon","icon-name":"sort"},{default:Object(o["withCtx"])((function(){return[e.ascending?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0})):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1}))]})),_:1})],8,["onClick"])],2)],2)})),128))]),Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.books.items,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{class:["row",{picante:t.ad}],key:t.id},[Object(o["createVNode"])("td",{class:["td",e.columnsClasses.id],onClick:function(e){return a.openBook(t,"edit")}},Object(o["toDisplayString"])(t.id),11,["onClick"]),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.name],onClick:function(e){return a.openBook(t,"view")}},Object(o["toDisplayString"])(t.name),11,["onClick"]),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.annotation]},Object(o["toDisplayString"])(t.annotation),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.genres]},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.genres,(function(e,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:n},Object(o["toDisplayString"])(t.genres.length?e.name:""),1)})),128))],2),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.rating]},Object(o["toDisplayString"])(t.rating),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.view_count]},Object(o["toDisplayString"])(t.view_count),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.last_read]},Object(o["toDisplayString"])(a.getDate(t.last_read)),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.updated_at]},Object(o["toDisplayString"])(a.getDate(t.updated_at)),3)],2)})),128))])]),Object(o["createVNode"])("div",Ke,[e.books._links.first?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn table-pag__btn",onClick:t[4]||(t[4]=function(t){return a.toPage(e.books._links.first)})},"first ")):Object(o["createCommentVNode"])("",!0),e.books._links.prev?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"btn table-pag__btn",onClick:t[5]||(t[5]=function(t){return a.toPage(e.books._links.prev)})},"prev ")):Object(o["createCommentVNode"])("",!0),e.books._links.self?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:2,class:"btn table-pag__btn",onClick:t[6]||(t[6]=function(t){return a.toPage(e.books._links.self)})},Object(o["toDisplayString"])(e.books._meta?e.books._meta.currentPage:""),1)):Object(o["createCommentVNode"])("",!0),e.books._links.next?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:3,class:"btn table-pag__btn",onClick:t[7]||(t[7]=function(t){return a.toPage(e.books._links.next)})},"next ")):Object(o["createCommentVNode"])("",!0),e.books._links.last?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:4,class:"btn table-pag__btn",onClick:t[8]||(t[8]=function(t){return a.toPage(e.books._links.last)})},"last ")):Object(o["createCommentVNode"])("",!0),e.$store.state.main.isMobile?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("select",{key:5,class:"select",onChange:t[9]||(t[9]=function(){return a.getBooksPage&&a.getBooksPage.apply(a,arguments)}),"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.page=t})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.pagBtnArr,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{value:e,key:"page-"+t},Object(o["toDisplayString"])(e),9,["value"])})),128))],544)),[[o["vModelSelect"],e.page]]):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(b,{ref:"filterBookModal"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onActiveFilter:a.updateFilterPage,onResetFilter:a.resetTable,rating:e.filter.rating,genre:e.filter.genre,ad:e.filter.ad},null,8,["onActiveFilter","onResetFilter","rating","genre","ad"])]})),_:1},512)])}var et=n("5530"),tt=(n("a630"),{class:"header"}),nt=Object(o["createVNode"])("span",{class:"filter-title"},"filter",-1),ot={class:"label"},rt=Object(o["createVNode"])("span",{class:"title"},"genre",-1),ct={class:"label"},at=Object(o["createVNode"])("span",{class:"title"},"rating",-1),it={class:"footer"},st=Object(o["createVNode"])("button",{class:"positive-btn"},"find",-1);function lt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-close"),s=Object(o["resolveComponent"])("base-icon");return Object(o["openBlock"])(),Object(o["createBlock"])("form",{class:"filter",method:"dialog",onSubmit:t[6]||(t[6]=Object(o["withModifiers"])((function(){return a.findBookByFilter&&a.findBookByFilter.apply(a,arguments)}),["prevent"]))},[Object(o["createVNode"])("header",tt,[nt,Object(o["createVNode"])("button",{class:"close-btn",type:"reset",onClick:t[1]||(t[1]=function(){return a.closeModal&&a.closeModal.apply(a,arguments)})},[Object(o["createVNode"])(s,{class:"icon","icon-name":"close"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1})])]),Object(o["createVNode"])("label",ot,[rt,Object(o["withDirectives"])(Object(o["createVNode"])("select",{class:"select",ref:"filterBook",name:"selectGenre","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.genre=t})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.genres,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("optgroup",{key:e.id,label:e.name},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.childes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{class:"value",value:e,key:e.id},Object(o["toDisplayString"])(e.name),9,["value"])})),128))],8,["label"])})),128))],512),[[o["vModelSelect"],e.filter.genre]])]),Object(o["createVNode"])("label",ct,[at,Object(o["withDirectives"])(Object(o["createVNode"])("select",{class:"select","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filter.rating=t}),name:"selectRating"},[(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(5,(function(e){return Object(o["createVNode"])("option",{class:"value",value:e,key:"rating-"+e},Object(o["toDisplayString"])(e),9,["value"])})),64))],512),[[o["vModelSelect"],e.filter.rating]])]),"admin"===e.$store.state.user.name?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:["btn-switch btn",{active:n.genre.ad}],onClick:t[4]||(t[4]=function(t){return e.filter.genre.ad=!n.genre.ad})},"ad ",2)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("footer",it,[Object(o["createVNode"])("button",{class:"negative-btn",type:"button",onClick:t[5]||(t[5]=function(){return a.resetFilter&&a.resetFilter.apply(a,arguments)})},"reset"),st])],32)}n("a9e3");var ut=Object(o["createVNode"])("path",{d:"M 11.972656 9.003906 L 17.542969 3.433594 C 18.160156 2.816406 18.160156 1.820312 17.542969 1.207031 L 16.800781 0.460938 C 16.183594 -0.152344 15.1875 -0.152344 14.574219 0.460938 L 9.003906 6.03125 L 3.433594 0.460938 C 2.816406 -0.152344 1.820312 -0.152344 1.207031 0.460938 L 0.460938 1.203125 C -0.152344 1.820312 -0.152344 2.816406 0.460938 3.433594 L 6.03125 9.003906 L 0.460938 14.574219 C -0.152344 15.1875 -0.152344 16.1875 0.460938 16.800781 L 1.207031 17.542969 C 1.820312 18.160156 2.820312 18.160156 3.433594 17.542969 L 9.003906 11.972656 L 14.574219 17.542969 C 15.1875 18.160156 16.1875 18.160156 16.800781 17.542969 L 17.542969 16.800781 C 18.160156 16.183594 18.160156 15.1875 17.542969 14.574219 Z M 11.972656 9.003906 "},null,-1);function dt(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[ut])}const bt={};bt.render=dt;var pt=bt,ft={name:"FilterModal",components:{IconClose:pt},props:{rating:Number,ad:Number,genre:Object},data:function(){return{filter:{rating:null,ad:null,genre:{}}}},computed:{genres:function(){return this.$store.state.genre.items}},methods:{findBookByFilter:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("active-filter",{genre:e.filter.genre,rating:e.filter.rating,ad:e.filter.ad}),e.closeModal();case 2:case"end":return t.stop()}}),t)})))()},resetFilter:function(){this.$emit("reset-filter"),this.closeModal()},loadFilter:function(){var e,t;this.filter.rating=null!==(e=this.rating)&&void 0!==e?e:null,this.genre&&(this.filter.genre=this.genre),this.filter.ad=null!==(t=this.ad)&&void 0!==t?t:null},closeModal:function(){this.$parent.hide("filterBookModal",this)}},created:function(){this.loadFilter()}};n("c6fa");ft.render=lt;var mt=ft,gt=n("5502"),ht={name:"BooksTable",head:function(){return{title:"Table books"}},layout:"basement",middleware:[],components:{FilterModal:mt,IconSortAsc:me,IconSortDesc:ve},props:{},data:function(){return{books:{items:[],_links:{},_meta:{}},bookName:null,filter:{genre:null,rating:null,ad:null},page:1,pagBtnArr:[],limit:10,ascending:0,orderBy:null,columns:["id","name","annotation","genres","rating","view_count","last_read","updated_at"],columnsClasses:{id:"cell-id",name:"cell-name",annotation:"cell-annotation",genres:"cell-genre",rating:"cell-rating",view_count:"cell-view_count",last_read:"cell-last_read",updated_at:"cell-updated_at"}}},methods:{searchByName:function(){this.getBooksPage()},getDate:function(e){if(!e)return null;var t=new Date(1e3*e);return t?t.toLocaleString("ru-RU",{year:"2-digit",month:"2-digit",day:"numeric"}):null},openBook:function(e,t){var n=this;return Object(I["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=e.genres.findIndex((function(e){return"comics"===e.parent.name}))>-1,o.next=3,n.$router.push({name:"edit"===t?"book-edit":r?"book-media":"book-view",params:{id:e.id}});case 3:case"end":return o.stop()}}),o)})))()},resetTable:function(){this.filter.genre=null,this.filter.rating=null,this.filter.ad=null,this.getBooksPage()},updateFilterPage:function(e){null!==e&&void 0!==e&&e.genre&&(this.filter.genre=e.genre),null!==e&&void 0!==e&&e.rating&&(this.filter.rating=e.rating),null!==e&&void 0!==e&&e.ad&&(this.filter.ad=e.ad),this.getBooksPage()},getBooksPage:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/book?page=".concat(e.page,"&limit=").concat(e.limit,"&sort=").concat(e.ascending?"":"-").concat(e.orderBy?e.orderBy:"id"),e.bookName&&(n+="&name=".concat(e.bookName)),e.filter.genre&&(n+="&genre_id=".concat(e.filter.genre.id)),e.filter.rating&&(n+="&rating=".concat(e.filter.rating)),e.filter.ad&&(n+="&ad=1"),e.$loader.show(),t.next=8,e.$get(n);case 8:o=t.sent,e.$loader.hide(),o&&(e.books=o,e.page=o._meta.currentPage,e.pagBtnArr=Array.from({length:o._meta.pageCount},(function(e,t){return t+1})));case 11:case"end":return t.stop()}}),t)})))()},sortBy:function(e,t){this.orderBy=e,this.ascending=t,this.getBooksPage()},getThumbs:function(e){return e.cover_url?"".concat(this.$config.apiUrl,"/").concat(e.cover_url):"/img/book-cover.jpg"},toPage:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.goPage(e.href);case 2:o=n.sent,o?t.books=o:console.log({goPage:o});case 4:case"end":return n.stop()}}),n)})))()},showFilterModal:function(){this.$modal.show("filterBookModal",this)}},computed:Object(et["a"])(Object(et["a"])({},Object(gt["b"])({main:function(e){return e.main}})),{},{modalSize:function(){return this.main.isDesktop?600:"100%"}}),watch:{},created:function(){document.title="Table Books"},mounted:function(){this.getBooksPage()},updated:function(){}};n("4832");ht.render=Qe;var Ot=ht,jt=Object(o["withScopeId"])("data-v-d255f9ac");Object(o["pushScopeId"])("data-v-d255f9ac");var kt={class:"edit-book"},vt={class:"text-container"},yt={class:"text-container__action"},Bt={key:0,class:"switch-label"},wt={class:"switch-title"},Nt={class:"switch"},Ct=Object(o["createVNode"])("span",{class:"slider round"},null,-1),Vt={class:"switch-title"},xt={class:"section row"},Lt={class:"ml-head"},St=Object(o["createTextVNode"])(" annotation "),Mt={class:"value row"},_t={key:0},It={class:"label"},$t={class:"label-header"},Pt={class:"title"},Tt={class:"action-bar"},Rt={key:0,class:"media-container"},Gt={class:"header-media"},Dt={class:"upload-dropbox"},Ft=Object(o["createTextVNode"])("Choose files "),At={class:"media-wrapper"},Et={class:"action-panel"},Ut={key:1,class:"media video",controls:""},zt={key:2,class:"media audio",controls:"",muted:""},Ht={class:"figure-caption"};Object(o["popScopeId"])();var Zt=jt((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("star-rating"),s=Object(o["resolveComponent"])("form-field"),l=Object(o["resolveComponent"])("icon-carriage"),u=Object(o["resolveComponent"])("base-icon"),d=Object(o["resolveComponent"])("icon-paragraph"),b=Object(o["resolveComponent"])("icon-slash"),p=Object(o["resolveComponent"])("progress-ring"),f=Object(o["resolveComponent"])("genre-book"),m=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])("div",kt,[Object(o["createVNode"])("div",vt,[Object(o["createVNode"])("div",yt,[Object(o["createVNode"])("button",{class:"negative-btn",type:"reset",onClick:t[1]||(t[1]=function(){return a.resetBook&&a.resetBook.apply(a,arguments)})},"reset"),Object(o["createVNode"])("button",{class:"positive-btn",onClick:t[2]||(t[2]=function(){return a.sendBook&&a.sendBook.apply(a,arguments)})},"save"),Object(o["createVNode"])(i,{rating:e.book.rating,"onUpdate:rating":t[3]||(t[3]=function(t){return e.book.rating=t}),"star-size":20,"show-rating":!1},null,8,["rating"]),"admin"===e.$store.state.user.name?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Bt,[Object(o["createVNode"])("span",wt,Object(o["toDisplayString"])(e.$store.state.isDesktop?"SFW":"S"),1),Object(o["createVNode"])("label",Nt,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.book.ad=t})},null,512),[[o["vModelCheckbox"],e.book.ad]]),Ct]),Object(o["createVNode"])("span",Vt,Object(o["toDisplayString"])(e.$store.state.isDesktop?"NSFW":"N"),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("section",xt,[Object(o["createVNode"])(s,{placeholder:"name"},{default:jt((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"ml-value","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.book.name=t}),placeholder:"name",onFocus:t[6]||(t[6]=function(e){return e.target.placeholder=""}),onBlur:t[7]||(t[7]=function(e){return e.target.placeholder="name"})},null,544),[[o["vModelText"],e.book.name,void 0,{trim:!0}]])]})),_:1}),Object(o["createVNode"])(s,{placeholder:"source"},{default:jt((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"url",class:"ml-value",placeholder:"source","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.book.source=t}),onFocus:t[9]||(t[9]=function(e){return e.target.placeholder=""}),onBlur:t[10]||(t[10]=function(e){return e.target.placeholder="source"})},null,544),[[o["vModelText"],e.book.source,void 0,{trim:!0}]])]})),_:1})]),Object(o["createVNode"])(s,{placeholder:"annotation"},{header:jt((function(){return[Object(o["createVNode"])("span",Lt,[St,Object(o["createVNode"])("meter",{class:"meter",value:e.book.annotation.length,min:"0",max:"300",low:"30",high:"280",optimum:"150"},null,8,["value"])])]})),default:jt((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"ml-value textarea",rows:"4",maxlength:"300","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.book.annotation=t}),placeholder:"annotation",onFocus:t[12]||(t[12]=function(e){return e.target.placeholder=""}),onBlur:t[13]||(t[13]=function(e){return e.target.placeholder="annotation"})},null,544),[[o["vModelText"],e.book.annotation,void 0,{trim:!0}]])]})),_:1}),Object(o["createVNode"])("section",{class:"section genre",onClick:t[14]||(t[14]=function(){return a.openGenreModal&&a.openGenreModal.apply(a,arguments)})},[Object(o["createVNode"])("div",Mt,[0===e.genres.length?(Object(o["openBlock"])(),Object(o["createBlock"])("span",_t,"Не выбраны жанры")):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.genres,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{class:"value genre-span",style:{color:a.colorizeGenre(t)},key:e.id},Object(o["toDisplayString"])(e.name),5)})),128))])]),Object(o["createVNode"])("div",It,[Object(o["createVNode"])("span",$t,[Object(o["createVNode"])("span",Pt,"text "+Object(o["toDisplayString"])(e.book.text?e.book.text.length:""),1),Object(o["createVNode"])("span",Tt,[Object(o["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[15]||(t[15]=function(){return a.toggleEditor&&a.toggleEditor.apply(a,arguments)})},Object(o["toDisplayString"])(e.editor),1),Object(o["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[16]||(t[16]=function(e){return a.formatText("caret")}),"data-tooltip":"переносы строк"},[Object(o["createVNode"])(u,{class:"icon"},{default:jt((function(){return[Object(o["createVNode"])(l)]})),_:1})]),Object(o["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[17]||(t[17]=function(e){return a.formatText("double-p")}),"data-tooltip":"двойные <p>"},[Object(o["createVNode"])(u,{class:"icon"},{default:jt((function(){return[Object(o["createVNode"])(d)]})),_:1})]),Object(o["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[18]||(t[18]=function(e){return a.formatText("comment")}),"data-tooltip":"комментарий"},[Object(o["createVNode"])(u,{class:"icon"},{default:jt((function(){return[Object(o["createVNode"])(b)]})),_:1})])])]),"raw"===e.editor?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("textarea",{key:0,class:"editor clarity","onUpdate:modelValue":t[19]||(t[19]=function(t){return e.book.text=t}),rows:"22",ref:"editor"},null,512)),[[o["vModelText"],e.book.text]]):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:1,class:"editor",innerHTML:e.book.text},null,8,["innerHTML"]))])]),e.book.id?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Rt,[Object(o["createVNode"])("header",Gt,[Object(o["createVNode"])("label",Dt,[Ft,Object(o["createVNode"])("input",{type:"file",class:"upload-input desktop",multiple:"",onChange:t[20]||(t[20]=function(e){return a.loadFiles(e.target.files)})},null,32)]),Object(o["createVNode"])("button",{class:"positive-btn",onClick:t[21]||(t[21]=function(){return a.sendAllFiles&&a.sendAllFiles.apply(a,arguments)})},"all upload"),Object(o["createVNode"])("button",{class:"negative-btn",onClick:t[22]||(t[22]=function(){return a.deleteAllFiles&&a.deleteAllFiles.apply(a,arguments)})},"remove files")]),Object(o["createVNode"])("div",At,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.files,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])("figure",{class:"figure",key:"origy"+n},[Object(o["createVNode"])("div",Et,[void 0===t.id?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"image-entry-btn",onClick:function(e){return a.sendFile(t,n)}},"load",8,["onClick"])):Object(o["createCommentVNode"])("",!0),"image/webp"===t.type&&void 0!==t.id?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"image-entry-btn",onClick:function(n){return e.book.cover_id=t.id}},Object(o["toDisplayString"])(e.book.cover_id===t.id?"current":"set")+"cover ",9,["onClick"])):Object(o["createCommentVNode"])("",!0),void 0!==t.id?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:2,class:"image-entry-btn",onClick:function(e){return a.copyFileName(t)}},"tag",8,["onClick"])):Object(o["createCommentVNode"])("",!0),void 0!==t.id?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:3,class:"image-entry-btn",onClick:function(e){return a.deleteFile(n)}},"delete",8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createVNode"])(p,{radius:60,progress:a.calcProgressUpload(n),stroke:10,color:"#ff2400"},null,8,["progress"]),[[o["vShow"],a.calcProgressUpload(n)<100&&a.calcProgressUpload(n)>0]]),"image"===a.checkType(t.type)?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,class:"media image",src:a.getSrc(t)},null,8,["src"])):"video"===a.checkType(t.type)?(Object(o["openBlock"])(),Object(o["createBlock"])("video",Ut,[Object(o["createVNode"])("source",{src:a.getSrc(t)},null,8,["src"])])):"audio"===a.checkType(t.type)?(Object(o["openBlock"])(),Object(o["createBlock"])("audio",zt,[Object(o["createVNode"])("source",{src:a.getSrc(t)},null,8,["src"])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("figcaption",Ht,Object(o["toDisplayString"])(t.name?t.name:t.full_name),1)])})),128))])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(m,{ref:"genreBook",width:750},{default:jt((function(){return[Object(o["createVNode"])(f,{"genres-props":e.genres,onSetGenres:a.setGenres},null,8,["genres-props","onSetGenres"])]})),_:1},512)])})),Jt=n("3835"),Wt=(n("d81d"),n("2b3d"),n("a434"),n("caad"),n("2532"),Object(o["withScopeId"])("data-v-16e508c6"));Object(o["pushScopeId"])("data-v-16e508c6");var qt={class:"ml-head"};Object(o["popScopeId"])();var Xt=Wt((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("label",{class:"ml",onFocusin:t[1]||(t[1]=function(t){return e.focused=!0}),onFocusout:t[2]||(t[2]=function(t){return e.focused=!1})},[e.focused?Object(o["renderSlot"])(e.$slots,"header",{key:0},(function(){return[Object(o["createVNode"])("span",qt,Object(o["toDisplayString"])(n.placeholder),1)]}),{},!0):Object(o["createCommentVNode"])("",!0),Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)],32)})),Yt={name:"FormField",components:{},props:{placeholder:String},data:function(){return{focused:!1}},methods:{},computed:{},watch:{},created:function(){},mounted:function(){},updated:function(){}};n("c9af");Yt.render=Xt,Yt.__scopeId="data-v-16e508c6";var Kt=Yt,Qt=n("5b3d"),en=n.n(Qt),tn=Object(o["createVNode"])("path",{d:"M 16.875 0.1875 L 5.421875 0.1875 C 2.53125 0.1875 0.1875 2.527344 0.1875 5.417969 C 0.1875 8.308594 2.53125 10.652344 5.421875 10.652344 L 7.160156 10.652344 C 7.261719 10.652344 7.347656 10.734375 7.347656 10.839844 L 7.347656 16.875 C 7.347656 17.394531 7.765625 17.8125 8.285156 17.8125 C 8.800781 17.8125 9.222656 17.394531 9.222656 16.875 L 9.222656 2.25 C 9.222656 2.144531 9.304688 2.0625 9.410156 2.0625 L 12.171875 2.0625 C 12.273438 2.0625 12.359375 2.144531 12.359375 2.25 L 12.359375 16.875 C 12.359375 17.394531 12.777344 17.8125 13.296875 17.8125 C 13.8125 17.8125 14.234375 17.394531 14.234375 16.875 L 14.234375 2.25 C 14.234375 2.199219 14.253906 2.152344 14.289062 2.117188 C 14.324219 2.082031 14.371094 2.0625 14.421875 2.0625 L 16.875 2.0625 C 17.394531 2.0625 17.8125 1.644531 17.8125 1.125 C 17.8125 0.605469 17.394531 0.1875 16.875 0.1875 Z M 7.351562 8.589844 C 7.351562 8.691406 7.265625 8.777344 7.164062 8.777344 L 5.421875 8.777344 C 3.566406 8.777344 2.0625 7.273438 2.0625 5.417969 C 2.0625 3.5625 3.566406 2.0625 5.421875 2.0625 L 7.160156 2.0625 C 7.210938 2.058594 7.257812 2.078125 7.292969 2.117188 C 7.332031 2.152344 7.351562 2.199219 7.351562 2.25 Z M 7.351562 8.589844 "},null,-1);function nn(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[tn])}const on={};on.render=nn;var rn=on,cn=Object(o["createVNode"])("path",{d:"M 18 9 L 13.757812 13.242188 L 12.695312 12.183594 L 15.878906 9 L 12.695312 5.816406 L 13.757812 4.757812 Z M 2.121094 9 L 5.304688 12.183594 L 4.242188 13.242188 L 0 9 L 4.242188 4.757812 L 5.300781 5.816406 Z M 7.339844 15.75 L 5.746094 15.75 L 10.660156 2.25 L 12.253906 2.25 Z M 7.339844 15.75 "},null,-1);function an(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[cn])}const sn={};sn.render=an;var ln=sn,un=Object(o["createVNode"])("path",{d:"M 7.328125 0.015625 C 6.476562 0.015625 5.78125 0.710938 5.78125 1.5625 L 5.78125 7.648438 L 1.5625 7.648438 C 0.710938 7.648438 0.015625 8.339844 0.015625 9.195312 L 0.015625 16.4375 C 0.015625 17.289062 0.710938 17.984375 1.5625 17.984375 L 7.097656 17.984375 C 7.171875 17.992188 7.25 18 7.328125 18 L 16.417969 18 C 16.847656 18 17.238281 17.824219 17.519531 17.539062 C 17.804688 17.257812 17.984375 16.867188 17.984375 16.4375 L 17.984375 9.195312 C 17.984375 9.113281 17.976562 9.035156 17.964844 8.960938 L 17.964844 1.5625 C 17.964844 0.710938 17.273438 0.015625 16.417969 0.015625 Z M 11.726562 11.367188 L 11.726562 6.839844 C 11.726562 6.363281 12.113281 5.976562 12.589844 5.976562 C 13.066406 5.976562 13.449219 6.363281 13.449219 6.839844 L 13.449219 13.09375 L 7.976562 13.09375 L 8.53125 13.652344 C 8.867188 13.988281 8.867188 14.535156 8.53125 14.871094 C 8.195312 15.210938 7.648438 15.210938 7.3125 14.871094 L 4.675781 12.238281 L 7.3125 9.601562 C 7.648438 9.265625 8.195312 9.265625 8.53125 9.601562 C 8.871094 9.9375 8.871094 10.484375 8.53125 10.824219 L 7.984375 11.367188 Z M 11.726562 11.367188 "},null,-1);function dn(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("g",null,[un])}const bn={};bn.render=dn;var pn=bn,fn={class:"modal-header"},mn=Object(o["createVNode"])("h1",null,"Genre",-1),gn={class:"genre-titles"},hn={key:0},On={key:0,class:"genres"},jn=Object(o["createVNode"])("legend",null,"all genres",-1),kn={class:"parent-title"},vn=Object(o["createVNode"])("span",{class:"checkmark"},null,-1),yn={class:"footer"},Bn=Object(o["createVNode"])("button",{class:"positive-btn"},"Сохранить",-1);function wn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-close"),s=Object(o["resolveComponent"])("base-icon");return Object(o["openBlock"])(),Object(o["createBlock"])("form",{class:"genre-book",onSubmit:t[5]||(t[5]=Object(o["withModifiers"])((function(){return a.sendGenre&&a.sendGenre.apply(a,arguments)}),["prevent"]))},[Object(o["createVNode"])("header",fn,[mn,Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(e.genres.length),1),Object(o["createVNode"])("button",{class:"close-btn",type:"reset",onClick:t[1]||(t[1]=function(){return a.closeModal&&a.closeModal.apply(a,arguments)})},[Object(o["createVNode"])(s,{class:"icon","icon-name":"close"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1})])]),Object(o["createVNode"])("fieldset",gn,[Object(o["createVNode"])("legend",null,"selected: "+Object(o["toDisplayString"])(e.selectedGenre.length),1),0===e.selectedGenre.length?(Object(o["openBlock"])(),Object(o["createBlock"])("span",hn,"Не выбраны жанры")):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.selectedGenre,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{class:"fieldset-genre",style:{color:a.colorizeGenre(t)},key:e.id},Object(o["toDisplayString"])(e.name),5)})),128))]),e.$store.state.main.isDesktop?(Object(o["openBlock"])(),Object(o["createBlock"])("fieldset",On,[jn,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$store.state.genre.items,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["parent",{"checked-childes":a.calcCheckedChildes(n)}],key:n.id,onClick:function(t){return e.activeParent=Number(n.id)}},[Object(o["createVNode"])("div",kn,Object(o["toDisplayString"])(n.name),1),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n.childes,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])("label",{class:"checkbox-container",key:n.id},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.name)+" ",1),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"checkbox",value:n,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedGenre=t})},null,8,["value"]),[[o["vModelCheckbox"],e.selectedGenre]]),vn])})),128))],10,["onClick"])})),128))])):Object(o["createCommentVNode"])("",!0),e.$store.state.main.isMobile?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("select",{key:1,class:"select-genre",multiple:"","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.genres=t}),size:"1"},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$store.state.genre.items,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("optgroup",{key:e.id,label:e.title},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.childes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:e.id},Object(o["toDisplayString"])(e.title),1)})),128))],8,["label"])})),128))],512)),[[o["vModelSelect"],e.genres]]):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("footer",yn,[Object(o["createVNode"])("button",{class:"negative-btn",type:"button",onClick:t[4]||(t[4]=function(){return a.reset&&a.reset.apply(a,arguments)})},"сброс"),Bn])],32)}var Nn={name:"GenreBook",components:{IconClose:pt},props:{genresProps:Array},data:function(){return{activeParent:"",searchField:"",selectedGenre:[],genres:[],baseGenres:[{id:null,title:"",childes:[]}]}},computed:{},watch:{},created:function(){this.loadGenres()},mounted:function(){},methods:{sendGenre:function(){this.$emit("set-genres",this.selectedGenre),this.closeModal()},calcCheckedChildes:function(e){var t=this;return e.childes.find((function(e){return t.genres.map((function(e){return e.id})).includes(e.id)}))},loadGenres:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.$store.state.genre.items.length){t.next=3;break}return t.next=3,e.$store.dispatch("genre/loadGenres");case 3:e.genres=e.$store.state.genre.items.map((function(e){return Object(et["a"])({},e)})),e.selectedGenre=e.genresProps.map((function(e){return Object(et["a"])({},e)}));case 5:case"end":return t.stop()}}),t)})))()},colorizeGenre:function(e){var t=["RED","ORANGE","YELLOW","GREEN","BLUE","DeepSkyBlue","PURPLE"];return t[e]},reset:function(){this.selectedGenre=this.genresProps.map((function(e){return Object(et["a"])({},e)}))},closeModal:function(){this.$parent.hide("genreBook",this)}}};n("a36e");Nn.render=wn;var Cn=Nn,Vn={class:"loader-ring"},xn={class:"progress"};function Ln(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{id:"ring",class:["ring",{"over-top":n.progress}]},[Object(o["createVNode"])("div",Vn,[(Object(o["openBlock"])(),Object(o["createBlock"])("svg",{height:2*n.radius,width:2*n.radius},[Object(o["createVNode"])("circle",{stroke:"#018786","stroke-dasharray":a.circumference+" "+a.circumference,style:{strokeDashoffset:a.strokeDashoffset},"stroke-width":n.stroke,fill:"transparent",r:a.normalizedRadius,cx:n.radius,cy:n.radius},null,12,["stroke-dasharray","stroke-width","r","cx","cy"])],8,["height","width"])),Object(o["createVNode"])("span",xn,Object(o["toDisplayString"])(n.progress),1)])],2)}var Sn={name:"ProgressRing",components:{},props:{radius:Number,progress:Number,stroke:Number},data:function(){return{}},computed:{strokeDashoffset:function(){return this.circumference-this.progress/100*this.circumference},normalizedRadius:function(){return this.radius-2*this.stroke},circumference:function(){return 2*this.normalizedRadius*Math.PI}},watch:{},created:function(){},mounted:function(){},methods:{}};n("c009");Sn.render=Ln;var Mn=Sn,_n={name:"BookEdit",components:{ProgressRing:Mn,GenreBook:Cn,IconParagraph:rn,IconSlash:ln,IconCarriage:pn,StarRating:en.a,FormField:Kt},props:{},data:function(){return{files:[],uploadingProgress:[],book:{id:null,name:null,annotation:"",text:"",source:null,cover:null,rating:null,ad:null,files:[]},genres:[],editor:"raw",expandText:!1,expandIllustration:!1}},methods:{calcProgressUpload:function(e){return this.uploadingProgress[e]},sendBook:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkBook();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return",!1);case 5:if(r="/book/create",c=Object(et["a"])(Object(et["a"])({},e.book),{},{genres:e.genres.map((function(e){return e.id}))}),e.$loader.show(),!e.$route.params.id){t.next=15;break}return r="/book/update?id=".concat(e.$route.params.id),t.next=12,e.$patch(r,c);case 12:o=t.sent,t.next=18;break;case 15:return t.next=17,e.$post(r,c);case 17:o=t.sent;case 18:e.$loader.hide(),o&&e.$router.replace("/book");case 20:case"end":return t.stop()}}),t)})))()},resetBook:function(){this.book={id:null,name:null,annotation:"",text:"",source:null,cover_id:null,cover_url:null,rating:null,book:null,files:[]},this.genres=[]},checkBook:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!0,o=[],e.book.name||(o.push("empty name"),n=!1),e.genres.length<1&&(o.push("choose at least one genre"),n=!1),0===e.book.text.length&&(o.push("empty text"),n=!1),n||e.$toast.error(o),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},getBook:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.id){t.next=8;break}return n="/book/view?id=".concat(e.$route.params.id),t.next=4,e.$get(n);case 4:o=t.sent,o?(e.book=Object(et["a"])(Object(et["a"])({},o),{},{annotation:o.annotation?o.annotation:""}),e.genres=Object(ce["a"])(o.genres),(r=e.files).push.apply(r,Object(ce["a"])(o.files))):console.log(o),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})))()},loadFiles:function(e){var t,n=Object(re["a"])(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.files.push(o),this.uploadingProgress.push(null)}}catch(r){n.e(r)}finally{n.f()}},getSrc:function(e){var t=!!e.id;return t?"".concat("https://google.com","/").concat(e.url):window.URL.createObjectURL(e)},sendAllFiles:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(re["a"])(e.files.entries()),t.prev=1,n.s();case 3:if((o=n.n()).done){t.next=9;break}return r=Object(Jt["a"])(o.value,2),c=r[0],a=r[1],t.next=7,e.sendFile(a,c);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()},sendFile:function(e,t){var n=this;return Object(I["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log({index:t}),o.abrupt("return",new Promise(function(n){var o=this,r=new FormData;r.append("file",e);var c=new XMLHttpRequest,a=sessionStorage.getItem("lib-token");c.open("POST","".concat("https://google.com","/media-storage/upload?book_id=").concat(this.book.id)),c.setRequestHeader("Authorization","Bearer ".concat(a)),c.responseType="json",c.upload.onprogress=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.uploadingProgress[t]=Math.round(100*n.loaded/n.total),o.$forceUpdate();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onloadend=function(){200===c.status?(console.log({xhr:c.response,index:t}),o.files[t]=c.response,o.$forceUpdate(),n(c.response)):console.log("Ошибка "+o.status)},c.send(r)}.bind(n)));case 2:case"end":return o.stop()}}),o)})))()},deleteAllFiles:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/book/delete-all-media?id=".concat(e.book.id),t.next=3,e.$delete(n);case 3:o=t.sent,o?(e.files.length=0,e.uploadingProgress.length=0,e.$forceUpdate()):console.log(o);case 5:case"end":return t.stop()}}),t)})))()},resizeSelect:function(e){"focusin"===e.type&&e.target.attributes.size?e.target.attributes.size.value=4:"focusout"===e.type&&e.target.attributes.size&&(e.target.attributes.size.value=1)},checkType:function(e){return"image/png"===e||"image/jpeg"===e||"image/gif"===e||"image/webp"===e?"image":"video/webm"===e||"video/mp4"===e?"video":"audio/mpeg"===e?"audio":""===e?"file":void 0},deleteFile:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="/media-storage/delete?id=".concat(t.files[e].id),n.next=3,t.$delete(o);case 3:r=n.sent,r?(t.files.splice(e,1),t.uploadingProgress.splice(e,1)):console.error(r);case 5:case"end":return n.stop()}}),n)})))()},copyFileName:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!["image/webp","image/png","image/jpeg"].includes(e.type)){t.next=5;break}return t.next=3,navigator.clipboard.writeText('<img class="media picture" src="APIURL/'.concat(e.url,'">'));case 3:t.next=13;break;case 5:if(!["video/webm","video/mp4"].includes(e.type)){t.next=10;break}return t.next=8,navigator.clipboard.writeText('<video class="media video" autoplay loop muted controls><source src="APIURL/'.concat(e.url,'"/></video>'));case 8:t.next=13;break;case 10:if("audio/mp4"!==e.type){t.next=13;break}return t.next=13,navigator.clipboard.writeText('<audio class="media audio" controls><source src="APIURL/'.concat(e.url,'"/></audio>'));case 13:case"end":return t.stop()}}),t)})))()},formatText:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:"caret"===e?t.book.text=t.book.text.replace(/\n/g,"<p>"):"double-p"===e?t.book.text=t.book.text.replace(/<p><p>/g,"<p>"):"comment"===e&&(o=t.$refs.editor.value.substring(t.$refs.editor.selectionStart,t.$refs.editor.selectionEnd),o.includes("\x3c!-- ")&&o.includes(" --\x3e")?(o=o.replace("\x3c!-- ",""),o=o.replace(" --\x3e","")):o="\x3c!-- "+o+" --\x3e",t.$refs.editor.setRangeText(o));case 1:case"end":return n.stop()}}),n)})))()},errorImage:function(e){e.onerror=null,e.target.src="/icons/book-dead-solid.svg"},toggleEditor:function(){"raw"===this.editor?this.editor="html":this.editor="raw"},openGenreModal:function(){this.$modal.show("genreBook",this)},setGenres:function(e){this.genres=e},colorizeGenre:function(e){var t=["RED","ORANGE","YELLOW","GREEN","BLUE","DeepSkyBlue","PURPLE"];return t[e]}},computed:{},watch:{genres:{handler:function(){this.book.ad=this.genres.findIndex((function(e){return e.ad}))>-1},deep:!0}},created:function(){this.getBook(),document.title="Editor"},mounted:function(){},updated:function(){}};n("cfb0");_n.render=Zt,_n.__scopeId="data-v-d255f9ac";var In=_n,$n=Object(o["withScopeId"])("data-v-0b73e52a");Object(o["pushScopeId"])("data-v-0b73e52a");var Pn={class:"book-container"},Tn={key:0,class:"book-video"},Rn={key:0,class:"media-list"},Gn={class:"media-name"},Dn={class:"media-video"},Fn={key:1,class:"book-picture"};Object(o["popScopeId"])();var An=$n((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",Pn,["video"===a.getTypeBook||"audio"===a.getTypeBook?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Tn,[e.main.isDesktop?(Object(o["openBlock"])(),Object(o["createBlock"])("ol",Rn,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.book.files,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:{active:t.id===e.activeMedia.id},key:t.id,onClick:function(n){return e.activeMedia=t}},[Object(o["createVNode"])("span",Gn,Object(o["toDisplayString"])(t.file_name),1)],10,["onClick"])})),128))])):e.main.isMobile?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("select",{key:1,class:"select","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeMedia=t})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.book.files,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{value:e,key:e.id},Object(o["toDisplayString"])(e.file_name),9,["value"])})),128))],512)),[[o["vModelSelect"],e.activeMedia]]):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("figure",Dn,["video/webm"===e.activeMedia.type?(Object(o["openBlock"])(),Object(o["createBlock"])("video",{key:0,src:a.getSrcUrl,controls:""},null,8,["src"])):"audio/mpeg"===e.activeMedia.type?(Object(o["openBlock"])(),Object(o["createBlock"])("audio",{key:1,src:a.getSrcUrl,controls:""},null,8,["src"])):Object(o["createCommentVNode"])("",!0)])])):"picture"===a.getTypeBook?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Fn,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.book.files,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("img",{class:"book-picture_img",src:a.getSrcImgUrl(t),alt:"",key:t.id,onClick:function(n){return e.activeImage=a.getSrcImgUrl(t)}},null,8,["src","onClick"])})),128))])):Object(o["createCommentVNode"])("",!0)])})),En="https://google.com",Un={name:"TheMedia",components:{},props:{bookProps:Object},data:function(){return{book:{annotation:null,text:null,genres:[]},activeImage:null,activeImageIndex:0,activeMedia:{type:null,url:null}}},computed:Object(et["a"])(Object(et["a"])({},Object(gt["b"])({main:function(e){return e.main}})),{},{getTypeBook:function(){return-1!==this.book.genres.findIndex((function(e){return"picture"===e.name}))?"picture":-1!==this.book.genres.findIndex((function(e){return"audio"===e.name}))?"audio":-1!==this.book.genres.findIndex((function(e){return"video"===e.name}))?"video":""},getSrcUrl:function(){return this.activeMedia.url?"".concat(En,"/").concat(this.activeMedia.url):""}}),watch:{},created:function(){this.checkBook()},mounted:function(){},methods:{checkBook:function(){this.bookProps.id&&this.bookProps.id===+this.$route.params.id?this.book=Object.assign({},this.bookProps):this.loadBook()},loadBook:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/book/view?id=".concat(e.$route.params.id),t.prev=1,t.next=4,e.$get(n);case 4:e.book=t.sent,document.title="Book: ".concat(e.book.name),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log({loadBook:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getSrcImgUrl:function(e){return e.url?"".concat(En,"/").concat(e.url):""}}};n("5e02");Un.render=An,Un.__scopeId="data-v-0b73e52a";var zn=Un,Hn=(n("a4d3"),n("e01a"),Object(o["withScopeId"])("data-v-0cb23c0d"));Object(o["pushScopeId"])("data-v-0cb23c0d");var Zn={class:"genre-table"},Jn={class:"header"},Wn={class:"table"},qn={class:"thead"},Xn={class:"table-cell"},Yn={class:"td-title"};Object(o["popScopeId"])();var Kn=Hn((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-sort-asc"),s=Object(o["resolveComponent"])("icon-sort-desc"),l=Object(o["resolveComponent"])("base-icon"),u=Object(o["resolveComponent"])("edit-genre"),d=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Zn,[Object(o["createVNode"])("header",Jn,[Object(o["createVNode"])("button",{class:"btn",onClick:t[1]||(t[1]=function(){return a.createGenre&&a.createGenre.apply(a,arguments)})},"create")]),Object(o["createVNode"])("table",Wn,[Object(o["createVNode"])("thead",qn,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.columns,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])("th",{class:["th",e.columnsClasses[t]],key:n},[Object(o["createVNode"])("div",Xn,[Object(o["createVNode"])("div",Yn,Object(o["toDisplayString"])(t),1),Object(o["createVNode"])("div",{class:"td-action",onClick:function(n){return a.sortBy(t,e.ascending?0:1)}},[Object(o["createVNode"])(l,{class:"icon","icon-name":"sort"},{default:Hn((function(){return[e.ascending?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0})):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1}))]})),_:1})],8,["onClick"])])],2)})),128))]),Object(o["createVNode"])(o["TransitionGroup"],{name:"flip-list",tag:"tbody"},{default:Hn((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.genres,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{class:["row",{picante:t.ad,parent:null===t.parent}],key:t.id,onClick:function(e){return a.openRow(t)}},[Object(o["createVNode"])("td",{class:["td",e.columnsClasses.id]},Object(o["toDisplayString"])(t.id),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.title]},Object(o["toDisplayString"])(t.name),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.description]},Object(o["toDisplayString"])(t.description),3),Object(o["createVNode"])("td",{class:["td",e.columnsClasses.parent]},Object(o["toDisplayString"])(t.parent?t.parent.name:""),3)],10,["onClick"])})),128))]})),_:1})]),Object(o["createVNode"])(d,{ref:"editGenre"},{default:Hn((function(){return[Object(o["createVNode"])(u,{genre:e.activeGenre,onUpdateGenres:a.loadGenres},null,8,["genre","onUpdateGenres"])]})),_:1},512)])})),Qn=(n("4e82"),{class:"header"}),eo=Object(o["createVNode"])("h1",null,"Genre",-1),to={class:"label"},no=Object(o["createVNode"])("span",{class:"title"},"name",-1),oo={class:"label"},ro=Object(o["createVNode"])("span",{class:"title"},"description",-1),co={class:"label"},ao=Object(o["createVNode"])("span",{class:"title"},"parent genre",-1),io={class:"footer"},so=Object(o["createVNode"])("button",{class:"positive-btn"},"Сохранить",-1);function lo(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-close"),s=Object(o["resolveComponent"])("base-icon"),l=Object(o["resolveDirective"])("focus");return Object(o["openBlock"])(),Object(o["createBlock"])("form",{class:"edit-genre",onSubmit:t[7]||(t[7]=Object(o["withModifiers"])((function(){return a.sendGenre&&a.sendGenre.apply(a,arguments)}),["prevent"]))},[Object(o["createVNode"])("header",Qn,[eo,"admin"===e.$store.state.user.name?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:["btn-switch btn",{active:n.genre.ad}],onClick:t[1]||(t[1]=function(t){return e.localGenre.genre.ad=!n.genre.ad})},"ad ",2)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("button",{class:"close-btn",type:"reset",onClick:t[2]||(t[2]=function(){return a.closeModal&&a.closeModal.apply(a,arguments)})},[Object(o["createVNode"])(s,{class:"icon","icon-name":"close"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i)]})),_:1})])]),Object(o["createVNode"])("label",to,[no,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"value","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.localGenre.name=t})},null,512),[[o["vModelText"],e.localGenre.name,void 0,{trim:!0}],[l]])]),Object(o["createVNode"])("label",oo,[ro,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"value textarea","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.localGenre.description=t}),rows:"5"},null,512),[[o["vModelText"],e.localGenre.description,void 0,{trim:!0}]])]),Object(o["createVNode"])("label",co,[ao,Object(o["withDirectives"])(Object(o["createVNode"])("select",{class:"value","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.localGenre.parent_id=t})},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$store.state.genre.items,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:e.id,value:e.id},Object(o["toDisplayString"])(e.name),9,["value"])})),128))],512),[[o["vModelSelect"],e.localGenre.parent_id]])]),Object(o["createVNode"])("footer",io,[Object(o["createVNode"])("button",{class:"negative-btn",type:"reset",onClick:t[6]||(t[6]=function(){return a.deleteGenre&&a.deleteGenre.apply(a,arguments)})},"Удалить"),so])],32)}var uo={name:"EditGenre",components:{IconClose:pt},props:{genre:Object,dataProps:Object},data:function(){return{localGenre:{id:null,title:null,description:null,parent_id:null,ad:null}}},computed:{},watch:{},created:function(){this.prepareGenre(),0===this.$store.state.genre.items.length&&this.$store.dispatch("genre/loadGenres")},mounted:function(){},methods:{sendGenre:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localGenre.name){t.next=3;break}return e.$toast.error("name not specified"),t.abrupt("return");case 3:if(o="/genre/create",r={name:e.localGenre.name,description:e.localGenre.description,ad:e.localGenre.ad},e.localGenre.parent_id&&(r.parent_id=e.localGenre.parent_id),!e.localGenre.id){t.next=13;break}return o="/genre/update?id=".concat(e.genre.id),t.next=10,e.$patch(o,r);case 10:n=t.sent,t.next=16;break;case 13:return t.next=15,e.$post(o,r);case 15:n=t.sent;case 16:n&&(e.$emit("update-genres"),e.closeModal());case 17:case"end":return t.stop()}}),t)})))()},deleteGenre:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.genre.parent_id){t.next=2;break}return t.abrupt("return",!1);case 2:return n="/genre/delete?id=".concat(e.genre.id),t.next=5,e.$delete(n);case 5:o=t.sent,o&&(e.$store.dispatch("genre/loadGenre"),e.closeModal());case 7:case"end":return t.stop()}}),t)})))()},selectGenre:function(e){this.parent=e},clearGenre:function(){this.parent={id:null,name:null}},closeModal:function(){this.$parent.hide("editGenre",this)},prepareGenre:function(){this.localGenre=Object.assign({},this.genre)}}};n("5bbb");uo.render=lo;var bo=uo,po={name:"GenreTable",components:{EditGenre:bo,IconSortAsc:me,IconSortDesc:ve},props:{},data:function(){return{activeGenre:{id:null,name:null,description:null,parentGenre:{id:null,name:null},parent:{id:null,name:null}},modalOpen:!1,genres:[],ascending:0,orderBy:null,columns:["id","name","description","parent"],columnsClasses:{id:"cell-id",name:"cell-name",description:"cell-description",parent:"cell-parent"}}},methods:{loadGenres:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$loader.show(),t.next=3,e.$get("/genre?type=all");case 3:n=t.sent,e.$loader.hide(),n?e.genres=n:console.log({loadGenres:n});case 6:case"end":return t.stop()}}),t)})))()},openRow:function(e){this.activeGenre=e,this.$modal.show("editGenre",this,e)},createGenre:function(){this.activeGenre={id:null,name:null,description:null,parentGenre:{id:null,name:null},parent:{id:null,name:null}},this.$modal.show("editGenre",this)},sortBy:function(e,t){console.log({orderBy:e,asc:t}),this.genres.sort((function(n,o){return n[e]>o[e]?t?1:-1:n[e]<o[e]?t?-1:1:0})),this.ascending=this.ascending?0:1}},computed:{},watch:{},created:function(){document.title="Table Genres",0===this.genres.length&&this.loadGenres()},mounted:function(){},updated:function(){}};n("cd62");po.render=Kn,po.__scopeId="data-v-0cb23c0d";var fo=po,mo=Object(o["withScopeId"])("data-v-291e4e5a"),go=mo((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div")})),ho={name:"TheSettings",components:{},props:{},data:function(){return{}},methods:{},computed:{},watch:{},created:function(){document.title="Settings"},mounted:function(){},updated:function(){}};ho.render=go,ho.__scopeId="data-v-291e4e5a";var Oo=ho,jo=Object(o["withScopeId"])("data-v-1c006484");Object(o["pushScopeId"])("data-v-1c006484");var ko={class:"notes"},vo={class:"header"},yo={class:"notes-table"},Bo=Object(o["createVNode"])("caption",{class:"caption"},"Fast Notes Links",-1),wo=Object(o["createVNode"])("thead",{class:"thead"},[Object(o["createVNode"])("th",{class:"th"},"index"),Object(o["createVNode"])("th",{class:"th"},"url"),Object(o["createVNode"])("th",{class:"th"},"actions")],-1),No={class:"td"},Co={class:"td"},Vo={class:"td"};Object(o["popScopeId"])();var xo=jo((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",ko,[Object(o["createVNode"])("header",vo,[Object(o["createVNode"])("button",{class:"positive-btn",onClick:t[1]||(t[1]=function(){return a.sendNotes&&a.sendNotes.apply(a,arguments)})},"save")]),Object(o["createVNode"])("table",yo,[Bo,wo,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.notes,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{class:"note",key:"note-"+t},[Object(o["createVNode"])("td",No,Object(o["toDisplayString"])(t),1),Object(o["createVNode"])("td",Co,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"note__url","onUpdate:modelValue":function(t){return e.url=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.url]])]),Object(o["createVNode"])("td",Vo,[Object(o["createVNode"])("button",{class:"td__btn negative-btn",onClick:function(e){return a.deleteNote(t)}},"del",8,["onClick"])])])})),128))])]),Object(o["createVNode"])("button",{class:"notes__btn btn",onClick:t[2]||(t[2]=function(){return a.addNote&&a.addNote.apply(a,arguments)})},"add")])})),Lo={name:"TheNote",components:{},props:{},data:function(){return{notes:[]}},methods:{loadNotes:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/book/view?id=1");case 2:n=t.sent,n&&(o=e.notes).push.apply(o,Object(ce["a"])(JSON.parse(n.text)));case 4:case"end":return t.stop()}}),t)})))()},addNote:function(){this.notes.push({url:""})},deleteNote:function(e){this.notes.splice(e,1),this.sendNotes()},sendNotes:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={text:JSON.stringify(e.notes)},t.next=3,e.$patch("/book/update?id=1",n);case 3:o=t.sent,o&&console.log({result:o});case 5:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{},created:function(){document.title="Notes",this.loadNotes()},mounted:function(){},updated:function(){}};n("b856");Lo.render=xo,Lo.__scopeId="data-v-1c006484";var So=Lo,Mo=[{path:"/",name:"home",component:X},{path:"/login",name:"login",component:function(){return Promise.resolve().then(n.bind(null,"a55b"))},meta:{layout:"layout-auth"}},{path:"/list-book/:id",name:"list-book",component:Ne},{path:"/list-genre/:id",name:"list-genre",component:Me},{path:"/genre",name:"genre",component:fo},{path:"/book",name:"book",component:Ot},{path:"/book/:id",name:"book-view",component:He},{path:"/book/:id",name:"book-media",component:zn},{path:"/book/create",name:"book-create",component:In},{path:"/book/update/:id",name:"book-edit",component:In},{path:"/settings",name:"settings",component:Oo},{path:"/note",name:"note",component:So},{path:"/test",name:"test",component:function(){return n.e("chunk-2d0d6b32").then(n.bind(null,"7454"))},meta:{layout:"layout-test"}}],_o=Object(z["a"])({history:Object(z["b"])("/library/"),routes:Mo});_o.beforeEach((function(e,t,n){var o,r=null!==(o=sessionStorage.getItem("lib-token"))&&void 0!==o?o:"";"login"===e.name||r?n():n({name:"login"})}));var Io=_o,$o=function(){return{layout:"LayoutDefault",isMobile:!1,isDesktop:!0,activeGenre:{},activeBook:{}}},Po={layout:function(e){return e.layout},isMobile:function(e){return e.isMobile},isDesktop:function(e){return e.isDesktop},activeGenre:function(e){return e.activeGenre},activeBook:function(e){return e.activeBook}},To={},Ro={setLayout:function(e,t){e.layout=t},setIsMobile:function(e){e.isMobile=!0,e.isDesktop=!1},setIsDesktop:function(e){e.isMobile=!1,e.isDesktop=!0},setActiveGenre:function(e,t){e.activeGenre=t},setActiveBook:function(e,t){e.activeBook=t}},Go={namespaced:!0,state:$o,getters:Po,actions:To,mutations:Ro};function Do(e){return Fo.apply(this,arguments)}function Fo(){return Fo=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("lib-token"),o="".concat("https://google.com").concat(t),n||console.log({token:n}),e.next=5,fetch(o,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(n)}});case 5:if(r=e.sent,!r.ok){e.next=12;break}return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",new Promise((function(e,t){t(r)})));case 13:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}var Ao=function(){return{items:[]}},Eo={},Uo={loadGenres:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,Do("/genre?type=parent");case 4:o=t.sent,n("setGenre",o),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log({result:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},zo={setGenre:function(e,t){e.items=Object(ce["a"])(t)}},Ho={namespaced:!0,state:Ao,getters:Eo,actions:Uo,mutations:zo},Zo=function(){return{items:[]}},Jo={},Wo={},qo={},Xo={namespaced:!0,state:Zo,getters:Jo,actions:Wo,mutations:qo},Yo=function(){return{name:"",token:""}},Ko={name:function(e){return e.name},token:function(e){return e.token}},Qo={setUser:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=e.commit,o("setUser",t);case 2:case"end":return n.stop()}}),n)})))()}},er={setUser:function(e,t){e.name=t.name,e.token=t.token}},tr={namespaced:!0,state:Yo,getters:Ko,actions:Qo,mutations:er},nr=Object(gt["a"])({modules:{main:Go,genre:Ho,book:Xo,user:tr}}),or=(n("73ec"),{install:function(e,t){e.config.globalProperties.goPage=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("lib-token"),n||console.log({token:n}),e.next=4,fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(n)}});case 4:if(o=e.sent,!o.ok){e.next=11;break}return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",new Promise((function(e,t){t(o)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.config.globalProperties.$get=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var o,r,c,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object(et["a"])({},t),r=o.API_URL,c=sessionStorage.getItem("lib-token"),a="".concat(r).concat(n),c||console.log({token:c}),e.next=6,fetch(a,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(c)}});case 6:if(i=e.sent,!i.ok){e.next=13;break}return e.next=10,i.json();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",new Promise((function(e,t){t(i)})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.config.globalProperties.$post=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var o,r,c,a,i,s,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>1&&void 0!==l[1]?l[1]:null,r=Object(et["a"])({},t),c=r.API_URL,a=sessionStorage.getItem("lib-token"),i="".concat(c).concat(n),a||console.log({token:a}),e.next=7,fetch(i,{method:"POST",body:o?JSON.stringify(o):o,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)}});case 7:if(s=e.sent,!s.ok){e.next=14;break}return e.next=11,s.json();case 11:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",new Promise((function(e,t){t(s)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.config.globalProperties.$patch=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var o,r,c,a,i,s,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>1&&void 0!==l[1]?l[1]:null,r=Object(et["a"])({},t),c=r.API_URL,a=sessionStorage.getItem("lib-token"),i="".concat(c).concat(n),a||console.log({token:a}),e.next=7,fetch(i,{method:"PATCH",body:o?JSON.stringify(o):o,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)}});case 7:if(s=e.sent,!s.ok){e.next=14;break}return e.next=11,s.json();case 11:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",new Promise((function(e,t){t(s)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.config.globalProperties.$delete=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var o,r,c,a,i,s,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>1&&void 0!==l[1]?l[1]:null,r=Object(et["a"])({},t),c=r.API_URL,a=sessionStorage.getItem("lib-token"),i="".concat(c).concat(n),a||console.log({token:a}),e.next=7,fetch(i,{method:"PATCH",body:o?JSON.stringify(o):o,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)}});case 7:if(s=e.sent,!s.ok){e.next=14;break}return e.next=11,s.json();case 11:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",new Promise((function(e,t){t(s)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),rr={install:function(e){e.component("modal",n("837a").default),e.config.globalProperties.$modal={show:function(e,t,n){t.$refs[e].show(n)},hide:function(e,t){console.log({compContext:t}),t.$refs[e].hide()}}}},cr={install:function(e){e.directive("scroll",{mounted:function(e,t){var n=function n(o){console.log({evt:o}),t.value(o,e)&&e.removeEventListener("scroll",n)};e.addEventListener("scroll",n,{passive:!0})}})}},ar={install:function(e){e.component("observer",n("fd0c").default)}},ir=n("f6ef"),sr={install:function(e){e.component("LoaderModule",n("f6ef").default),e.config.globalProperties.$loader={show:function(){r.showLoader()},hide:function(){r.hideLoader()}};var t=document.createElement("div");t.id="loaderNode",t.ref="loaderRef",document.body.appendChild(t);var r=Object(o["createApp"])(ir["default"]).mount("#loaderNode")}},lr=n("9577"),ur={install:function(e,t){e.component("ToasterModule",n("9577").default),e.config.globalProperties.$toast={success:function(e,n){var o=Object(et["a"])(Object(et["a"])({type:"success"},t),n);c.printMessage(e,o)},info:function(e,n){var o=Object(et["a"])(Object(et["a"])({type:"info"},t),n);c.printMessage(e,o)},warning:function(e,n){var o=Object(et["a"])(Object(et["a"])({type:"warning"},t),n);c.printMessage(e,o)},error:function(e,n){var o=Object(et["a"])(Object(et["a"])({type:"error"},t),n);c.printMessage(e,o)}};var r=document.createElement("div");r.id="toasterNode",r.ref="toasterRef",document.body.appendChild(r);var c=Object(o["createApp"])(lr["default"]).mount("#toasterNode")}},dr={install:function(e){e.directive("focus",{mounted:function(e){e.focus()}})}},br=Object(o["createApp"])(E),pr=n("ef13");pr.keys().forEach((function(e){var t=pr(e),n=e.split("/").pop().replace(/\.\w+$/,"");br.component(n.split(/(?=[A-Z])/).join("-").toLowerCase(),t.default||t)})),br.use(nr).use(Io).component("layout-default",P).component("layout-auth",b).use(rr).use(ar).use(cr).use(dr).use(or,{API_URL:"https://google.com",API_TOKEN:sessionStorage.getItem("lib-token")}).use(sr,sr).use(ur,{time:1e3,position:"top-right"}),br.mount("#app")},"5bbb":function(e,t,n){"use strict";n("9158")},"5e02":function(e,t,n){"use strict";n("6b56")},"6b56":function(e,t,n){},"73ec":function(e,t,n){},7461:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["withScopeId"])("data-v-4bd27ae6"),c=r((function(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.width,height:n.height,viewBox:n.viewBox},[Object(o["createVNode"])("g",null,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])],8,["width","height","viewBox"])})),a=(n("a9e3"),{props:{iconName:{type:String,default:"box"},width:{type:[Number,String],default:18},height:{type:[Number,String],default:18},iconColor:{type:String,default:"#fff"},viewBox:{type:String,default:"0 0 18 18"}}});n("4650");a.render=c,a.__scopeId="data-v-4bd27ae6";t["default"]=a},"7cb7":function(e,t,n){},"7d1c":function(e,t,n){"use strict";n("f658")},"837a":function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["modal-wrap",{active:e.showDialog}],onClick:t[2]||(t[2]=function(){return a.hide&&a.hide.apply(a,arguments)})},[e.showDialog?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:"modal",style:a.styleObject,onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(){}),["stop"]))},[Object(o["renderSlot"])(e.$slots,"default",{dataProps:e.options})],4)):Object(o["createCommentVNode"])("",!0)],2)}n("a9e3");var c={name:"modal",components:{},props:{name:{type:String,default:"modal"},width:{type:Number,default:600}},data:function(){return{showDialog:!1,options:{}}},computed:{styleObject:function(){return{width:"".concat(this.width?this.width:600,"px")}}},watch:{},created:function(){},mounted:function(){},methods:{show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.showDialog=!0},hide:function(){this.showDialog=!1}}};n("20f7");c.render=r;t["default"]=c},"8e8f":function(e,t,n){},9155:function(e,t,n){},9158:function(e,t,n){},9577:function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createBlock"])(o["TransitionGroup"],{name:"toast",tag:"div",class:"toast"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.messageArray,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{class:["message",a.classObject],key:t+Date.now(),innerHTML:e},null,10,["innerHTML"])})),128))]})),_:1})}var c=n("53ca"),a=n("b85c"),i=n("5530"),s=(n("c740"),n("a434"),{name:"ToasterModule",data:function(){return{type:"",messageArray:[]}},computed:{classObject:function(){return{info:"info"===this.type,error:"error"===this.type,success:"success"===this.type,warning:"warning"===this.type}}},created:function(){},watch:{},methods:{printMessage:function(e,t){var n=this,o=Object(i["a"])({},t),r=o.time,s=o.type;if(this.type=s,Array.isArray(e)){console.log({message:e});var l,u=Object(a["a"])(e);try{for(u.s();!(l=u.n()).done;){var d=l.value;this.messageArray.push(d)}}catch(b){u.e(b)}finally{u.f()}setTimeout((function(){var t,o=Object(a["a"])(e);try{var r=function(){var e=t.value,o=n.messageArray.findIndex((function(t){return t===e}));n.messageArray.splice(o,1)};for(o.s();!(t=o.n()).done;)r()}catch(b){o.e(b)}finally{o.f()}}),r)}else"string"===typeof e?(this.messageArray.push(e),setTimeout((function(){var t=n.messageArray.findIndex((function(t){return t===e}));n.messageArray.splice(t,1)}),r)):null===e?this.messageArray.length=0:"object"===Object(c["a"])(e)&&e.message&&(this.messageArray.push(e.message),setTimeout((function(){var t=n.messageArray.findIndex((function(t){return t===e.message}));n.messageArray.splice(t,1)}),r))}}});n("f852");s.render=r;t["default"]=s},"997a":function(e,t,n){},"9db8":function(e,t,n){"use strict";n("d476")},a36e:function(e,t,n){"use strict";n("3158")},a55b:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["withScopeId"])("data-v-476b45f9");Object(o["pushScopeId"])("data-v-476b45f9");var c={class:"login-box"},a=Object(o["createVNode"])("h2",{class:"header-title"},"Login",-1),i={class:"user-box"},s=Object(o["createVNode"])("label",{class:"label"},"Username",-1),l={class:"user-box"},u=Object(o["createVNode"])("label",{class:"label"},"Password",-1),d=Object(o["createVNode"])("button",{class:"login-btn"},[Object(o["createVNode"])("span"),Object(o["createVNode"])("span"),Object(o["createVNode"])("span"),Object(o["createVNode"])("span"),Object(o["createTextVNode"])(" Submit ")],-1);Object(o["popScopeId"])();var b=r((function(e,t,n,r,b,p){return Object(o["openBlock"])(),Object(o["createBlock"])("div",c,[a,Object(o["createVNode"])("form",{class:"login-form",onSubmit:t[3]||(t[3]=Object(o["withModifiers"])((function(){return p.login&&p.login.apply(p,arguments)}),["prevent"]))},[Object(o["createVNode"])("div",i,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.username=t}),autocomplete:"off"},null,512),[[o["vModelText"],e.username,void 0,{trim:!0}]]),s]),Object(o["createVNode"])("div",l,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),autocomplete:"off"},null,512),[[o["vModelText"],e.password,void 0,{trim:!0}]]),u]),d],32)])})),p=n("1da1"),f=(n("96cf"),n("d3b7"),{name:"login",components:{},props:{},data:function(){return{username:"",password:"",signIn:!1}},methods:{login:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={username:e.username,password:e.password},t.next=3,fetch("".concat("https://google.com","/auth/login"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}});case 3:if(o=t.sent,!o.ok){t.next=19;break}return t.next=7,o.json();case 7:if(r=t.sent,!r.token){t.next=16;break}return sessionStorage.setItem("lib-token",r.token),t.next=12,e.$store.dispatch("user/setUser",r);case 12:return t.next=14,e.$router.push("/");case 14:t.next=17;break;case 16:e.$toast.error("Empty Token");case 17:t.next=23;break;case 19:return t.next=21,o.json();case 21:c=t.sent,e.$toast.error(c.message);case 23:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{},created:function(){document.title="Login"},mounted:function(){},updated:function(){}});n("026e");f.render=b,f.__scopeId="data-v-476b45f9";t["default"]=f},b856:function(e,t,n){"use strict";n("4e79")},bacf:function(e,t,n){"use strict";n("7cb7")},c009:function(e,t,n){"use strict";n("997a")},c0b0:function(e,t,n){},c6fa:function(e,t,n){"use strict";n("e318")},c9af:function(e,t,n){"use strict";n("cfab")},cd62:function(e,t,n){"use strict";n("f673")},cf1c:function(e,t,n){"use strict";n("ffa2")},cfab:function(e,t,n){},cfb0:function(e,t,n){"use strict";n("f0a9")},d115:function(e,t,n){},d476:function(e,t,n){},e099:function(e,t,n){"use strict";n("2e28")},e318:function(e,t,n){},ee16:function(e,t,n){"use strict";n("d115")},ef13:function(e,t,n){var o={"./BaseIcon.vue":"7461"};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=c,e.exports=r,r.id="ef13"},f0a9:function(e,t,n){},f658:function(e,t,n){},f673:function(e,t,n){},f6ef:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={key:0,class:"loading"},c={class:"loading__ring"},a=Object(o["createVNode"])("path",{d:"M85.5,42c-0.2-0.8-0.5-1.7-0.8-2.5c-0.3-0.9-0.7-1.6-1-2.3c-0.3-0.7-0.6-1.3-1-1.9c0.3,0.5,0.5,1.1,0.8,1.7  c0.2,0.7,0.6,1.5,0.8,2.3s0.5,1.7,0.8,2.5c0.8,3.5,1.3,7.5,0.8,12c-0.4,4.3-1.8,9-4.2,13.4c-2.4,4.2-5.9,8.2-10.5,11.2  c-1.1,0.7-2.2,1.5-3.4,2c-0.5,0.2-1.2,0.6-1.8,0.8s-1.3,0.5-1.9,0.8c-2.6,1-5.3,1.7-8.1,1.8l-1.1,0.1L53.8,84c-0.7,0-1.4,0-2.1,0  c-1.4-0.1-2.9-0.1-4.2-0.5c-1.4-0.1-2.8-0.6-4.1-0.8c-1.4-0.5-2.7-0.9-3.9-1.5c-1.2-0.6-2.4-1.2-3.7-1.9c-0.6-0.3-1.2-0.7-1.7-1.1  l-0.8-0.6c-0.3-0.1-0.6-0.4-0.8-0.6l-0.8-0.6L31.3,76l-0.2-0.2L31,75.7l-0.1-0.1l0,0l-1.5-1.5c-1.2-1-1.9-2.1-2.7-3.1  c-0.4-0.4-0.7-1.1-1.1-1.7l-1.1-1.7c-0.3-0.6-0.6-1.2-0.9-1.8c-0.2-0.5-0.6-1.2-0.8-1.8c-0.4-1.2-1-2.4-1.2-3.7  c-0.2-0.6-0.4-1.2-0.5-1.9c-0.1-0.6-0.2-1.2-0.3-1.8c-0.3-1.2-0.3-2.4-0.4-3.7c-0.1-1.2,0-2.5,0.1-3.7c0.2-1.2,0.3-2.4,0.6-3.5  c0.1-0.6,0.3-1.1,0.4-1.7l0.1-0.8l0.3-0.8c1.5-4.3,3.8-8,6.5-11c0.8-0.8,1.4-1.5,2.1-2.1c0.9-0.9,1.4-1.3,2.2-1.8  c1.4-1.2,2.9-2,4.3-2.8c2.8-1.5,5.5-2.3,7.7-2.8s4-0.7,5.2-0.6c0.6-0.1,1.1,0,1.4,0s0.4,0,0.4,0h0.1c2.7,0.1,5-2.2,5-5  c0.1-2.7-2.2-5-5-5c-0.2,0-0.2,0-0.3,0c0,0-0.2,0.1-0.6,0.1c-0.4,0-1,0-1.8,0.1c-1.6,0.1-4,0.4-6.9,1.2c-2.9,0.8-6.4,2-9.9,4.1  c-1.8,1-3.6,2.3-5.4,3.8C26,21.4,25,22.2,24.4,23c-0.2,0.2-0.4,0.4-0.6,0.6c-0.2,0.2-0.5,0.4-0.6,0.7c-0.5,0.4-0.8,0.9-1.3,1.4  c-3.2,3.9-5.9,8.8-7.5,14.3l-0.3,1l-0.2,1.1c-0.1,0.7-0.3,1.4-0.4,2.1c-0.3,1.5-0.4,2.9-0.5,4.5c0,1.5-0.1,3,0.1,4.5  c0.2,1.5,0.2,3,0.6,4.6c0.1,0.7,0.3,1.5,0.4,2.3c0.2,0.8,0.5,1.5,0.7,2.3c0.4,1.6,1.1,3,1.7,4.4c0.3,0.7,0.7,1.4,1.1,2.1  c0.4,0.8,0.8,1.4,1.2,2.1c0.5,0.7,0.9,1.4,1.4,2s0.9,1.3,1.5,1.9c1.1,1.3,2.2,2.7,3.3,3.5l1.7,1.6c0,0,0.1,0.1,0.1,0.1c0,0,0,0,0,0  c0,0,0,0,0,0l0.1,0.1l0.1,0.1h0.2l0.5,0.4l1,0.7c0.4,0.2,0.6,0.5,1,0.7l1.1,0.6c0.8,0.4,1.4,0.9,2.1,1.2c1.4,0.7,2.9,1.5,4.4,2  c1.5,0.7,3.1,1,4.6,1.5c1.5,0.3,3.1,0.7,4.7,0.8c1.6,0.2,3.1,0.2,4.7,0.2c0.8,0,1.6-0.1,2.4-0.1l1.2-0.1l1.1-0.1  c3.1-0.4,6.1-1.3,8.9-2.4c0.8-0.3,1.4-0.6,2.1-0.9s1.3-0.7,2-1.1c1.3-0.7,2.6-1.7,3.7-2.5c0.5-0.4,1-0.9,1.6-1.3l0.8-0.6l0.2-0.2  c0,0,0.1-0.1,0.1-0.1c0.1-0.1,0,0,0,0v0.1l0.1-0.1l0.4-0.4c0.5-0.5,1-1,1.5-1.5c0.3-0.3,0.5-0.5,0.8-0.8l0.7-0.8  c0.9-1.1,1.8-2.2,2.5-3.3c0.4-0.6,0.7-1.1,1.1-1.7c0.3-0.7,0.6-1.2,0.9-1.8c2.4-4.9,3.5-9.8,3.7-14.4C87.3,49.7,86.6,45.5,85.5,42z"},null,-1),i={class:"loading__ring"},s=Object(o["createVNode"])("path",{d:"M85.5,42c-0.2-0.8-0.5-1.7-0.8-2.5c-0.3-0.9-0.7-1.6-1-2.3c-0.3-0.7-0.6-1.3-1-1.9c0.3,0.5,0.5,1.1,0.8,1.7  c0.2,0.7,0.6,1.5,0.8,2.3s0.5,1.7,0.8,2.5c0.8,3.5,1.3,7.5,0.8,12c-0.4,4.3-1.8,9-4.2,13.4c-2.4,4.2-5.9,8.2-10.5,11.2  c-1.1,0.7-2.2,1.5-3.4,2c-0.5,0.2-1.2,0.6-1.8,0.8s-1.3,0.5-1.9,0.8c-2.6,1-5.3,1.7-8.1,1.8l-1.1,0.1L53.8,84c-0.7,0-1.4,0-2.1,0  c-1.4-0.1-2.9-0.1-4.2-0.5c-1.4-0.1-2.8-0.6-4.1-0.8c-1.4-0.5-2.7-0.9-3.9-1.5c-1.2-0.6-2.4-1.2-3.7-1.9c-0.6-0.3-1.2-0.7-1.7-1.1  l-0.8-0.6c-0.3-0.1-0.6-0.4-0.8-0.6l-0.8-0.6L31.3,76l-0.2-0.2L31,75.7l-0.1-0.1l0,0l-1.5-1.5c-1.2-1-1.9-2.1-2.7-3.1  c-0.4-0.4-0.7-1.1-1.1-1.7l-1.1-1.7c-0.3-0.6-0.6-1.2-0.9-1.8c-0.2-0.5-0.6-1.2-0.8-1.8c-0.4-1.2-1-2.4-1.2-3.7  c-0.2-0.6-0.4-1.2-0.5-1.9c-0.1-0.6-0.2-1.2-0.3-1.8c-0.3-1.2-0.3-2.4-0.4-3.7c-0.1-1.2,0-2.5,0.1-3.7c0.2-1.2,0.3-2.4,0.6-3.5  c0.1-0.6,0.3-1.1,0.4-1.7l0.1-0.8l0.3-0.8c1.5-4.3,3.8-8,6.5-11c0.8-0.8,1.4-1.5,2.1-2.1c0.9-0.9,1.4-1.3,2.2-1.8  c1.4-1.2,2.9-2,4.3-2.8c2.8-1.5,5.5-2.3,7.7-2.8s4-0.7,5.2-0.6c0.6-0.1,1.1,0,1.4,0s0.4,0,0.4,0h0.1c2.7,0.1,5-2.2,5-5  c0.1-2.7-2.2-5-5-5c-0.2,0-0.2,0-0.3,0c0,0-0.2,0.1-0.6,0.1c-0.4,0-1,0-1.8,0.1c-1.6,0.1-4,0.4-6.9,1.2c-2.9,0.8-6.4,2-9.9,4.1  c-1.8,1-3.6,2.3-5.4,3.8C26,21.4,25,22.2,24.4,23c-0.2,0.2-0.4,0.4-0.6,0.6c-0.2,0.2-0.5,0.4-0.6,0.7c-0.5,0.4-0.8,0.9-1.3,1.4  c-3.2,3.9-5.9,8.8-7.5,14.3l-0.3,1l-0.2,1.1c-0.1,0.7-0.3,1.4-0.4,2.1c-0.3,1.5-0.4,2.9-0.5,4.5c0,1.5-0.1,3,0.1,4.5  c0.2,1.5,0.2,3,0.6,4.6c0.1,0.7,0.3,1.5,0.4,2.3c0.2,0.8,0.5,1.5,0.7,2.3c0.4,1.6,1.1,3,1.7,4.4c0.3,0.7,0.7,1.4,1.1,2.1  c0.4,0.8,0.8,1.4,1.2,2.1c0.5,0.7,0.9,1.4,1.4,2s0.9,1.3,1.5,1.9c1.1,1.3,2.2,2.7,3.3,3.5l1.7,1.6c0,0,0.1,0.1,0.1,0.1c0,0,0,0,0,0  c0,0,0,0,0,0l0.1,0.1l0.1,0.1h0.2l0.5,0.4l1,0.7c0.4,0.2,0.6,0.5,1,0.7l1.1,0.6c0.8,0.4,1.4,0.9,2.1,1.2c1.4,0.7,2.9,1.5,4.4,2  c1.5,0.7,3.1,1,4.6,1.5c1.5,0.3,3.1,0.7,4.7,0.8c1.6,0.2,3.1,0.2,4.7,0.2c0.8,0,1.6-0.1,2.4-0.1l1.2-0.1l1.1-0.1  c3.1-0.4,6.1-1.3,8.9-2.4c0.8-0.3,1.4-0.6,2.1-0.9s1.3-0.7,2-1.1c1.3-0.7,2.6-1.7,3.7-2.5c0.5-0.4,1-0.9,1.6-1.3l0.8-0.6l0.2-0.2  c0,0,0.1-0.1,0.1-0.1c0.1-0.1,0,0,0,0v0.1l0.1-0.1l0.4-0.4c0.5-0.5,1-1,1.5-1.5c0.3-0.3,0.5-0.5,0.8-0.8l0.7-0.8  c0.9-1.1,1.8-2.2,2.5-3.3c0.4-0.6,0.7-1.1,1.1-1.7c0.3-0.7,0.6-1.2,0.9-1.8c2.4-4.9,3.5-9.8,3.7-14.4C87.3,49.7,86.6,45.5,85.5,42z"},null,-1);function l(e,t,n,l,u,d){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["loader",{"over-top":e.loading}]},[e.loading?(Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])("div",c,[(Object(o["openBlock"])(),Object(o["createBlock"])("svg",{style:d.styleObject,viewBox:"0 0 100 100"},[a],4))]),Object(o["createVNode"])("div",i,[(Object(o["openBlock"])(),Object(o["createBlock"])("svg",{style:d.styleObject,viewBox:"0 0 100 100"},[s],4))])])):Object(o["createCommentVNode"])("",!0)],2)}n("a9e3");var u={name:"LoaderModule",props:{color:{type:String,default:"hsla(150, 100%, 50%, 1)"},size:{type:Number,default:100}},data:function(){return{loading:!1}},computed:{styleObject:function(){return{fill:this.color}}},methods:{showLoader:function(){this.loading=!0},hideLoader:function(){this.loading=!1}},created:function(){}};n("bacf");u.render=l;t["default"]=u},f852:function(e,t,n){"use strict";n("8e8f")},fd0c:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={class:"observer"};function c(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",r)}var a=n("3835"),i={props:["options"],data:function(){return{observer:null}},mounted:function(){var e=this,t=this.options||{};this.observer=new IntersectionObserver((function(t){var n=Object(a["a"])(t,1),o=n[0];o&&o.isIntersecting&&e.$emit("intersect")}),t),this.observer.observe(this.$el)},unmounted:function(){this.observer.disconnect()}};i.render=c;t["default"]=i},feba:function(e,t,n){"use strict";n("9155")},ffa2:function(e,t,n){}});
//# sourceMappingURL=app.938f6b33.js.map