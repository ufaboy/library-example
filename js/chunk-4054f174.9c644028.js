(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4054f174"],{"07b0":function(e,t,o){"use strict";o("7771")},"0aa3":function(e,t,o){},"5b3d":function(e,t,o){e.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="fb15")}({"0a04":function(e,t,o){var r=o("4bad");t=r(!1),t.push([e.i,".vue-star-rating-star[data-v-f675a548]{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.vue-star-rating-pointer[data-v-f675a548]{cursor:pointer}.vue-star-rating[data-v-f675a548]{display:flex;align-items:center}.vue-star-rating-inline[data-v-f675a548]{display:inline-flex}.vue-star-rating-rating-text[data-v-f675a548]{margin-left:7px}.vue-star-rating-rtl[data-v-f675a548]{direction:rtl}.vue-star-rating-rtl .vue-star-rating-rating-text[data-v-f675a548]{margin-right:10px;direction:rtl}.sr-only[data-v-f675a548]{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}",""]),e.exports=t},"0fde":function(e,t,o){var r=o("4bad");t=r(!1),t.push([e.i,".vue-star-rating-star[data-v-11edf2d6]{overflow:visible!important}.vue-star-rating-star-rotate[data-v-11edf2d6]{transition:all .25s}.vue-star-rating-star-rotate[data-v-11edf2d6]:hover{transition:transform .25s;transform:rotate(-15deg) scale(1.3)}",""]),e.exports=t},"499e":function(e,t,o){"use strict";function r(e,t){for(var o=[],r={},a=0;a<t.length;a++){var n=t[a],i=n[0],s=n[1],c=n[2],l=n[3],d={id:e+":"+a,css:s,media:c,sourceMap:l};r[i]?r[i].parts.push(d):o.push(r[i]={id:i,parts:[d]})}return o}o.r(t),o.d(t,"default",(function(){return b}));var a="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},i=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,d=function(){},u=null,p="data-vue-ssr-id",h="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function b(e,t,o,a){l=o,u=a||{};var i=r(e,t);return g(i),function(t){for(var o=[],a=0;a<i.length;a++){var s=i[a],c=n[s.id];c.refs--,o.push(c)}t?(i=r(e,t),g(i)):i=[];for(a=0;a<o.length;a++){c=o[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete n[c.id]}}}}function g(e){for(var t=0;t<e.length;t++){var o=e[t],r=n[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(m(o.parts[a]));r.parts.length>o.parts.length&&(r.parts.length=o.parts.length)}else{var i=[];for(a=0;a<o.parts.length;a++)i.push(m(o.parts[a]));n[o.id]={id:o.id,refs:1,parts:i}}}}function f(){var e=document.createElement("style");return e.type="text/css",i.appendChild(e),e}function m(e){var t,o,r=document.querySelector("style["+p+'~="'+e.id+'"]');if(r){if(l)return d;r.parentNode.removeChild(r)}if(h){var a=c++;r=s||(s=f()),t=O.bind(null,r,a,!1),o=O.bind(null,r,a,!0)}else r=f(),t=j.bind(null,r),o=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else o()}}var v=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}();function O(e,t,o,r){var a=o?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,a);else{var n=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function j(e,t){var o=t.css,r=t.media,a=t.sourceMap;if(r&&e.setAttribute("media",r),u.ssrId&&e.setAttribute(p,t.id),a&&(o+="\n/*# sourceURL="+a.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=o;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}},"4bad":function(e,t,o){"use strict";function r(e,t){var o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"===typeof btoa){var n=a(r),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[o].concat(i).concat([n]).join("\n")}return[o].join("\n")}function a(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(o," */")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=r(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,r){"string"===typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(a[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&a[c[0]]||(o&&(c[2]?c[2]="".concat(o," and ").concat(c[2]):c[2]=o),t.push(c))}},t}},"5bef":function(e,t,o){var r=o("0fde");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=o("499e").default;a("f426be92",r,!0,{sourceMap:!1,shadowMode:!1})},8875:function(e,t,o){var r,a,n;(function(o,i){a=[],r=i,n="function"===typeof r?r.apply(t,a):r,void 0===n||(e.exports=n)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var o,r,a,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,i=/@([^@]*):(\d+):(\d+)\s*$/gi,s=n.exec(h.stack)||i.exec(h.stack),c=s&&s[1]||!1,l=s&&s[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");c===d&&(o=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=o.replace(r,"$1").trim());for(var p=0;p<u.length;p++){if("interactive"===u[p].readyState)return u[p];if(u[p].src===c)return u[p];if(c===d&&u[p].innerHTML&&u[p].innerHTML.trim()===a)return u[p]}return null}}return e}))},"8bbf":function(e,t){e.exports=o("7a23")},"9ff5":function(e,t,o){"use strict";o("eed3")},d1b1:function(e,t,o){"use strict";o("5bef")},d4aa:function(e,t){class o{constructor(e){this.color=e}parseAlphaColor(){return/^rgba\((\d{1,3}%?\s*,\s*){3}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseRgba():/^hsla\(\d+\s*,\s*([\d.]+%\s*,\s*){2}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseHsla():/^#([0-9A-Fa-f]{4}|[0-9A-Fa-f]{8})$/.test(this.color)?this.parseAlphaHex():/^transparent$/.test(this.color)?this.parseTransparent():{color:this.color,opacity:"1"}}parseRgba(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseHsla(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseAlphaHex(){return{color:5===this.color.length?this.color.substring(0,4):this.color.substring(0,7),opacity:5===this.color.length?(parseInt(this.color.substring(4,5)+this.color.substring(4,5),16)/255).toFixed(2):(parseInt(this.color.substring(7,9),16)/255).toFixed(2)}}parseTransparent(){return{color:"#fff",opacity:0}}}e.exports=o},eed3:function(e,t,o){var r=o("0a04");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=o("499e").default;a("87bea518",r,!0,{sourceMap:!1,shadowMode:!1})},fb15:function(e,t,o){"use strict";if(o.r(t),"undefined"!==typeof window){var r=window.document.currentScript,a=o("8875");r=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a});var n=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(o.p=n[1])}var i=o("8bbf");const s=Object(i["withScopeId"])("data-v-f675a548");Object(i["pushScopeId"])("data-v-f675a548");const c={class:"sr-only"};Object(i["popScopeId"])();const l=s((function(e,t,o,r,a,n){const s=Object(i["resolveComponent"])("star");return Object(i["openBlock"])(),Object(i["createBlock"])("div",{class:["vue-star-rating",{"vue-star-rating-rtl":o.rtl},{"vue-star-rating-inline":o.inline}]},[Object(i["createVNode"])("div",c,[Object(i["renderSlot"])(e.$slots,"screen-reader",{rating:a.selectedRating,stars:o.maxRating},()=>[Object(i["createVNode"])("span",null,"Rated "+Object(i["toDisplayString"])(a.selectedRating)+" stars out of "+Object(i["toDisplayString"])(o.maxRating),1)])]),Object(i["createVNode"])("div",{class:"vue-star-rating",onMouseleave:t[2]||(t[2]=(...e)=>n.resetRating(...e))},[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(o.maxRating,e=>(Object(i["openBlock"])(),Object(i["createBlock"])("span",{key:e,class:[{"vue-star-rating-pointer":!o.readOnly},"vue-star-rating-star"],style:{"margin-right":n.margin+"px"}},[Object(i["createVNode"])(s,{fill:a.fillLevel[e-1],size:o.starSize,points:o.starPoints,"star-id":e,step:a.step,"active-color":n.currentActiveColor,"inactive-color":o.inactiveColor,"border-color":o.borderColor,"active-border-color":n.currentActiveBorderColor,"border-width":o.borderWidth,"rounded-corners":o.roundedCorners,rtl:o.rtl,glow:o.glow,"glow-color":o.glowColor,animate:o.animate,"onStar-selected":t[1]||(t[1]=e=>n.setRating(e,!0)),"onStar-mouse-move":n.setRating},null,8,["fill","size","points","star-id","step","active-color","inactive-color","border-color","active-border-color","border-width","rounded-corners","rtl","glow","glow-color","animate","onStar-mouse-move"])],6))),128)),o.showRating?(Object(i["openBlock"])(),Object(i["createBlock"])("span",{key:0,class:["vue-star-rating-rating-text",o.textClass]},Object(i["toDisplayString"])(n.formattedRating),3)):Object(i["createCommentVNode"])("",!0)],32)],2)})),d=Object(i["withScopeId"])("data-v-11edf2d6");Object(i["pushScopeId"])("data-v-11edf2d6");const u=Object(i["createVNode"])("feMerge",null,[Object(i["createVNode"])("feMergeNode",{in:"coloredBlur"}),Object(i["createVNode"])("feMergeNode",{in:"SourceGraphic"})],-1);Object(i["popScopeId"])();const p=d((function(e,t,o,r,a,n){return Object(i["openBlock"])(),Object(i["createBlock"])("svg",{class:["vue-star-rating-star",{"vue-star-rating-star-rotate":n.shouldAnimate}],height:n.starSize,width:n.starSize,viewBox:n.viewBox,onMousemove:t[1]||(t[1]=(...e)=>n.mouseMoving(...e)),onClick:t[2]||(t[2]=(...e)=>n.selected(...e)),onTouchstart:t[3]||(t[3]=(...e)=>n.touchStart(...e)),onTouchend:t[4]||(t[4]=(...e)=>n.touchEnd(...e))},[Object(i["createVNode"])("linearGradient",{id:a.grad,x1:"0",x2:"100%",y1:"0",y2:"0"},[Object(i["createVNode"])("stop",{offset:n.starFill,"stop-color":o.rtl?n.getColor(o.inactiveColor):n.getColor(o.activeColor),"stop-opacity":o.rtl?n.getOpacity(o.inactiveColor):n.getOpacity(o.activeColor)},null,8,["offset","stop-color","stop-opacity"]),Object(i["createVNode"])("stop",{offset:n.starFill,"stop-color":o.rtl?n.getColor(o.activeColor):n.getColor(o.inactiveColor),"stop-opacity":o.rtl?n.getOpacity(o.activeColor):n.getOpacity(o.inactiveColor)},null,8,["offset","stop-color","stop-opacity"])],8,["id"]),Object(i["createVNode"])("filter",{id:a.glowId,height:"130%",width:"130%",filterUnits:"userSpaceOnUse"},[Object(i["createVNode"])("feGaussianBlur",{stdDeviation:o.glow,result:"coloredBlur"},null,8,["stdDeviation"]),u],8,["id"]),Object(i["withDirectives"])(Object(i["createVNode"])("polygon",{points:n.starPointsToString,fill:n.gradId,stroke:o.glowColor,filter:"url(#"+a.glowId+")","stroke-width":n.border},null,8,["points","fill","stroke","filter","stroke-width"]),[[i["vShow"],o.glowColor&&o.glow>0&&o.fill>0]]),Object(i["createVNode"])("polygon",{points:n.starPointsToString,fill:n.gradId,stroke:n.getBorderColor,"stroke-width":n.border,"stroke-linejoin":n.strokeLinejoin},null,8,["points","fill","stroke","stroke-width","stroke-linejoin"]),Object(i["createVNode"])("polygon",{points:n.starPointsToString,fill:n.gradId},null,8,["points","fill"])],42,["height","width","viewBox"])}));var h=o("d4aa"),b=o.n(h),g={name:"Star",props:{fill:{type:Number,default:0},points:{type:Array,default(){return[]}},size:{type:Number,default:50},starId:{type:Number,required:!0},activeColor:{type:String,required:!0},inactiveColor:{type:String,required:!0},borderColor:{type:String,default:"#000"},activeBorderColor:{type:String,default:"#000"},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},glow:{type:Number,default:0},glowColor:{type:String,default:null,required:!1},animate:{type:Boolean,default:!1}},emits:["star-mouse-move","star-selected"],data(){return{starPoints:[19.8,2.2,6.6,43.56,39.6,17.16,0,17.16,33,43.56],grad:"",glowId:"",isStarActive:!0}},computed:{starPointsToString(){return this.starPoints.join(",")},gradId(){return"url(#"+this.grad+")"},starSize(){const e=this.roundedCorners&&this.borderWidth<=0?parseInt(this.size)-parseInt(this.border):this.size;return parseInt(e)+parseInt(this.border)},starFill(){return this.rtl?100-this.fill+"%":this.fill+"%"},border(){return this.roundedCorners&&this.borderWidth<=0?6:this.borderWidth},getBorderColor(){return this.roundedCorners&&this.borderWidth<=0?this.fill<=0?this.inactiveColor:this.activeColor:this.fill<=0?this.borderColor:this.activeBorderColor},maxSize(){return this.starPoints.reduce((function(e,t){return Math.max(e,t)}))},viewBox(){return"0 0 "+this.maxSize+" "+this.maxSize},shouldAnimate(){return this.animate&&this.isStarActive},strokeLinejoin(){return this.roundedCorners?"round":"miter"}},created(){this.starPoints=this.points.length?this.points:this.starPoints,this.calculatePoints(),this.grad=this.getRandomId(),this.glowId=this.getRandomId()},methods:{mouseMoving(e){"undefined"!==e.touchAction&&this.$emit("star-mouse-move",{event:e,position:this.getPosition(e),id:this.starId})},touchStart(){this.$nextTick(()=>{this.isStarActive=!0})},touchEnd(){this.$nextTick(()=>{this.isStarActive=!1})},getPosition(e){var t=.92*this.size;const o=this.rtl?Math.min(e.offsetX,45):Math.max(e.offsetX,1);var r=Math.round(100/t*o);return Math.min(r,100)},selected(e){this.$emit("star-selected",{id:this.starId,position:this.getPosition(e)})},getRandomId(){return Math.random().toString(36).substring(7)},calculatePoints(){this.starPoints=this.starPoints.map((e,t)=>{const o=t%2===0?1.5*this.border:0;return this.size/this.maxSize*e+o})},getColor(e){return new b.a(e).parseAlphaColor().color},getOpacity(e){return new b.a(e).parseAlphaColor().opacity}}};o("d1b1");g.render=p,g.__scopeId="data-v-11edf2d6";var f=g,m={name:"VueStarRating",components:{Star:f},props:{increment:{type:Number,default:1},rating:{type:Number,default:0},roundStartRating:{type:Boolean,default:!0},activeColor:{type:[String,Array],default:"#ffd055"},inactiveColor:{type:String,default:"#d8d8d8"},maxRating:{type:Number,default:5},starPoints:{type:Array,default(){return[]}},starSize:{type:Number,default:50},showRating:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},textClass:{type:String,default:""},inline:{type:Boolean,default:!1},borderColor:{type:String,default:"#999"},activeBorderColor:{type:[String,Array],default:null},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},padding:{type:Number,default:0},rtl:{type:Boolean,default:!1},fixedPoints:{type:Number,default:null},glow:{type:Number,default:0},glowColor:{type:String,default:"#fff"},clearable:{type:Boolean,default:!1},activeOnClick:{type:Boolean,default:!1},animate:{type:Boolean,default:!1}},emits:["update:rating","hover:rating"],data(){return{step:0,fillLevel:[],currentRating:0,selectedRating:0,ratingSelected:!1}},computed:{formattedRating(){return null===this.fixedPoints?this.currentRating:this.currentRating.toFixed(this.fixedPoints)},shouldRound(){return this.ratingSelected||this.roundStartRating},margin(){return this.padding+this.borderWidth},activeColors(){return Array.isArray(this.activeColor)?this.padColors(this.activeColor,this.maxRating,this.activeColor.slice(-1)[0]):new Array(this.maxRating).fill(this.activeColor)},currentActiveColor(){return this.activeOnClick?this.selectedRating>0?this.activeColors[Math.ceil(this.selectedRating)-1]:this.inactiveColor:this.currentRating>0?this.activeColors[Math.ceil(this.currentRating)-1]:this.inactiveColor},activeBorderColors(){if(Array.isArray(this.activeBorderColor))return this.padColors(this.activeBorderColor,this.maxRating,this.activeBorderColor.slice(-1)[0]);let e=this.activeBorderColor?this.activeBorderColor:this.borderColor;return new Array(this.maxRating).fill(e)},currentActiveBorderColor(){return this.activeOnClick?this.selectedRating>0?this.activeBorderColors[Math.ceil(this.selectedRating)-1]:this.borderColor:this.currentRating>0?this.activeBorderColors[Math.ceil(this.currentRating)-1]:this.borderColor}},watch:{rating(e){this.currentRating=e,this.selectedRating=e,this.createStars(this.shouldRound)}},created(){this.step=100*this.increment,this.currentRating=this.rating,this.selectedRating=this.currentRating,this.createStars(this.roundStartRating)},methods:{setRating(e,t){if(!this.readOnly){const o=this.rtl?(100-e.position)/100:e.position/100;this.currentRating=(e.id+o-1).toFixed(2),this.currentRating=this.currentRating>this.maxRating?this.maxRating:this.currentRating,t?(this.createStars(!0,!0),this.clearable&&this.currentRating===this.selectedRating?this.selectedRating=0:this.selectedRating=this.currentRating,this.$emit("update:rating",this.selectedRating),this.ratingSelected=!0):(this.createStars(!0,!this.activeOnClick),this.$emit("hover:rating",this.currentRating))}},resetRating(){this.readOnly||(this.currentRating=this.selectedRating,this.createStars(this.shouldRound))},createStars(e=!0,t=!0){e&&this.round();for(var o=0;o<this.maxRating;o++){let e=0;o<this.currentRating&&(e=this.currentRating-o>1?100:100*(this.currentRating-o)),t&&(this.fillLevel[o]=Math.round(e))}},round(){var e=1/this.increment;this.currentRating=Math.min(this.maxRating,Math.ceil(this.currentRating*e)/e)},padColors(e,t,o){return Object.assign(new Array(t).fill(o),e)}}};o("9ff5");m.render=l,m.__scopeId="data-v-f675a548";var v=m,O=v;t["default"]=O}})},7771:function(e,t,o){},a29b:function(e,t,o){},c009:function(e,t,o){"use strict";o("c3db")},c384:function(e,t,o){"use strict";o("0aa3")},c3db:function(e,t,o){},e682:function(e,t,o){"use strict";o("a29b")},fa09:function(e,t,o){"use strict";o.r(t);var r=o("7a23");const a=Object(r["withScopeId"])("data-v-29c87800");Object(r["pushScopeId"])("data-v-29c87800");const n={class:"edit-book"},i={class:"text-container"},s={class:"btn-tab"},c={class:"btn-tab--left"},l={class:"btn-tab--right"},d={key:0,class:"toggle toggle--knob"},u=Object(r["createVNode"])("input",{type:"checkbox",id:"toggle--knob",class:"toggle--checkbox"},null,-1),p=Object(r["createVNode"])("label",{class:"toggle--btn",for:"toggle--knob"},[Object(r["createVNode"])("span",{class:"toggle--feature","data-label-on":"on","data-label-off":"off"})],-1),h={class:"section row"},b={class:"ml-head"},g=Object(r["createTextVNode"])(" annotation "),f={class:"value row"},m={key:0},v={class:"label"},O={class:"label-header"},j={class:"title"},k={class:"action-bar"},y={key:0,class:"media-container"},C={class:"header-media"},B={class:"upload-dropbox"},N=Object(r["createTextVNode"])("Choose files "),w={class:"media-wrapper"},x={class:"action-panel"},S={key:1,class:"media video",controls:""},V={key:2,class:"media audio",controls:"",muted:""},R={class:"figure-caption"};Object(r["popScopeId"])();const L=a((e,t,o,L,M,P)=>{const $=Object(r["resolveComponent"])("star-rating"),I=Object(r["resolveComponent"])("form-field"),T=Object(r["resolveComponent"])("icon-carriage"),A=Object(r["resolveComponent"])("base-icon"),F=Object(r["resolveComponent"])("icon-paragraph"),D=Object(r["resolveComponent"])("icon-slash"),G=Object(r["resolveComponent"])("progress-ring"),U=Object(r["resolveComponent"])("genre-book"),E=Object(r["resolveComponent"])("modal");return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",c,[Object(r["createVNode"])("button",{class:"negative-btn",type:"reset",onClick:t[1]||(t[1]=(...e)=>P.resetBook&&P.resetBook(...e))},"reset"),Object(r["createVNode"])("button",{class:"positive-btn",onClick:t[2]||(t[2]=(...e)=>P.sendBook&&P.sendBook(...e))},"save")]),Object(r["createVNode"])("div",l,[Object(r["createVNode"])($,{rating:e.book.rating,"onUpdate:rating":t[3]||(t[3]=t=>e.book.rating=t),"star-size":20,"show-rating":!1},null,8,["rating"]),"admin"===P.username?(Object(r["openBlock"])(),Object(r["createBlock"])("div",d,[u,p])):Object(r["createCommentVNode"])("",!0)])]),Object(r["createVNode"])("section",h,[Object(r["createVNode"])(I,{placeholder:"name"},{default:a(()=>[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",class:"ml-value","onUpdate:modelValue":t[4]||(t[4]=t=>e.book.name=t),placeholder:"name",onFocus:t[5]||(t[5]=e=>e.target.placeholder=""),onBlur:t[6]||(t[6]=e=>e.target.placeholder="name")},null,544),[[r["vModelText"],e.book.name,void 0,{trim:!0}]])]),_:1}),Object(r["createVNode"])(I,{placeholder:"source"},{default:a(()=>[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"url",class:"ml-value",placeholder:"source","onUpdate:modelValue":t[7]||(t[7]=t=>e.book.source=t),onFocus:t[8]||(t[8]=e=>e.target.placeholder=""),onBlur:t[9]||(t[9]=e=>e.target.placeholder="source")},null,544),[[r["vModelText"],e.book.source,void 0,{trim:!0}]])]),_:1})]),Object(r["createVNode"])(I,{placeholder:"annotation"},{header:a(()=>[Object(r["createVNode"])("span",b,[g,Object(r["createVNode"])("meter",{class:"meter",value:e.book.annotation.length,min:"0",max:"300",low:"30",high:"280",optimum:"150"},null,8,["value"])])]),default:a(()=>[Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{class:"ml-value textarea",rows:"4",maxlength:"300","onUpdate:modelValue":t[10]||(t[10]=t=>e.book.annotation=t),placeholder:"annotation",onFocus:t[11]||(t[11]=e=>e.target.placeholder=""),onBlur:t[12]||(t[12]=e=>e.target.placeholder="annotation")},null,544),[[r["vModelText"],e.book.annotation,void 0,{trim:!0}]])]),_:1}),Object(r["createVNode"])("section",{class:"section genre",onClick:t[13]||(t[13]=(...e)=>P.openGenreModal&&P.openGenreModal(...e))},[Object(r["createVNode"])("div",f,[0===e.genres.length?(Object(r["openBlock"])(),Object(r["createBlock"])("span",m,"Не выбраны жанры")):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.genres,(e,t)=>(Object(r["openBlock"])(),Object(r["createBlock"])("span",{class:"value genre-span",style:{color:P.colorizeGenre(t)},key:e.id},Object(r["toDisplayString"])(e.name),5))),128))])]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("span",O,[Object(r["createVNode"])("span",j,"text "+Object(r["toDisplayString"])(e.book.text?e.book.text.length:""),1),Object(r["createVNode"])("span",k,[Object(r["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[14]||(t[14]=(...e)=>P.toggleEditor&&P.toggleEditor(...e))},Object(r["toDisplayString"])(e.editor),1),Object(r["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[15]||(t[15]=e=>P.formatText("caret")),"data-tooltip":"переносы строк"},[Object(r["createVNode"])(A,{class:"icon"},{default:a(()=>[Object(r["createVNode"])(T)]),_:1})]),Object(r["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[16]||(t[16]=e=>P.formatText("double-p")),"data-tooltip":"двойные <p>"},[Object(r["createVNode"])(A,{class:"icon"},{default:a(()=>[Object(r["createVNode"])(F)]),_:1})]),Object(r["createVNode"])("button",{class:"editor-btn",type:"button",onClick:t[17]||(t[17]=e=>P.formatText("comment")),"data-tooltip":"комментарий"},[Object(r["createVNode"])(A,{class:"icon"},{default:a(()=>[Object(r["createVNode"])(D)]),_:1})])])]),"raw"===e.editor?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("textarea",{key:0,class:"editor clarity","onUpdate:modelValue":t[18]||(t[18]=t=>e.book.text=t),ref:"editor",onInput:t[19]||(t[19]=(...e)=>P.autoResize&&P.autoResize(...e))},null,544)),[[r["vModelText"],e.book.text]]):(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:1,class:"editor",contenteditable:"true",innerHTML:e.book.text},null,8,["innerHTML"]))])]),e.book.id?(Object(r["openBlock"])(),Object(r["createBlock"])("div",y,[Object(r["createVNode"])("header",C,[Object(r["createVNode"])("label",B,[N,Object(r["createVNode"])("input",{type:"file",class:"upload-input desktop",multiple:"",onChange:t[20]||(t[20]=e=>P.loadFiles(e.target.files))},null,32)]),Object(r["createVNode"])("button",{class:"positive-btn",onClick:t[21]||(t[21]=(...e)=>P.sendAllFiles&&P.sendAllFiles(...e))},"all upload"),Object(r["createVNode"])("button",{class:"negative-btn",onClick:t[22]||(t[22]=(...e)=>P.deleteAllFiles&&P.deleteAllFiles(...e))},"remove files")]),Object(r["createVNode"])("div",w,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.files,(t,o)=>(Object(r["openBlock"])(),Object(r["createBlock"])("figure",{class:"figure",key:"origy"+o},[Object(r["createVNode"])("div",x,[void 0===t.id?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,class:"image-entry-btn btn--green",onClick:e=>P.sendFile(t,o)},"load",8,["onClick"])):Object(r["createCommentVNode"])("",!0),"image/webp"===t.type&&void 0!==t.id?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:1,class:"image-entry-btn",onClick:o=>e.book.cover_id=t.id},Object(r["toDisplayString"])(e.book.cover_id===t.id?"current":"set")+"cover ",9,["onClick"])):Object(r["createCommentVNode"])("",!0),void 0!==t.id?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:2,class:"image-entry-btn btn--green",onClick:e=>P.copyFileName(t)},"tag",8,["onClick"])):Object(r["createCommentVNode"])("",!0),void 0!==t.id?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:3,class:"image-entry-btn btn--red",onClick:e=>P.deleteFile(o)},"delete",8,["onClick"])):Object(r["createCommentVNode"])("",!0)]),Object(r["withDirectives"])(Object(r["createVNode"])(G,{radius:60,progress:P.calcProgressUpload(o),stroke:10,color:"#ff2400"},null,8,["progress"]),[[r["vShow"],P.calcProgressUpload(o)<100&&P.calcProgressUpload(o)>0]]),"image"===P.checkType(t.type)?(Object(r["openBlock"])(),Object(r["createBlock"])("img",{key:0,class:"media image",src:P.getSrc(t)},null,8,["src"])):"video"===P.checkType(t.type)?(Object(r["openBlock"])(),Object(r["createBlock"])("video",S,[Object(r["createVNode"])("source",{src:P.getSrc(t)},null,8,["src"])])):"audio"===P.checkType(t.type)?(Object(r["openBlock"])(),Object(r["createBlock"])("audio",V,[Object(r["createVNode"])("source",{src:P.getSrc(t)},null,8,["src"])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("figcaption",R,Object(r["toDisplayString"])(t.name?t.name:t.full_name),1)]))),128))])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(E,{ref:"genreBook",width:750},{default:a(()=>[Object(r["createVNode"])(U,{"genres-props":e.genres,onSetGenres:P.setGenres},null,8,["genres-props","onSetGenres"])]),_:1},512)])});var M=o("5b3d"),P=o.n(M);const $=Object(r["createVNode"])("path",{d:"M 16.875 0.1875 L 5.421875 0.1875 C 2.53125 0.1875 0.1875 2.527344 0.1875 5.417969 C 0.1875 8.308594 2.53125 10.652344 5.421875 10.652344 L 7.160156 10.652344 C 7.261719 10.652344 7.347656 10.734375 7.347656 10.839844 L 7.347656 16.875 C 7.347656 17.394531 7.765625 17.8125 8.285156 17.8125 C 8.800781 17.8125 9.222656 17.394531 9.222656 16.875 L 9.222656 2.25 C 9.222656 2.144531 9.304688 2.0625 9.410156 2.0625 L 12.171875 2.0625 C 12.273438 2.0625 12.359375 2.144531 12.359375 2.25 L 12.359375 16.875 C 12.359375 17.394531 12.777344 17.8125 13.296875 17.8125 C 13.8125 17.8125 14.234375 17.394531 14.234375 16.875 L 14.234375 2.25 C 14.234375 2.199219 14.253906 2.152344 14.289062 2.117188 C 14.324219 2.082031 14.371094 2.0625 14.421875 2.0625 L 16.875 2.0625 C 17.394531 2.0625 17.8125 1.644531 17.8125 1.125 C 17.8125 0.605469 17.394531 0.1875 16.875 0.1875 Z M 7.351562 8.589844 C 7.351562 8.691406 7.265625 8.777344 7.164062 8.777344 L 5.421875 8.777344 C 3.566406 8.777344 2.0625 7.273438 2.0625 5.417969 C 2.0625 3.5625 3.566406 2.0625 5.421875 2.0625 L 7.160156 2.0625 C 7.210938 2.058594 7.257812 2.078125 7.292969 2.117188 C 7.332031 2.152344 7.351562 2.199219 7.351562 2.25 Z M 7.351562 8.589844 "},null,-1);function I(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[$])}const T={};T.render=I;var A=T;const F=Object(r["createVNode"])("path",{d:"M 7.328125 0.015625 C 6.476562 0.015625 5.78125 0.710938 5.78125 1.5625 L 5.78125 7.648438 L 1.5625 7.648438 C 0.710938 7.648438 0.015625 8.339844 0.015625 9.195312 L 0.015625 16.4375 C 0.015625 17.289062 0.710938 17.984375 1.5625 17.984375 L 7.097656 17.984375 C 7.171875 17.992188 7.25 18 7.328125 18 L 16.417969 18 C 16.847656 18 17.238281 17.824219 17.519531 17.539062 C 17.804688 17.257812 17.984375 16.867188 17.984375 16.4375 L 17.984375 9.195312 C 17.984375 9.113281 17.976562 9.035156 17.964844 8.960938 L 17.964844 1.5625 C 17.964844 0.710938 17.273438 0.015625 16.417969 0.015625 Z M 11.726562 11.367188 L 11.726562 6.839844 C 11.726562 6.363281 12.113281 5.976562 12.589844 5.976562 C 13.066406 5.976562 13.449219 6.363281 13.449219 6.839844 L 13.449219 13.09375 L 7.976562 13.09375 L 8.53125 13.652344 C 8.867188 13.988281 8.867188 14.535156 8.53125 14.871094 C 8.195312 15.210938 7.648438 15.210938 7.3125 14.871094 L 4.675781 12.238281 L 7.3125 9.601562 C 7.648438 9.265625 8.195312 9.265625 8.53125 9.601562 C 8.871094 9.9375 8.871094 10.484375 8.53125 10.824219 L 7.984375 11.367188 Z M 11.726562 11.367188 "},null,-1);function D(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[F])}const G={};G.render=D;var U=G;const E=Object(r["createVNode"])("path",{d:"M 18 9 L 13.757812 13.242188 L 12.695312 12.183594 L 15.878906 9 L 12.695312 5.816406 L 13.757812 4.757812 Z M 2.121094 9 L 5.304688 12.183594 L 4.242188 13.242188 L 0 9 L 4.242188 4.757812 L 5.300781 5.816406 Z M 7.339844 15.75 L 5.746094 15.75 L 10.660156 2.25 L 12.253906 2.25 Z M 7.339844 15.75 "},null,-1);function z(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[E])}const _={};_.render=z;var H=_;const W={class:"modal-header"},Z=Object(r["createVNode"])("h1",null,"Genre",-1),q={class:"genre-titles"},J={key:0},X={key:0,class:"genres"},Y=Object(r["createVNode"])("legend",null,"all genres",-1),K={class:"parent-title"},Q=Object(r["createVNode"])("span",{class:"checkmark"},null,-1),ee={class:"footer"},te=Object(r["createVNode"])("button",{class:"positive-btn"},"Сохранить",-1);function oe(e,t,o,a,n,i){const s=Object(r["resolveComponent"])("icon-close"),c=Object(r["resolveComponent"])("base-icon");return Object(r["openBlock"])(),Object(r["createBlock"])("form",{class:"genre-book",onSubmit:t[5]||(t[5]=Object(r["withModifiers"])((...e)=>i.sendGenre&&i.sendGenre(...e),["prevent"]))},[Object(r["createVNode"])("header",W,[Z,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.genres.length),1),Object(r["createVNode"])("button",{class:"close-btn",type:"reset",onClick:t[1]||(t[1]=(...e)=>i.closeModal&&i.closeModal(...e))},[Object(r["createVNode"])(c,{class:"icon","icon-name":"close"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s)]),_:1})])]),Object(r["createVNode"])("fieldset",q,[Object(r["createVNode"])("legend",null,"selected: "+Object(r["toDisplayString"])(e.selectedGenre.length),1),0===e.selectedGenre.length?(Object(r["openBlock"])(),Object(r["createBlock"])("span",J,"Не выбраны жанры")):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selectedGenre,(e,t)=>(Object(r["openBlock"])(),Object(r["createBlock"])("span",{class:"fieldset-genre",style:{color:i.colorizeGenre(t)},key:e.id},Object(r["toDisplayString"])(e.name),5))),128))]),e.$store.state.main.isDesktop?(Object(r["openBlock"])(),Object(r["createBlock"])("fieldset",X,[Y,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(i.parentGenres,o=>(Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["parent",{"checked-childes":i.calcCheckedChildes(o)}],key:o.id,onClick:t=>e.activeParent=Number(o.id)},[Object(r["createVNode"])("div",K,Object(r["toDisplayString"])(o.name),1),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(o.childes,o=>(Object(r["openBlock"])(),Object(r["createBlock"])("label",{class:"checkbox-container",key:o.id},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(o.name)+" ",1),Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"checkbox",value:o,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedGenre=t)},null,8,["value"]),[[r["vModelCheckbox"],e.selectedGenre]]),Q]))),128))],10,["onClick"]))),128))])):Object(r["createCommentVNode"])("",!0),e.$store.state.main.isMobile?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("select",{key:1,class:"select-genre",multiple:"","onUpdate:modelValue":t[3]||(t[3]=t=>e.genres=t),size:"1"},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(i.parentGenres,e=>(Object(r["openBlock"])(),Object(r["createBlock"])("optgroup",{key:e.id,label:e.name},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.childes,e=>(Object(r["openBlock"])(),Object(r["createBlock"])("option",{key:e.id},Object(r["toDisplayString"])(e.nane),1))),128))],8,["label"]))),128))],512)),[[r["vModelSelect"],e.genres]]):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("footer",ee,[Object(r["createVNode"])("button",{class:"negative-btn",type:"button",onClick:t[4]||(t[4]=(...e)=>i.reset&&i.reset(...e))},"сброс"),te])],32)}var re=o("fabf"),ae={name:"GenreBook",components:{IconClose:re["a"]},props:{genresProps:Array},data:()=>({activeParent:"",searchField:"",selectedGenre:[],genres:[]}),computed:{parentGenres(){return this.$store.state.genre.items}},watch:{},created(){this.loadGenres()},mounted(){},methods:{sendGenre(){this.$emit("set-genres",this.selectedGenre),this.closeModal()},calcCheckedChildes(e){return e.childes.find(e=>this.genres.map(e=>e.id).includes(e.id))},async loadGenres(){0===this.$store.state.genre.items.length&&await this.$store.dispatch("genre/loadGenres"),this.genres=this.$store.state.genre.items.map(e=>({...e})),this.selectedGenre=this.genresProps.map(e=>({...e}))},colorizeGenre(e){const t=["RED","ORANGE","YELLOW","GREEN","BLUE","DeepSkyBlue","PURPLE"];return t[e]},reset(){this.selectedGenre=this.genresProps.map(e=>({...e}))},closeModal(){this.$parent.hide("genreBook",this)}}};o("c384");ae.render=oe;var ne=ae;const ie={class:"loader-ring"},se={class:"progress"};function ce(e,t,o,a,n,i){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{id:"ring",class:["ring",{"over-top":o.progress}]},[Object(r["createVNode"])("div",ie,[(Object(r["openBlock"])(),Object(r["createBlock"])("svg",{height:2*o.radius,width:2*o.radius},[Object(r["createVNode"])("circle",{stroke:"#018786","stroke-dasharray":i.circumference+" "+i.circumference,style:{strokeDashoffset:i.strokeDashoffset},"stroke-width":o.stroke,fill:"transparent",r:i.normalizedRadius,cx:o.radius,cy:o.radius},null,12,["stroke-dasharray","stroke-width","r","cx","cy"])],8,["height","width"])),Object(r["createVNode"])("span",se,Object(r["toDisplayString"])(o.progress),1)])],2)}var le={name:"ProgressRing",components:{},props:{radius:Number,progress:Number,stroke:Number},data:()=>({}),computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference},normalizedRadius(){return this.radius-2*this.stroke},circumference(){return 2*this.normalizedRadius*Math.PI}},watch:{},created(){},mounted(){},methods:{}};o("c009");le.render=ce;var de=le;const ue=Object(r["withScopeId"])("data-v-1a25cab4");Object(r["pushScopeId"])("data-v-1a25cab4");const pe={class:"ml-head"};Object(r["popScopeId"])();const he=ue((e,t,o,a,n,i)=>(Object(r["openBlock"])(),Object(r["createBlock"])("label",{class:"ml",onFocusin:t[1]||(t[1]=t=>e.focused=!0),onFocusout:t[2]||(t[2]=t=>e.focused=!1)},[e.focused?Object(r["renderSlot"])(e.$slots,"header",{key:0},()=>[Object(r["createVNode"])("span",pe,Object(r["toDisplayString"])(o.placeholder),1)],{},!0):Object(r["createCommentVNode"])("",!0),Object(r["renderSlot"])(e.$slots,"default",{},void 0,!0)],32)));var be={name:"FormField",components:{},props:{placeholder:String},data:()=>({focused:!1}),methods:{},computed:{},watch:{},created(){},mounted(){},updated(){}};o("e682");be.render=he,be.__scopeId="data-v-1a25cab4";var ge=be,fe={name:"BookEdit",components:{IconParagraph:A,IconCarriage:U,IconSlash:H,GenreBook:ne,ProgressRing:de,FormField:ge,StarRating:P.a},props:{},data:()=>({files:[],uploadingProgress:[],book:{id:null,name:null,annotation:"",text:"",source:null,cover:null,rating:null,ad:null,files:[]},genres:[],editor:"raw",expandText:!1,expandIllustration:!1}),methods:{autoResize(){const e=this.$refs.editor;e.style.cssText="height:auto; padding:0",e.style.cssText="height:"+1.018*e.scrollHeight+"px"},calcProgressUpload(e){return this.uploadingProgress[e]},async sendBook(){const e=await this.checkBook();if(!e)return!1;let t,o="/book/create";const r={...this.book,genres:this.genres.map(e=>e.id)};this.$loader.show(),this.$route.params.id?(o="/book/update?id="+this.$route.params.id,t=await this.$patch(o,r)):t=await this.$post(o,r),this.$loader.hide(),t&&this.$router.replace("/book")},resetBook(){this.book={id:null,name:null,annotation:"",text:"",source:null,cover_id:null,cover_url:null,rating:null,book:null,files:[]},this.genres=[]},async checkBook(){let e=!0,t=[];return this.book.name||(t.push("empty name"),e=!1),this.genres.length<1&&(t.push("choose at least one genre"),e=!1),e||this.$toast.error(t),e},async getBook(){if(!this.$route.params.id)return!1;{const e="/book/view?id="+this.$route.params.id,t=await this.$get(e);t?(this.book={...t,annotation:t.annotation?t.annotation:""},this.genres=[...t.genres],this.files.push(...t.files),await this.$nextTick(),this.autoResize()):console.log(t)}},loadFiles(e){for(const t of e)this.files.push(t),this.uploadingProgress.push(null)},getSrc(e){const t=!!e.id;return t?"https://google.com/"+e.url:window.URL.createObjectURL(e)},async sendAllFiles(){for(const[e,t]of this.files.entries())await this.sendFile(t,e)},async sendFile(e,t){return new Promise(function(o){let r=new FormData;r.append("file",e);let a=new XMLHttpRequest;const n=sessionStorage.getItem("lib-token");a.open("POST","https://google.com/media-storage/upload?book_id="+this.book.id),a.setRequestHeader("Authorization","Bearer "+n),a.responseType="json",a.upload.onprogress=async e=>{this.uploadingProgress[t]=Math.round(100*e.loaded/e.total),this.$forceUpdate()},a.onloadend=()=>{200===a.status?(this.files[t]=a.response,this.$forceUpdate(),o(a.response)):console.log("Ошибка "+this.status)},a.send(r)}.bind(this))},async deleteAllFiles(){const e="/book/delete-all-media?id="+this.book.id,t=await this.$delete(e);t?(this.files.length=0,this.uploadingProgress.length=0,this.$forceUpdate()):console.log(t)},checkType(e){return"image/png"===e||"image/jpeg"===e||"image/gif"===e||"image/webp"===e?"image":"video/webm"===e||"video/mp4"===e?"video":"audio/mpeg"===e?"audio":""===e?"file":void 0},async deleteFile(e){const t="/media-storage/delete?id="+this.files[e].id,o=await this.$delete(t);o?(this.files.splice(e,1),this.uploadingProgress.splice(e,1)):console.error(o)},async copyFileName(e){["image/webp","image/png","image/jpeg"].includes(e.type)?await navigator.clipboard.writeText(`<img class="media picture" src="APIURL/${e.url}">`):["video/webm","video/mp4"].includes(e.type)?await navigator.clipboard.writeText(`<video class="media video" autoplay loop muted controls><source src="APIURL/${e.url}"/></video>`):"audio/mp4"===e.type&&await navigator.clipboard.writeText(`<audio class="media audio" controls><source src="APIURL/${e.url}"/></audio>`)},async formatText(e){if("caret"===e)this.book.text=this.book.text.replace(/\n/g,"<p>");else if("double-p"===e)this.book.text=this.book.text.replace(/<p><p>/g,"<p>");else if("comment"===e){let e=this.$refs.editor.value.substring(this.$refs.editor.selectionStart,this.$refs.editor.selectionEnd);e.includes("\x3c!-- ")&&e.includes(" --\x3e")?(e=e.replace("\x3c!-- ",""),e=e.replace(" --\x3e","")):e="\x3c!-- "+e+" --\x3e",this.$refs.editor.setRangeText(e)}},errorImage(e){e.onerror=null,e.target.src="/icons/book-dead-solid.svg"},toggleEditor(){"raw"===this.editor?this.editor="html":this.editor="raw"},openGenreModal(){this.$modal.show("genreBook",this)},setGenres(e){this.genres=e},colorizeGenre(e){const t=["RED","ORANGE","YELLOW","GREEN","BLUE","DeepSkyBlue","PURPLE"];return t[e]}},computed:{username(){return this.$store.state.user.username},isDesktop(){return this.$store.state.main.isDesktop}},watch:{genres:{handler:function(){this.book.ad=this.genres.findIndex(e=>e.ad)>-1},deep:!0}},created(){this.getBook(),document.title="Editor"},mounted(){},unmounted(){},updated(){}};o("07b0");fe.render=L,fe.__scopeId="data-v-29c87800";t["default"]=fe},fabf:function(e,t,o){"use strict";var r=o("7a23");const a=Object(r["createVNode"])("path",{d:"M 11.972656 9.003906 L 17.542969 3.433594 C 18.160156 2.816406 18.160156 1.820312 17.542969 1.207031 L 16.800781 0.460938 C 16.183594 -0.152344 15.1875 -0.152344 14.574219 0.460938 L 9.003906 6.03125 L 3.433594 0.460938 C 2.816406 -0.152344 1.820312 -0.152344 1.207031 0.460938 L 0.460938 1.203125 C -0.152344 1.820312 -0.152344 2.816406 0.460938 3.433594 L 6.03125 9.003906 L 0.460938 14.574219 C -0.152344 15.1875 -0.152344 16.1875 0.460938 16.800781 L 1.207031 17.542969 C 1.820312 18.160156 2.820312 18.160156 3.433594 17.542969 L 9.003906 11.972656 L 14.574219 17.542969 C 15.1875 18.160156 16.1875 18.160156 16.800781 17.542969 L 17.542969 16.800781 C 18.160156 16.183594 18.160156 15.1875 17.542969 14.574219 Z M 11.972656 9.003906 "},null,-1);function n(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[a])}const i={};i.render=n;t["a"]=i}}]);
//# sourceMappingURL=chunk-4054f174.9c644028.js.map