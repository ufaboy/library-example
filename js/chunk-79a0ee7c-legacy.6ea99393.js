(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79a0ee7c"],{"26ad":function(e,t,n){"use strict";n("f2d4")},"7db0":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").find,c=n("44d2"),a="find",i=!0;a in[]&&Array(1)[a]((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(a)},"85ab":function(e,t,n){},bf03:function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),o=Object(r["withScopeId"])("data-v-8407d79a");Object(r["pushScopeId"])("data-v-8407d79a");var c={class:"header"},a={class:"book-text-wrap"},i={class:"book-name"},s={class:"book-annotation"};Object(r["popScopeId"])();var u=o((function(e,t,n,u,l,d){var p=Object(r["resolveComponent"])("observer"),b=Object(r["resolveComponent"])("sorting-modal"),h=Object(r["resolveComponent"])("modal");return Object(r["openBlock"])(),Object(r["createBlock"])("main",{class:"list-book",onTouchstart:t[7]||(t[7]=function(){return d.touchStart&&d.touchStart.apply(d,arguments)}),onTouchend:t[8]||(t[8]=function(){return d.touchEnd&&d.touchEnd.apply(d,arguments)}),onScrollPassive:t[9]||(t[9]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)})},[Object(r["createVNode"])("header",c,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"search-input",type:"search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchParams=t}),onInput:t[2]||(t[2]=Object(r["withModifiers"])((function(){return d.searchByName&&d.searchByName.apply(d,arguments)}),["prevent","stop"])),placeholder:"Search by name..."},null,544),[[r["vModelText"],e.searchParams]]),d.isMobile?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("select",{key:0,class:"select","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.activeGenre=t}),onChange:t[4]||(t[4]=function(){return d.changeGenre&&d.changeGenre.apply(d,arguments)})},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(d.genres,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("optgroup",{label:e.name,key:"parent-"+e.id},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.childes,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("option",{key:"select-genre"+e.id,value:e},Object(r["toDisplayString"])(e.name),9,["value"])})),128))],8,["label"])})),128))],544)),[[r["vModelSelect"],e.activeGenre]]):Object(r["createCommentVNode"])("",!0)]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.data.items,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("section",{class:"book",onClick:function(t){return d.openBook(e)},key:"book"+e.id},[Object(r["createVNode"])("img",{src:d.getCover(e),alt:"",class:"book-cover"},null,8,["src"]),Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",i,Object(r["toDisplayString"])(e.name),1),Object(r["createVNode"])("div",s,Object(r["toDisplayString"])(e.annotation),1)])],8,["onClick"])})),128)),Object(r["createVNode"])(p,{onIntersect:t[5]||(t[5]=function(e){return d.loadBooks("push")})}),Object(r["createVNode"])(h,{ref:"sortings"},{default:o((function(){return[Object(r["createVNode"])(b,{onSorting:d.updateBySorting},null,8,["onSorting"])]})),_:1},512),Object(r["createVNode"])("button",{class:"scroll-btn",ref:"topBtn",title:"Go to top",onClick:t[6]||(t[6]=function(){return d.scrollToTop&&d.scrollToTop.apply(d,arguments)})},"Top",512)],32)})),l=n("b85c"),d=n("2909"),p=n("1da1"),b=(n("99af"),n("7db0"),n("c740"),n("96cf"),{class:"sorting"}),h={class:"fieldset"},f=Object(r["createTextVNode"])("sorting ");function g(e,t,n,o,c,a){var i=Object(r["resolveComponent"])("icon-sort-asc"),s=Object(r["resolveComponent"])("icon-sort-desc"),u=Object(r["resolveComponent"])("base-icon");return Object(r["openBlock"])(),Object(r["createBlock"])("main",b,[Object(r["createVNode"])("fieldset",h,[Object(r["createVNode"])("legend",null,[f,Object(r["createVNode"])(u,{class:"icon"},{default:Object(r["withCtx"])((function(){return[e.ascending?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0})):(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:1}))]})),_:1})]),Object(r["createVNode"])("button",{class:["srt-btn",{active:"name"===this.orderBy}],onClick:t[1]||(t[1]=function(e){return a.changeOrderBy("name")})},"name",2),Object(r["createVNode"])("button",{class:["srt-btn",{active:"view_count"===this.orderBy}],onClick:t[2]||(t[2]=function(e){return a.changeOrderBy("view_count")})},"view_count",2),Object(r["createVNode"])("button",{class:["srt-btn",{active:"rating"===this.orderBy}],onClick:t[3]||(t[3]=function(e){return a.changeOrderBy("rating")})},"rating",2),Object(r["createVNode"])("button",{class:["srt-btn",{active:"updated_at"===this.orderBy}],onClick:t[4]||(t[4]=function(e){return a.changeOrderBy("updated_at")})},"updated",2),Object(r["createVNode"])("button",{class:["srt-btn",{active:"last_read"===this.orderBy}],onClick:t[5]||(t[5]=function(e){return a.changeOrderBy("last_read")})},"last read",2),Object(r["createVNode"])("button",{class:"close-find",onClick:t[6]||(t[6]=function(){return a.sorting&&a.sorting.apply(a,arguments)})},"close&filter")])])}var m=n("d6eb"),O=n("d4f9"),j={name:"SortingModal",components:{IconSortAsc:m["a"],IconSortDesc:O["a"]},props:{},data:function(){return{ascending:0,orderBy:"",orderRandom:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{sorting:function(){this.$emit("sorting",{orderBy:this.orderBy,ascending:this.ascending}),this.closeModal()},changeOrderBy:function(e){this.orderBy=e,this.ascending=!this.ascending},closeModal:function(){this.$parent.hide("sortings",this)}}};n("fef3");j.render=g;var k=j,C={name:"ListBook",components:{SortingModal:k},props:{},data:function(){return{data:{items:[],_links:{},_meta:{}},searchParams:null,activeGenre:null,activeParent:null,infinityState:!0,infinityLoading:!1,orderBy:"updated_at",limit:25,page:1,ascending:0,startPos:{x:0,y:0},endPos:{x:0,y:0}}},computed:{isMobile:function(){return this.$store.state.main.isMobile},genres:function(){return this.$store.state.genre.items}},watch:{},created:function(){document.title="Books"},mounted:function(){this.prepareGenre()},methods:{searchByName:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=1,e.loadBooks();case 2:case"end":return t.stop()}}),t)})))()},loadBooks:function(){var e=arguments,t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,o,c,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:null,o=t.activeGenre?t.activeGenre.id:t.$route.params.id?t.$route.params.id:null,null!==o){n.next=4;break}return n.abrupt("return",!1);case 4:if(t.infinityState||!r){n.next=8;break}return n.abrupt("return",!1);case 8:null===r&&(t.infinityState=!0);case 9:return c="/book?page=".concat(t.page,"&limit=").concat(t.limit,"&sort=").concat(t.ascending?"":"-").concat(t.orderBy?t.orderBy:"id","&genre_id=").concat(o),t.searchParams&&(c+="&name=".concat(t.searchParams)),t.infinityLoading=!0,t.$loader.show(),n.next=15,t.$get(c);case 15:a=n.sent,t.$loader.hide(),t.infinityLoading=!1,a&&("push"===r?((i=t.data.items).push.apply(i,Object(d["a"])(a.items)),t.page=++t.page):(t.data.items.length=0,(s=t.data.items).push.apply(s,Object(d["a"])(a.items)),t.page=++t.page),a.items.length<t.limit&&(t.infinityState=!1));case 19:case"end":return n.stop()}}),n)})))()},changeGenre:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=1,e.loadBooks();case 2:case"end":return t.stop()}}),t)})))()},prepareGenre:function(){var e=this;if(this.$route.params.id){var t,n=Object(l["a"])(this.genres);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.childes.find((function(t){return t.id===+e.$route.params.id}));if(o){this.activeGenre=o;break}}}catch(c){n.e(c)}finally{n.f()}}},openBook:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.genres.findIndex((function(e){return"comics"===e.parent.name}))>-1,n.next=3,t.$router.push({name:r?"book-media":"book-view",params:{id:e.id}});case 3:case"end":return n.stop()}}),n)})))()},getCover:function(e){return e.cover_url?"".concat("https://google.com","/").concat(e.cover_url):"/img/book-dead-solid.svg"},touchStart:function(e){this.startPos={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},this.endPos={x:0,y:0}},touchEnd:function(e){this.endPos={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var t=this.endPos.x-this.startPos.x,n=this.startPos.y-this.endPos.y;t>100&&n<50&&this.$modal.show("sortings",this)},updateBySorting:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.orderBy=e.orderBy,t.ascending=e.ascending,t.page=1,t.loadBooks();case 4:case"end":return n.stop()}}),n)})))()},onScroll:function(){},loadAndPush:function(){this.loadBooks("push")},scrollToTop:function(){this.$el.scrollTop=0}}};n("26ad");C.render=u,C.__scopeId="data-v-8407d79a";t["default"]=C},d4f9:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createVNode"])("path",{d:"M 7.855469 12.046875 L 6.382812 12.046875 L 6.382812 0.367188 C 6.382812 0.164062 6.21875 0 6.015625 0 L 3.050781 0 C 2.851562 0 2.683594 0.164062 2.683594 0.367188 L 2.683594 12.046875 L 1.214844 12.046875 C 1.074219 12.046875 0.945312 12.128906 0.882812 12.257812 C 0.820312 12.382812 0.839844 12.535156 0.929688 12.644531 L 4.246094 17.597656 C 4.316406 17.683594 4.421875 17.734375 4.535156 17.734375 C 4.644531 17.734375 4.75 17.683594 4.820312 17.597656 L 8.140625 12.644531 C 8.230469 12.535156 8.246094 12.382812 8.183594 12.257812 C 8.125 12.128906 7.996094 12.046875 7.855469 12.046875 Z M 7.855469 12.046875 "},null,-1),c=Object(r["createVNode"])("path",{d:"M 17.089844 17.46875 L 14.640625 10.527344 C 14.589844 10.382812 14.449219 10.285156 14.292969 10.285156 L 13.585938 10.285156 C 13.566406 10.285156 13.546875 10.285156 13.527344 10.289062 C 13.507812 10.285156 13.488281 10.285156 13.46875 10.285156 L 12.777344 10.285156 C 12.621094 10.285156 12.484375 10.382812 12.429688 10.527344 L 9.992188 17.46875 C 9.953125 17.578125 9.96875 17.703125 10.039062 17.800781 C 10.109375 17.898438 10.21875 17.957031 10.339844 17.957031 L 11.398438 17.957031 C 11.5625 17.957031 11.703125 17.851562 11.75 17.695312 L 12.214844 16.167969 L 14.863281 16.167969 L 15.332031 17.695312 C 15.378906 17.851562 15.519531 17.957031 15.683594 17.957031 L 16.742188 17.957031 C 16.863281 17.957031 16.972656 17.898438 17.042969 17.800781 C 17.109375 17.703125 17.128906 17.578125 17.089844 17.46875 Z M 12.65625 14.707031 C 13.097656 13.277344 13.394531 12.289062 13.542969 11.757812 L 14.445312 14.707031 Z M 12.65625 14.707031 "},null,-1),a=Object(r["createVNode"])("path",{d:"M 16.035156 6.253906 L 12.761719 6.253906 L 16.238281 1.257812 C 16.28125 1.195312 16.304688 1.121094 16.304688 1.046875 L 16.304688 0.421875 C 16.304688 0.21875 16.140625 0.0546875 15.9375 0.0546875 L 11.148438 0.0546875 C 10.945312 0.0546875 10.78125 0.21875 10.78125 0.421875 L 10.78125 1.125 C 10.78125 1.328125 10.945312 1.492188 11.148438 1.492188 L 14.230469 1.492188 L 10.75 6.484375 C 10.707031 6.546875 10.683594 6.621094 10.683594 6.695312 L 10.683594 7.328125 C 10.683594 7.53125 10.847656 7.695312 11.050781 7.695312 L 16.035156 7.695312 C 16.238281 7.695312 16.402344 7.53125 16.402344 7.328125 L 16.402344 6.621094 C 16.402344 6.417969 16.238281 6.253906 16.035156 6.253906 Z M 16.035156 6.253906 "},null,-1);function i(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[o,c,a])}const s={};s.render=i;t["a"]=s},d6eb:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createVNode"])("path",{d:"M 7.847656 12.046875 L 6.375 12.046875 L 6.375 0.367188 C 6.375 0.164062 6.210938 0 6.007812 0 L 3.046875 0 C 2.84375 0 2.679688 0.164062 2.679688 0.367188 L 2.679688 12.046875 L 1.207031 12.046875 C 1.066406 12.046875 0.9375 12.128906 0.875 12.257812 C 0.8125 12.382812 0.832031 12.535156 0.921875 12.644531 L 4.242188 17.597656 C 4.308594 17.683594 4.414062 17.734375 4.527344 17.734375 C 4.636719 17.734375 4.742188 17.683594 4.8125 17.597656 L 8.132812 12.644531 C 8.222656 12.535156 8.238281 12.382812 8.179688 12.257812 C 8.117188 12.128906 7.988281 12.046875 7.847656 12.046875 Z M 7.847656 12.046875 "},null,-1),c=Object(r["createVNode"])("path",{d:"M 17.082031 7.222656 L 14.632812 0.28125 C 14.582031 0.136719 14.441406 0.0390625 14.285156 0.0390625 L 13.578125 0.0390625 C 13.558594 0.0390625 13.539062 0.0390625 13.519531 0.0429688 C 13.5 0.0390625 13.480469 0.0390625 13.460938 0.0390625 L 12.769531 0.0390625 C 12.613281 0.0390625 12.476562 0.136719 12.421875 0.285156 L 9.984375 7.222656 C 9.945312 7.332031 9.960938 7.457031 10.03125 7.554688 C 10.101562 7.652344 10.210938 7.710938 10.332031 7.710938 L 11.390625 7.710938 C 11.554688 7.710938 11.695312 7.605469 11.742188 7.449219 L 12.207031 5.921875 L 14.855469 5.921875 L 15.324219 7.449219 C 15.371094 7.605469 15.511719 7.710938 15.675781 7.710938 L 16.734375 7.710938 C 16.851562 7.710938 16.964844 7.652344 17.035156 7.554688 C 17.101562 7.457031 17.121094 7.332031 17.082031 7.222656 Z M 12.648438 4.460938 C 13.089844 3.03125 13.386719 2.042969 13.535156 1.515625 L 14.4375 4.460938 Z M 12.648438 4.460938 "},null,-1),a=Object(r["createVNode"])("path",{d:"M 16.027344 16.5 L 12.753906 16.5 L 16.230469 11.503906 C 16.273438 11.441406 16.296875 11.371094 16.296875 11.292969 L 16.296875 10.667969 C 16.296875 10.464844 16.132812 10.300781 15.929688 10.300781 L 11.140625 10.300781 C 10.9375 10.300781 10.773438 10.464844 10.773438 10.667969 L 10.773438 11.371094 C 10.773438 11.574219 10.9375 11.738281 11.140625 11.738281 L 14.222656 11.738281 L 10.742188 16.730469 C 10.699219 16.792969 10.675781 16.867188 10.675781 16.941406 L 10.675781 17.574219 C 10.675781 17.777344 10.839844 17.941406 11.042969 17.941406 L 16.027344 17.941406 C 16.230469 17.941406 16.394531 17.777344 16.394531 17.574219 L 16.394531 16.867188 C 16.394531 16.664062 16.230469 16.5 16.027344 16.5 Z M 16.027344 16.5 "},null,-1);function i(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("g",null,[o,c,a])}const s={};s.render=i;t["a"]=s},f2d4:function(e,t,n){},fef3:function(e,t,n){"use strict";n("85ab")}}]);
//# sourceMappingURL=chunk-79a0ee7c-legacy.6ea99393.js.map