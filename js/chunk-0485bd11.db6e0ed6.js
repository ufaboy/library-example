(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0485bd11"],{"6c90":function(e,t,c){"use strict";c("f875")},"75d6":function(e,t,c){"use strict";c.r(t);var n=c("7a23");const a=Object(n["withScopeId"])("data-v-804b86c2");Object(n["pushScopeId"])("data-v-804b86c2");const o={class:"genre-table"},l={class:"header"},r={class:"table"},s={class:"thead"},i={class:"table-cell"},d={class:"td-title"};Object(n["popScopeId"])();const b=a((e,t,c,b,p,u)=>{const O=Object(n["resolveComponent"])("icon-sort-asc"),j=Object(n["resolveComponent"])("icon-sort-desc"),C=Object(n["resolveComponent"])("base-icon"),h=Object(n["resolveComponent"])("edit-genre"),m=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("header",l,[Object(n["createVNode"])("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>u.createGenre&&u.createGenre(...e))},"create")]),Object(n["createVNode"])("table",r,[Object(n["createVNode"])("thead",s,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.columns,(t,c)=>(Object(n["openBlock"])(),Object(n["createBlock"])("th",{class:["th",e.columnsClasses[t]],key:c},[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",d,Object(n["toDisplayString"])(t),1),Object(n["createVNode"])("div",{class:"td-action",onClick:c=>u.sortBy(t,e.ascending?0:1)},[Object(n["createVNode"])(C,{class:"icon","icon-name":"sort"},{default:a(()=>[e.ascending?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0})):(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:1}))]),_:1})],8,["onClick"])])],2))),128))]),Object(n["createVNode"])(n["TransitionGroup"],{name:"flip-list",tag:"tbody"},{default:a(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.genres,t=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{class:["row",{picante:t.ad,parent:null===t.parent}],key:t.id,onClick:e=>u.openRow(t)},[Object(n["createVNode"])("td",{class:["td",e.columnsClasses.id]},Object(n["toDisplayString"])(t.id),3),Object(n["createVNode"])("td",{class:["td",e.columnsClasses.title]},Object(n["toDisplayString"])(t.name),3),Object(n["createVNode"])("td",{class:["td",e.columnsClasses.description]},Object(n["toDisplayString"])(t.description),3),Object(n["createVNode"])("td",{class:["td",e.columnsClasses.parent]},Object(n["toDisplayString"])(t.parent?t.parent.name:""),3)],10,["onClick"]))),128))]),_:1})]),Object(n["createVNode"])(m,{ref:"editGenre"},{default:a(()=>[Object(n["createVNode"])(h,{genre:e.activeGenre,onUpdateGenres:u.loadGenres},null,8,["genre","onUpdateGenres"])]),_:1},512)])}),p={class:"header"},u=Object(n["createVNode"])("h1",null,"Genre",-1),O={class:"label"},j=Object(n["createVNode"])("span",{class:"title"},"name",-1),C={class:"label"},h=Object(n["createVNode"])("span",{class:"title"},"description",-1),m={class:"label"},L=Object(n["createVNode"])("span",{class:"title"},"parent genre",-1),g={class:"footer"},G=Object(n["createVNode"])("button",{class:"positive-btn"},"Сохранить",-1);function k(e,t,c,a,o,l){const r=Object(n["resolveComponent"])("icon-close"),s=Object(n["resolveComponent"])("base-icon"),i=Object(n["resolveDirective"])("focus");return Object(n["openBlock"])(),Object(n["createBlock"])("form",{class:"edit-genre",onSubmit:t[7]||(t[7]=Object(n["withModifiers"])((...e)=>l.sendGenre&&l.sendGenre(...e),["prevent"]))},[Object(n["createVNode"])("header",p,[u,"admin"===l.username?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:["btn-switch btn",{active:c.genre.ad}],onClick:t[1]||(t[1]=t=>e.localGenre.genre.ad=!c.genre.ad)},"ad ",2)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("button",{class:"close-btn",type:"reset",onClick:t[2]||(t[2]=(...e)=>l.closeModal&&l.closeModal(...e))},[Object(n["createVNode"])(s,{class:"icon","icon-name":"close"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r)]),_:1})])]),Object(n["createVNode"])("label",O,[j,Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:"value","onUpdate:modelValue":t[3]||(t[3]=t=>e.localGenre.name=t)},null,512),[[n["vModelText"],e.localGenre.name,void 0,{trim:!0}],[i]])]),Object(n["createVNode"])("label",C,[h,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{class:"value textarea","onUpdate:modelValue":t[4]||(t[4]=t=>e.localGenre.description=t),rows:"5"},null,512),[[n["vModelText"],e.localGenre.description,void 0,{trim:!0}]])]),Object(n["createVNode"])("label",m,[L,Object(n["withDirectives"])(Object(n["createVNode"])("select",{class:"select value","onUpdate:modelValue":t[5]||(t[5]=t=>e.localGenre.parent_id=t)},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.$store.state.genre.items,e=>(Object(n["openBlock"])(),Object(n["createBlock"])("option",{key:e.id,value:e.id},Object(n["toDisplayString"])(e.name),9,["value"]))),128))],512),[[n["vModelSelect"],e.localGenre.parent_id]])]),Object(n["createVNode"])("footer",g,[Object(n["createVNode"])("button",{class:"negative-btn",type:"reset",onClick:t[6]||(t[6]=(...e)=>l.deleteGenre&&l.deleteGenre(...e))},"Удалить"),G])],32)}var v=c("fabf"),V={name:"EditGenre",components:{IconClose:v["a"]},props:{genre:Object,dataProps:Object},data:()=>({localGenre:{id:null,title:null,description:null,parent_id:null,ad:null}}),computed:{username(){return this.$store.state.user.username}},watch:{},created(){this.prepareGenre(),0===this.$store.state.genre.items.length&&this.$store.dispatch("genre/loadGenres")},mounted(){},methods:{async sendGenre(){if(!this.localGenre.name)return void this.$toast.error("name not specified");let e,t="/genre/create";const c={name:this.localGenre.name,description:this.localGenre.description,ad:this.localGenre.ad};this.localGenre.parent_id&&(c.parent_id=this.localGenre.parent_id),this.localGenre.id?(t="/genre/update?id="+this.genre.id,e=await this.$patch(t,c)):e=await this.$post(t,c),e&&(this.$emit("update-genres"),this.closeModal())},async deleteGenre(){if(!this.genre.parent_id)return!1;const e="/genre/delete?id="+this.genre.id,t=await this.$delete(e);t&&(this.$store.dispatch("genre/loadGenre"),this.closeModal())},selectGenre(e){this.parent=e},clearGenre(){this.parent={id:null,name:null}},closeModal(){this.$parent.hide("editGenre",this)},prepareGenre(){this.localGenre=Object.assign({},this.genre)}}};c("8ebb");V.render=k;var N=V,f=c("d6eb"),B=c("d4f9"),w={name:"GenreTable",components:{EditGenre:N,IconSortAsc:f["a"],IconSortDesc:B["a"]},props:{},data:()=>({activeGenre:{id:null,name:null,description:null,parentGenre:{id:null,name:null},parent:{id:null,name:null}},modalOpen:!1,genres:[],ascending:1,orderBy:null,columns:["id","name","description","parent"],columnsClasses:{id:"cell-id",name:"cell-name",description:"cell-description",parent:"cell-parent"}}),methods:{async loadGenres(){this.$loader.show();const e=await this.$get("/genre?type=all");this.$loader.hide(),e?this.genres=e:console.log({loadGenres:e})},openRow(e){this.activeGenre=e,this.$modal.show("editGenre",this,e)},createGenre(){this.activeGenre={id:null,name:null,description:null,parentGenre:{id:null,name:null},parent:{id:null,name:null}},this.$modal.show("editGenre",this)},sortBy(e,t){console.log({orderBy:e,asc:t}),this.genres.sort((function(c,n){return c[e]>n[e]?t?1:-1:c[e]<n[e]?t?-1:1:0})),this.ascending=this.ascending?0:1}},computed:{},watch:{},created(){document.title="Table Genres",0===this.genres.length&&this.loadGenres()},mounted(){},updated(){}};c("6c90");w.render=b,w.__scopeId="data-v-804b86c2";t["default"]=w},"8ebb":function(e,t,c){"use strict";c("e45b")},d4f9:function(e,t,c){"use strict";var n=c("7a23");const a=Object(n["createVNode"])("path",{d:"M 7.855469 12.046875 L 6.382812 12.046875 L 6.382812 0.367188 C 6.382812 0.164062 6.21875 0 6.015625 0 L 3.050781 0 C 2.851562 0 2.683594 0.164062 2.683594 0.367188 L 2.683594 12.046875 L 1.214844 12.046875 C 1.074219 12.046875 0.945312 12.128906 0.882812 12.257812 C 0.820312 12.382812 0.839844 12.535156 0.929688 12.644531 L 4.246094 17.597656 C 4.316406 17.683594 4.421875 17.734375 4.535156 17.734375 C 4.644531 17.734375 4.75 17.683594 4.820312 17.597656 L 8.140625 12.644531 C 8.230469 12.535156 8.246094 12.382812 8.183594 12.257812 C 8.125 12.128906 7.996094 12.046875 7.855469 12.046875 Z M 7.855469 12.046875 "},null,-1),o=Object(n["createVNode"])("path",{d:"M 17.089844 17.46875 L 14.640625 10.527344 C 14.589844 10.382812 14.449219 10.285156 14.292969 10.285156 L 13.585938 10.285156 C 13.566406 10.285156 13.546875 10.285156 13.527344 10.289062 C 13.507812 10.285156 13.488281 10.285156 13.46875 10.285156 L 12.777344 10.285156 C 12.621094 10.285156 12.484375 10.382812 12.429688 10.527344 L 9.992188 17.46875 C 9.953125 17.578125 9.96875 17.703125 10.039062 17.800781 C 10.109375 17.898438 10.21875 17.957031 10.339844 17.957031 L 11.398438 17.957031 C 11.5625 17.957031 11.703125 17.851562 11.75 17.695312 L 12.214844 16.167969 L 14.863281 16.167969 L 15.332031 17.695312 C 15.378906 17.851562 15.519531 17.957031 15.683594 17.957031 L 16.742188 17.957031 C 16.863281 17.957031 16.972656 17.898438 17.042969 17.800781 C 17.109375 17.703125 17.128906 17.578125 17.089844 17.46875 Z M 12.65625 14.707031 C 13.097656 13.277344 13.394531 12.289062 13.542969 11.757812 L 14.445312 14.707031 Z M 12.65625 14.707031 "},null,-1),l=Object(n["createVNode"])("path",{d:"M 16.035156 6.253906 L 12.761719 6.253906 L 16.238281 1.257812 C 16.28125 1.195312 16.304688 1.121094 16.304688 1.046875 L 16.304688 0.421875 C 16.304688 0.21875 16.140625 0.0546875 15.9375 0.0546875 L 11.148438 0.0546875 C 10.945312 0.0546875 10.78125 0.21875 10.78125 0.421875 L 10.78125 1.125 C 10.78125 1.328125 10.945312 1.492188 11.148438 1.492188 L 14.230469 1.492188 L 10.75 6.484375 C 10.707031 6.546875 10.683594 6.621094 10.683594 6.695312 L 10.683594 7.328125 C 10.683594 7.53125 10.847656 7.695312 11.050781 7.695312 L 16.035156 7.695312 C 16.238281 7.695312 16.402344 7.53125 16.402344 7.328125 L 16.402344 6.621094 C 16.402344 6.417969 16.238281 6.253906 16.035156 6.253906 Z M 16.035156 6.253906 "},null,-1);function r(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("g",null,[a,o,l])}const s={};s.render=r;t["a"]=s},d6eb:function(e,t,c){"use strict";var n=c("7a23");const a=Object(n["createVNode"])("path",{d:"M 7.847656 12.046875 L 6.375 12.046875 L 6.375 0.367188 C 6.375 0.164062 6.210938 0 6.007812 0 L 3.046875 0 C 2.84375 0 2.679688 0.164062 2.679688 0.367188 L 2.679688 12.046875 L 1.207031 12.046875 C 1.066406 12.046875 0.9375 12.128906 0.875 12.257812 C 0.8125 12.382812 0.832031 12.535156 0.921875 12.644531 L 4.242188 17.597656 C 4.308594 17.683594 4.414062 17.734375 4.527344 17.734375 C 4.636719 17.734375 4.742188 17.683594 4.8125 17.597656 L 8.132812 12.644531 C 8.222656 12.535156 8.238281 12.382812 8.179688 12.257812 C 8.117188 12.128906 7.988281 12.046875 7.847656 12.046875 Z M 7.847656 12.046875 "},null,-1),o=Object(n["createVNode"])("path",{d:"M 17.082031 7.222656 L 14.632812 0.28125 C 14.582031 0.136719 14.441406 0.0390625 14.285156 0.0390625 L 13.578125 0.0390625 C 13.558594 0.0390625 13.539062 0.0390625 13.519531 0.0429688 C 13.5 0.0390625 13.480469 0.0390625 13.460938 0.0390625 L 12.769531 0.0390625 C 12.613281 0.0390625 12.476562 0.136719 12.421875 0.285156 L 9.984375 7.222656 C 9.945312 7.332031 9.960938 7.457031 10.03125 7.554688 C 10.101562 7.652344 10.210938 7.710938 10.332031 7.710938 L 11.390625 7.710938 C 11.554688 7.710938 11.695312 7.605469 11.742188 7.449219 L 12.207031 5.921875 L 14.855469 5.921875 L 15.324219 7.449219 C 15.371094 7.605469 15.511719 7.710938 15.675781 7.710938 L 16.734375 7.710938 C 16.851562 7.710938 16.964844 7.652344 17.035156 7.554688 C 17.101562 7.457031 17.121094 7.332031 17.082031 7.222656 Z M 12.648438 4.460938 C 13.089844 3.03125 13.386719 2.042969 13.535156 1.515625 L 14.4375 4.460938 Z M 12.648438 4.460938 "},null,-1),l=Object(n["createVNode"])("path",{d:"M 16.027344 16.5 L 12.753906 16.5 L 16.230469 11.503906 C 16.273438 11.441406 16.296875 11.371094 16.296875 11.292969 L 16.296875 10.667969 C 16.296875 10.464844 16.132812 10.300781 15.929688 10.300781 L 11.140625 10.300781 C 10.9375 10.300781 10.773438 10.464844 10.773438 10.667969 L 10.773438 11.371094 C 10.773438 11.574219 10.9375 11.738281 11.140625 11.738281 L 14.222656 11.738281 L 10.742188 16.730469 C 10.699219 16.792969 10.675781 16.867188 10.675781 16.941406 L 10.675781 17.574219 C 10.675781 17.777344 10.839844 17.941406 11.042969 17.941406 L 16.027344 17.941406 C 16.230469 17.941406 16.394531 17.777344 16.394531 17.574219 L 16.394531 16.867188 C 16.394531 16.664062 16.230469 16.5 16.027344 16.5 Z M 16.027344 16.5 "},null,-1);function r(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("g",null,[a,o,l])}const s={};s.render=r;t["a"]=s},e45b:function(e,t,c){},f875:function(e,t,c){},fabf:function(e,t,c){"use strict";var n=c("7a23");const a=Object(n["createVNode"])("path",{d:"M 11.972656 9.003906 L 17.542969 3.433594 C 18.160156 2.816406 18.160156 1.820312 17.542969 1.207031 L 16.800781 0.460938 C 16.183594 -0.152344 15.1875 -0.152344 14.574219 0.460938 L 9.003906 6.03125 L 3.433594 0.460938 C 2.816406 -0.152344 1.820312 -0.152344 1.207031 0.460938 L 0.460938 1.203125 C -0.152344 1.820312 -0.152344 2.816406 0.460938 3.433594 L 6.03125 9.003906 L 0.460938 14.574219 C -0.152344 15.1875 -0.152344 16.1875 0.460938 16.800781 L 1.207031 17.542969 C 1.820312 18.160156 2.820312 18.160156 3.433594 17.542969 L 9.003906 11.972656 L 14.574219 17.542969 C 15.1875 18.160156 16.1875 18.160156 16.800781 17.542969 L 17.542969 16.800781 C 18.160156 16.183594 18.160156 15.1875 17.542969 14.574219 Z M 11.972656 9.003906 "},null,-1);function o(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("g",null,[a])}const l={};l.render=o;t["a"]=l}}]);
//# sourceMappingURL=chunk-0485bd11.db6e0ed6.js.map