{"version":3,"sources":["webpack:///./src/views/book/TheMedia.vue","webpack:///./src/views/book/TheMedia.vue?b789","webpack:///./src/views/book/TheMedia.vue?df81"],"names":["class","getTypeBook","main","isDesktop","book","files","media","id","activeMedia","key","file_name","isMobile","value","type","src","getSrcUrl","controls","getSrcImgUrl","alt","activeImage","apiUrl","name","components","props","bookProps","Object","data","annotation","text","genres","activeImageIndex","url","computed","state","this","findIndex","item","watch","checkBook","methods","$route","params","assign","loadBook","$get","document","title","e","console","log","render","__scopeId"],"mappings":"kPACOA,MAAM,kB,SACJA,MAAM,c,SACLA,MAAM,c,GAKAA,MAAM,c,GAMRA,MAAM,e,SAMXA,MAAM,gB,6EAnBb,yBAuBM,MAvBN,EAuBM,CAtBqC,UAAX,EAAAC,aAAsC,UAAX,EAAAA,a,yBAAzD,yBAgBM,MAhBN,EAgBM,CAfyB,EAAAC,KAAKC,W,yBAAlC,yBAOK,KAPL,EAOK,E,2BANH,yBAKK,2CAJe,EAAAC,KAAKC,MAAdC,I,yBADX,yBAKK,MALAN,MAAK,QAAWM,EAAMC,KAAO,EAAAC,YAAYD,IAEzCE,IAAKH,EAAMC,GACX,QAAK,GAAE,EAAAC,YAAcF,G,CACxB,yBAAqD,OAArD,EAAqD,6BAAzBA,EAAMI,WAAS,I,2BAGb,EAAAR,KAAKS,S,sDAAvC,yBAES,U,MAFDX,MAAM,S,qCAA4C,EAAAQ,YAAW,I,6BACnE,yBAAiG,2CAA1D,EAAAJ,KAAKC,MAAdC,I,yBAA9B,yBAAiG,UAAxFM,MAAON,EAAoCG,IAAKH,EAAMC,I,6BAAOD,EAAMI,WAAS,e,iCAD7B,EAAAF,e,uCAG1D,yBAGS,SAHT,EAGS,CAFgD,eAAhB,EAAAA,YAAYK,M,yBAAnD,yBAAkF,S,MAA1EC,IAAK,EAAAC,UAAWC,SAAA,I,iBACoC,eAAhB,EAAAR,YAAYK,M,yBAAxD,yBAAuF,S,MAA/EC,IAAK,EAAAC,UAAWC,SAAA,I,6DAIoB,YAAX,EAAAf,a,yBAArC,yBAGM,MAHN,EAGM,E,2BAFJ,yBACgD,2CADgC,EAAAG,KAAKC,MAAdC,I,yBAAvE,yBACgD,OAD3CN,MAAM,mBAAoBc,IAAK,EAAAG,aAAaX,GAAQY,IAAI,GAAgCT,IAAKH,EAAMC,GAClG,QAAK,GAAE,EAAAY,YAAc,EAAAF,aAAaX,I,gGAQ9C,MAAMc,EAAS,6BACA,OACbC,KAAM,WACNC,WAAY,GACZC,MAAO,CACLC,UAAWC,QAEbC,KAAM,KAAM,CACVtB,KAAM,CAACuB,WAAY,KAAMC,KAAM,KAAMC,OAAQ,IAC7CV,YAAa,KACbW,iBAAkB,EAClBtB,YAAa,CAACK,KAAM,KAAMkB,IAAK,QAEjCC,SAAU,IACL,eAAS,CACV9B,KAAM+B,GAASA,EAAM/B,OAEvB,cACE,OAAqE,IAAjEgC,KAAK9B,KAAKyB,OAAOM,UAAUC,GAAsB,YAAdA,EAAKf,MACnC,WACiE,IAA/Da,KAAK9B,KAAKyB,OAAOM,UAAUC,GAAsB,UAAdA,EAAKf,MAC1C,SACiE,IAA/Da,KAAK9B,KAAKyB,OAAOM,UAAUC,GAAsB,UAAdA,EAAKf,MAC1C,QACK,IAEhB,YACE,OAAOa,KAAK1B,YAAYuB,IAAO,GAAEX,KAAUc,KAAK1B,YAAYuB,MAAQ,KAGxEM,MAAO,GACP,UACEH,KAAKI,aAEP,YAEAC,QAAS,CACP,YACML,KAAKV,UAAUjB,IAAM2B,KAAKV,UAAUjB,MAAQ2B,KAAKM,OAAOC,OAAOlC,GACjE2B,KAAK9B,KAAOqB,OAAOiB,OAAO,GAAIR,KAAKV,WAC9BU,KAAKS,YAEd,iBACE,MAAMZ,EAAO,iBAAgBG,KAAKM,OAAOC,OAAOlC,GAChD,IACE2B,KAAK9B,WAAa8B,KAAKU,KAAKb,GAC5Bc,SAASC,MAAS,SAAQZ,KAAK9B,KAAKiB,KACrC,MAAO0B,GACNC,QAAQC,IAAI,CAAC,SAAYF,MAI7B,aAAaA,GACX,OAAOA,EAAEhB,IAAO,GAAEX,KAAU2B,EAAEhB,MAAQ,M,UC9E5C,EAAOmB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,oCCRf,W","file":"js/chunk-d6483d34.bd837cbb.js","sourcesContent":["<template>\r\n  <div class=\"book-container\">\r\n    <div class=\"book-video\" v-if=\"getTypeBook === 'video' || getTypeBook === 'audio'\">\r\n      <ol class=\"media-list\" v-if=\"main.isDesktop\">\r\n        <li :class=\"{active: media.id === activeMedia.id}\"\r\n            v-for=\"media of book.files\"\r\n            :key=\"media.id\"\r\n            @click=\"activeMedia = media\">\r\n          <span class=\"media-name\">{{ media.file_name }}</span>\r\n        </li>\r\n      </ol>\r\n      <select class=\"select\" v-else-if=\"main.isMobile\" v-model=\"activeMedia\">\r\n        <option :value=\"media\" v-for=\"media of book.files\" :key=\"media.id\">{{ media.file_name }}</option>\r\n      </select>\r\n      <figure class=\"media-video\">\r\n        <video :src=\"getSrcUrl\" controls v-if=\"activeMedia.type === 'video/webm'\"></video>\r\n        <audio :src=\"getSrcUrl\" controls v-else-if=\"activeMedia.type === 'audio/mpeg'\"></audio>\r\n      </figure>\r\n    </div>\r\n\r\n    <div class=\"book-picture\" v-else-if=\"getTypeBook === 'picture'\">\r\n      <img class=\"book-picture_img\" :src=\"getSrcImgUrl(media)\" alt=\"\" v-for=\"media of book.files\" :key=\"media.id\"\r\n           @click=\"activeImage = getSrcImgUrl(media)\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from \"vuex\";\r\n\r\nconst apiUrl = process.env.VUE_APP_API_URL\r\nexport default {\r\n  name: \"TheMedia\",\r\n  components: {},\r\n  props: {\r\n    bookProps: Object\r\n  },\r\n  data: () => ({\r\n    book: {annotation: null, text: null, genres: []},\r\n    activeImage: null,\r\n    activeImageIndex: 0,\r\n    activeMedia: {type: null, url: null},\r\n  }),\r\n  computed: {\r\n    ...mapState({\r\n      main: state => state.main,\r\n    }),\r\n    getTypeBook() {\r\n      if (this.book.genres.findIndex(item => item.name === 'picture') !== -1) {\r\n        return 'picture'\r\n      } else if (this.book.genres.findIndex(item => item.name === 'audio') !== -1) {\r\n        return 'audio'\r\n      } else if (this.book.genres.findIndex(item => item.name === 'video') !== -1) {\r\n        return 'video'\r\n      } else return ''\r\n    },\r\n    getSrcUrl() {\r\n      return this.activeMedia.url ? `${apiUrl}/${this.activeMedia.url}` : ''\r\n    },\r\n  },\r\n  watch: {},\r\n  created() {\r\n    this.checkBook()\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    checkBook() {\r\n      if (this.bookProps.id && this.bookProps.id === +this.$route.params.id) {\r\n        this.book = Object.assign({}, this.bookProps)\r\n      } else this.loadBook()\r\n    },\r\n    async loadBook() {\r\n      const url = `/book/view?id=${this.$route.params.id}`;\r\n      try {\r\n        this.book = await this.$get(url)\r\n        document.title = `Book: ${this.book.name}`;\r\n      }catch (e) {\r\n        console.log({'loadBook': e})\r\n      }\r\n\r\n    },\r\n    getSrcImgUrl(e) {\r\n      return e.url ? `${apiUrl}/${e.url}` : ''\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.book-container {\r\n  width: 100%;\r\n  .book-picture {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n  }\r\n  .book-picture_img {\r\n    object-fit: cover;\r\n  }\r\n  .book-video {\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n    flex: 1;\r\n    height: 100%;\r\n    width: 100%;\r\n    padding: 1rem 2rem;\r\n\r\n    .media-list {\r\n      width: 440px;\r\n      margin-right: 1rem;\r\n\r\n      li {\r\n        cursor: pointer;\r\n        margin-bottom: 0.5rem;\r\n      }\r\n\r\n      li.active {\r\n        color: var(--color-p)\r\n      }\r\n\r\n      .media-name {\r\n        width: 100%;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n    }\r\n\r\n    .media-video {\r\n      flex: 1;\r\n      text-align: center;\r\n\r\n      video {\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n}\r\n@media only screen and (max-width: 892px) {\r\n  .book-container {\r\n    .book-video {\r\n      display: block;\r\n      padding: 0.5rem;\r\n    }\r\n    .select {\r\n      width: 100%;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 892px) and (orientation: landscape) {\r\n  .book-container {}\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 892px) and (orientation: portrait) {\r\n  .book-container {}\r\n}\r\n</style>","import { render } from \"./TheMedia.vue?vue&type=template&id=0b73e52a&scoped=true\"\nimport script from \"./TheMedia.vue?vue&type=script&lang=js\"\nexport * from \"./TheMedia.vue?vue&type=script&lang=js\"\n\nimport \"./TheMedia.vue?vue&type=style&index=0&id=0b73e52a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0b73e52a\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheMedia.vue?vue&type=style&index=0&id=0b73e52a&scoped=true&lang=scss\""],"sourceRoot":""}