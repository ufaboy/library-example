{"version":3,"sources":["webpack:///./src/components/FilterModal.vue?b927","webpack:///./src/views/book/TheTable.vue","webpack:///./src/components/FilterModal.vue","webpack:///./src/components/FilterModal.vue?8023","webpack:///./src/views/book/TheTable.vue?8c29","webpack:///./src/views/book/TheTable.vue?d3fe","webpack:///./src/components/icons/IconSortDesc.vue","webpack:///./src/components/icons/IconSortDesc.vue?f7a9","webpack:///./src/components/icons/IconSortAsc.vue","webpack:///./src/components/icons/IconSortAsc.vue?9502","webpack:///./src/components/icons/IconClose.vue","webpack:///./src/components/icons/IconClose.vue?e401"],"names":["class","to","showFilterModal","type","bookName","placeholder","searchByName","columns","column","index","columnsClasses","key","orderBy","sortBy","ascending","icon-name","books","items","book","ad","id","openBook","name","annotation","genres","genre","length","rating","view_count","last_read","getDate","updated_at","_links","first","toPage","prev","self","_meta","currentPage","next","last","$store","state","main","isMobile","getBooksPage","page","pagBtnArr","pageNum","value","ref","updateFilterPage","resetTable","filter","for","method","findBookByFilter","closeModal","parent","label","childes","num","resetFilter","components","IconClose","props","Number","Object","data","computed","this","user","username","methods","$emit","isInteger","$parent","hide","loadFilter","render","layout","middleware","FilterModal","IconSortAsc","IconSortDesc","limit","timestamp","date","Date","toLocaleString","year","month","day","comicsBook","findIndex","$router","push","params","url","$loader","show","result","$get","Array","from","pageCount","v","k","asc","cover_url","$config","apiUrl","goPage","href","console","log","$modal","isDesktop","watch","document","title","d","script"],"mappings":"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","file":"js/chunk-3c3b320d.79406185.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FilterModal.vue?vue&type=style&index=0&id=230137f6&lang=scss\"","<template>\r\n  <div class=\"books-table\">\r\n    <header class=\"header\">\r\n      <router-link :to=\"{ name: 'book-create'}\" class=\"btn create-btn\">create</router-link>\r\n      <button class=\"btn\" @click=\"showFilterModal\">filter</button>\r\n      <input type=\"search\" class=\"search-text\" v-model.trim=\"bookName\" placeholder=\"Search by name...\"\r\n             @input=\"searchByName\">\r\n    </header>\r\n    <table class=\"table\">\r\n      <thead class=\"thead\">\r\n      <th class=\"th\" :class=\"columnsClasses[column]\" v-for=\"(column, index) of columns\" :key=\"index\">\r\n        <div class=\"table-cell\" :class=\"{'active' : orderBy === column}\">\r\n          <div class=\"td-title\">{{ column }}</div>\r\n          <div class=\"td-action\" @click=\"sortBy(column, ascending ? 0 : 1)\">\r\n            <base-icon class=\"icon\" icon-name=\"sort\">\r\n              <icon-sort-asc v-if=\"ascending\"/>\r\n              <icon-sort-desc v-else/>\r\n            </base-icon>\r\n          </div>\r\n        </div>\r\n      </th>\r\n      </thead>\r\n      <tbody>\r\n      <!--      <transition-group name=\"flip-list\" tag=\"tbody\">-->\r\n      <tr class=\"row\" :class=\"{'picante': book.ad}\" v-for=\"book of books.items\" :key=\"book.id\">\r\n        <td class=\"td\" :class=\"columnsClasses.id\" @click=\"openBook(book, 'edit')\">{{ book.id }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.name\" @click=\"openBook(book, 'view')\">{{ book.name }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.annotation\">{{ book.annotation }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.genres\">\r\n          <div v-for=\"(genre, index) of book.genres\" :key=\"index\">{{ book.genres.length ? genre.name : '' }}</div>\r\n        </td>\r\n        <td class=\"td\" :class=\"columnsClasses.rating\">{{ book.rating }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.view_count\">{{ book.view_count }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.last_read\">{{ getDate(book.last_read) }}</td>\r\n        <td class=\"td\" :class=\"columnsClasses.updated_at\">{{ getDate(book.updated_at) }}</td>\r\n      </tr>\r\n      <!--</transition-group>-->\r\n      </tbody>\r\n    </table>\r\n    <div class=\"table-paginator\">\r\n      <button class=\"btn table-pag__btn\" v-if=\"books._links.first\"\r\n              @click=\"toPage(books._links.first)\">first\r\n      </button>\r\n      <button class=\"btn table-pag__btn\" v-if=\"books._links.prev\"\r\n              @click=\"toPage(books._links.prev)\">prev\r\n      </button>\r\n      <button class=\"btn table-pag__btn\" v-if=\"books._links.self\"\r\n              @click=\"toPage(books._links.self)\">{{ books._meta ? books._meta.currentPage : '' }}\r\n      </button>\r\n      <button class=\"btn table-pag__btn\" v-if=\"books._links.next\"\r\n              @click=\"toPage(books._links.next)\">next\r\n      </button>\r\n      <button class=\"btn table-pag__btn\" v-if=\"books._links.last\"\r\n              @click=\"toPage(books._links.last)\">last\r\n      </button>\r\n      <select class=\"select\" @change=\"getBooksPage\" v-model=\"page\" v-if=\"$store.state.main.isMobile\">\r\n        <option :value=\"pageNum\" v-for=\"(pageNum, index) of pagBtnArr\" :key=\"'page-' + index\">{{ pageNum }}</option>\r\n      </select>\r\n    </div>\r\n    <modal ref=\"filterBookModal\">\r\n      <filter-modal @active-filter=\"updateFilterPage\"\r\n                    @reset-filter=\"resetTable\"\r\n                    :rating=\"filter.rating\"\r\n                    :genre=\"filter.genre\"\r\n                    :ad=\"filter.ad\"/>\r\n    </modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from \"vuex\";\r\nimport IconSortAsc from '@/components/icons/IconSortAsc.vue'\r\nimport IconSortDesc from '@/components/icons/IconSortDesc.vue'\r\nimport FilterModal from '@/components/FilterModal.vue'\r\n\r\nexport default {\r\n  name: \"BooksTable\",\r\n  layout: 'basement',\r\n  middleware: [],\r\n  components: {FilterModal, IconSortAsc, IconSortDesc},\r\n  props: {},\r\n  data: () => ({\r\n    books: {\r\n      items: [],\r\n      _links: {},\r\n      _meta: {},\r\n    },\r\n    bookName: null,\r\n    filter: {\r\n      genre: null,\r\n      rating: null,\r\n      ad: null,\r\n    },\r\n    page: 1,\r\n    pagBtnArr: [],\r\n    limit: 10,\r\n    ascending: 0,\r\n    orderBy: null,\r\n    columns: ['id', 'name', 'annotation', 'genres', 'rating', 'view_count', 'last_read', 'updated_at'],\r\n    columnsClasses: {\r\n      id: 'cell-id',\r\n      name: 'cell-name',\r\n      annotation: 'cell-annotation',\r\n      genres: 'cell-genre',\r\n      rating: 'cell-rating',\r\n      view_count: 'cell-view_count',\r\n      last_read: 'cell-last_read',\r\n      updated_at: 'cell-updated_at'\r\n    },\r\n  }),\r\n  methods: {\r\n    searchByName() {\r\n      this.getBooksPage()\r\n    },\r\n\r\n    getDate(timestamp) {\r\n      if (!timestamp) return null\r\n      const date = new Date(timestamp * 1000);\r\n      return date ? date.toLocaleString('ru-RU', {year: '2-digit', month: '2-digit', day: 'numeric'}) : null\r\n    },\r\n    async openBook(book, type) {\r\n      const comicsBook = book.genres.findIndex(genre => genre.parent.name === 'comics') > -1\r\n      await this.$router.push({\r\n        name: type === 'edit' ? 'book-edit' : comicsBook ? 'book-media' : 'book-view',\r\n        params: {id: book.id}\r\n      })\r\n    },\r\n    resetTable() {\r\n      this.filter.genre = null\r\n      this.filter.rating = null\r\n      this.filter.ad = null\r\n      this.getBooksPage()\r\n    },\r\n    updateFilterPage(filter) {\r\n      if (filter?.genre) {\r\n        this.filter.genre = filter.genre\r\n      }\r\n      if (filter?.rating) {\r\n        this.filter.rating = filter.rating\r\n      }\r\n      this.filter.ad = filter.ad ? 1 : 0\r\n      this.getBooksPage()\r\n    },\r\n    async getBooksPage() {\r\n      let url = `/book?page=${this.page}&limit=${this.limit}&sort=${this.ascending ? '' : '-'}${this.orderBy ? this.orderBy : 'id'}`\r\n      if (this.bookName) {\r\n        url += `&name=${this.bookName}`\r\n      }\r\n      if (this.filter.genre) {\r\n        url += `&genre_id=${this.filter.genre.id}`\r\n      }\r\n      if (this.filter.rating) {\r\n        url += `&rating=${this.filter.rating}`\r\n      }\r\n      if (Number.isInteger(this.filter.ad)) {\r\n        url += `&ad=${this.filter.ad}`\r\n      }\r\n      this.$loader.show()\r\n      const result = await this.$get(url);\r\n      this.$loader.hide()\r\n      if (result) {\r\n        this.books = result\r\n        this.page = result._meta.currentPage\r\n        // const count = result._meta.pageCount\r\n        this.pagBtnArr = Array.from({length: result._meta.pageCount}, (v, k) => k + 1);\r\n      }\r\n    },\r\n    sortBy(orderBy, asc) {\r\n      this.orderBy = orderBy\r\n      this.ascending = asc\r\n      this.getBooksPage();\r\n    },\r\n    getThumbs(book) {\r\n      return book.cover_url ? `${this.$config.apiUrl}/${book.cover_url}` : '/img/book-cover.jpg'\r\n    },\r\n    async toPage(url) {\r\n      const result = await this.goPage(url.href)\r\n      if (result) {\r\n        this.books = result;\r\n      } else console.log({'goPage': result})\r\n    },\r\n\r\n    showFilterModal() {\r\n      this.$modal.show('filterBookModal', this)\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      main: state => state.main,\r\n    }),\r\n    modalSize() {\r\n      return this.main.isDesktop ? 600 : '100%'\r\n    },\r\n  },\r\n  watch: {},\r\n  created() {\r\n    document.title = 'Table Books';\r\n  },\r\n  mounted() {\r\n    this.getBooksPage();\r\n  },\r\n  updated() {\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.books-table {\r\n  padding: 0 1.5rem;\r\n\r\n  .btn {\r\n    text-transform: capitalize;\r\n  }\r\n\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    flex-flow: row nowrap;\r\n    margin-bottom: 0.5rem;\r\n\r\n    .search-text {\r\n      color: var(--text2);\r\n      background-color: var(--surface3);\r\n      border-radius: 5px;\r\n      border: none;\r\n      padding: 0 3px;\r\n      display: flex;\r\n      margin-left: 0.5rem;\r\n    }\r\n\r\n    .btn {\r\n      display: flex;\r\n\r\n      align-items: center;\r\n      justify-content: center;\r\n      text-transform: capitalize;\r\n      white-space: nowrap;\r\n    }\r\n\r\n    .button:hover {\r\n      background: var(--hovered);\r\n    }\r\n\r\n    //.button:last-of-type {\r\n    //  margin-right: 0;\r\n    //}\r\n  }\r\n\r\n  .table-paginator {\r\n    .select {\r\n      width: 65px;\r\n      padding: 5px;\r\n    }\r\n  }\r\n\r\n  .flip-list-enter-active, .flip-list-leave-active {\r\n    transition: all 1s;\r\n  }\r\n\r\n  .flip-list-enter, .flip-list-leave-to /* .list-leave-active до версии 2.1.8 */\r\n  {\r\n    //opacity: 0;\r\n    //transform: translateY(30px);\r\n  }\r\n\r\n  .flip-list-move {\r\n    transition: transform 1s;\r\n  }\r\n\r\n}\r\n\r\n@media only screen and (max-width: 892px) {\r\n  .books-table {\r\n    padding: 0.5rem;\r\n\r\n    .header {\r\n      .btn {\r\n        flex: 1;\r\n      }\r\n    }\r\n\r\n    .table-paginator {\r\n      .table-pag__btn {\r\n        padding: 10px 1rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 892px) and (orientation: landscape) {\r\n  .books-table {\r\n    .table {\r\n      .cell-annotation, .cell-updated_at {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 360px) and (max-width: 892px) and (orientation: portrait) {\r\n  .books-table {\r\n    .header {\r\n      .create-btn {\r\n        display: none;\r\n      }\r\n    }\r\n\r\n    .table {\r\n      .cell-annotation, .cell-id, .cell-view_count, .cell-last_read, .cell-updated_at {\r\n        display: none;\r\n      }\r\n\r\n      .cell-name {\r\n        max-width: 11rem;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .cell-rating {\r\n\r\n        .td-title {\r\n          max-width: 2rem;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          margin-right: 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <form class=\"filter rad-shadow\" method=\"dialog\" @submit.prevent=\"findBookByFilter\">\r\n    <header class=\"header\">\r\n      <span class=\"filter-title\">filter</span>\r\n      <button class=\"close-btn\" type=\"reset\" @click=\"closeModal\">\r\n        <base-icon class=\"icon\" icon-name=\"close\">\r\n          <icon-close/>\r\n        </base-icon>\r\n      </button>\r\n    </header>\r\n    <label class=\"label\">\r\n      <span class=\"title\">genre</span>\r\n      <select class=\"select\" ref=\"filterBook\" name=\"selectGenre\" v-model=\"filter.genre\">\r\n        <optgroup v-for=\"parent of genres\" :key=\"parent.id\" :label=\"parent.name\">\r\n          <option class=\"value\" :value=\"genre\" v-for=\"genre of parent.childes\" :key=\"genre.id\">{{ genre.name }}</option>\r\n        </optgroup>\r\n      </select>\r\n    </label>\r\n    <label class=\"label\">\r\n      <span class=\"title\">rating</span>\r\n      <select class=\"select\" v-model=\"filter.rating\" name=\"selectRating\">\r\n        <option class=\"value\" :value=\"num\" v-for=\"num of 5\" :key=\"'rating-' + num\">{{ num }}</option>\r\n      </select>\r\n    </label>\r\n\r\n    <div class=\"switch\">\r\n      <span>ad off</span>\r\n      <input type=\"checkbox\" id=\"switch\" class=\"switch-input\" v-model=\"filter.ad\"/>\r\n      <label for=\"switch\" class=\"switch-label\"></label>\r\n      <span>ad on</span>\r\n    </div>\r\n\r\n    <footer class=\"footer\">\r\n      <button class=\"negative-btn\" type=\"button\" @click=\"resetFilter\">reset</button>\r\n      <button class=\"positive-btn\">find</button>\r\n    </footer>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport IconClose from \"@/components/icons/IconClose\"\r\n\r\nexport default {\r\n  name: \"FilterModal\",\r\n  components: {\r\n    IconClose,\r\n  },\r\n  props: {\r\n    rating: Number,\r\n    ad: Number,\r\n    genre: Object,\r\n  },\r\n  data: () => ({\r\n    filter: {\r\n      rating: null,\r\n      ad: null,\r\n      genre: {},\r\n    },\r\n  }),\r\n  computed: {\r\n    genres() {\r\n      return this.$store.state.genre.items\r\n    },\r\n    username() {\r\n      return this.$store.state.user.username\r\n    }\r\n  },\r\n  methods: {\r\n    async findBookByFilter() {\r\n      this.$emit('active-filter', {genre: Number.isInteger(this.filter.genre.id) ? this.filter.genre : null, rating: this.filter.rating, ad: this.filter.ad})\r\n      this.closeModal()\r\n    },\r\n    resetFilter() {\r\n      this.$emit('reset-filter')\r\n      this.closeModal()\r\n    },\r\n    loadFilter() {\r\n      this.filter.rating = this.rating ?? null\r\n      if (this.genre) {\r\n        this.filter.genre = this.genre\r\n      }\r\n      this.filter.ad = Number.isInteger(this.ad) ?? null\r\n    },\r\n    closeModal() {\r\n      this.$parent.hide('filterBookModal', this)\r\n    },\r\n  },\r\n  created() {\r\n    this.loadFilter()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.filter {\r\n  padding: 1rem;\r\n\r\n  .header {\r\n    display: flex;\r\n    flex-flow: row;\r\n    justify-content: space-between;\r\n    margin-bottom: 0.5rem !important;\r\n  }\r\n\r\n  .filter-title {\r\n    text-transform: capitalize;\r\n    font-weight: bold;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n\r\n  .label {\r\n    margin-bottom: 1rem;\r\n\r\n    .title {\r\n      margin-bottom: 0.3rem;\r\n    }\r\n\r\n    .select {\r\n      flex: 1;\r\n    }\r\n  }\r\n\r\n  //.switch-label {\r\n  //  margin-bottom: 1rem;\r\n  //}\r\n  .switch {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 1rem;\r\n    input[type=checkbox]{\r\n      height: 0;\r\n      width: 0;\r\n      visibility: hidden;\r\n    }\r\n\r\n    .switch-label {\r\n      cursor: pointer;\r\n      width: 80px;\r\n      height: 40px;\r\n      background: grey;\r\n      display: block;\r\n      border-radius: 1rem;\r\n      position: relative;\r\n      margin: 0 0.5rem;\r\n    }\r\n\r\n    .switch-label:after {\r\n      content: '';\r\n      position: absolute;\r\n      top: 4px;\r\n      left: 5px;\r\n      width: 1.8rem;\r\n      height: 1.8rem;\r\n      background: #fff;\r\n      border-radius: 20px;\r\n      transition: 0.3s;\r\n    }\r\n\r\n    input:checked + label {\r\n      background: #bada55;\r\n    }\r\n\r\n    input:checked + label:after {\r\n      left: calc(100% - 5px);\r\n      transform: translateX(-100%);\r\n    }\r\n\r\n    label:active:after {\r\n      width: 130px;\r\n    }\r\n  }\r\n\r\n  .fieldset {\r\n    padding: 0 7px;\r\n    margin-bottom: 1rem;\r\n\r\n    .fieldset__label {\r\n      margin-right: 2rem;\r\n    }\r\n\r\n    .fieldset__label:last-of-type {\r\n      margin-right: initial;\r\n    }\r\n  }\r\n\r\n  .footer {\r\n    display: flex;\r\n    flex-flow: row;\r\n    justify-content: space-between;\r\n\r\n    button {\r\n      text-transform: capitalize;\r\n    }\r\n\r\n    button:last-of-type {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 892px) {\r\n  .filter {\r\n    padding: 0.5rem;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./FilterModal.vue?vue&type=template&id=230137f6\"\nimport script from \"./FilterModal.vue?vue&type=script&lang=js\"\nexport * from \"./FilterModal.vue?vue&type=script&lang=js\"\n\nimport \"./FilterModal.vue?vue&type=style&index=0&id=230137f6&lang=scss\"\nscript.render = render\n\nexport default script","import { render } from \"./TheTable.vue?vue&type=template&id=e5462504\"\nimport script from \"./TheTable.vue?vue&type=script&lang=js\"\nexport * from \"./TheTable.vue?vue&type=script&lang=js\"\n\nimport \"./TheTable.vue?vue&type=style&index=0&id=e5462504&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheTable.vue?vue&type=style&index=0&id=e5462504&lang=scss\"","<template>\r\n  <g>\r\n    <path d=\"M 7.855469 12.046875 L 6.382812 12.046875 L 6.382812 0.367188 C 6.382812 0.164062 6.21875 0 6.015625 0 L 3.050781 0 C 2.851562 0 2.683594 0.164062 2.683594 0.367188 L 2.683594 12.046875 L 1.214844 12.046875 C 1.074219 12.046875 0.945312 12.128906 0.882812 12.257812 C 0.820312 12.382812 0.839844 12.535156 0.929688 12.644531 L 4.246094 17.597656 C 4.316406 17.683594 4.421875 17.734375 4.535156 17.734375 C 4.644531 17.734375 4.75 17.683594 4.820312 17.597656 L 8.140625 12.644531 C 8.230469 12.535156 8.246094 12.382812 8.183594 12.257812 C 8.125 12.128906 7.996094 12.046875 7.855469 12.046875 Z M 7.855469 12.046875 \"/>\r\n    <path d=\"M 17.089844 17.46875 L 14.640625 10.527344 C 14.589844 10.382812 14.449219 10.285156 14.292969 10.285156 L 13.585938 10.285156 C 13.566406 10.285156 13.546875 10.285156 13.527344 10.289062 C 13.507812 10.285156 13.488281 10.285156 13.46875 10.285156 L 12.777344 10.285156 C 12.621094 10.285156 12.484375 10.382812 12.429688 10.527344 L 9.992188 17.46875 C 9.953125 17.578125 9.96875 17.703125 10.039062 17.800781 C 10.109375 17.898438 10.21875 17.957031 10.339844 17.957031 L 11.398438 17.957031 C 11.5625 17.957031 11.703125 17.851562 11.75 17.695312 L 12.214844 16.167969 L 14.863281 16.167969 L 15.332031 17.695312 C 15.378906 17.851562 15.519531 17.957031 15.683594 17.957031 L 16.742188 17.957031 C 16.863281 17.957031 16.972656 17.898438 17.042969 17.800781 C 17.109375 17.703125 17.128906 17.578125 17.089844 17.46875 Z M 12.65625 14.707031 C 13.097656 13.277344 13.394531 12.289062 13.542969 11.757812 L 14.445312 14.707031 Z M 12.65625 14.707031 \"/>\r\n    <path d=\"M 16.035156 6.253906 L 12.761719 6.253906 L 16.238281 1.257812 C 16.28125 1.195312 16.304688 1.121094 16.304688 1.046875 L 16.304688 0.421875 C 16.304688 0.21875 16.140625 0.0546875 15.9375 0.0546875 L 11.148438 0.0546875 C 10.945312 0.0546875 10.78125 0.21875 10.78125 0.421875 L 10.78125 1.125 C 10.78125 1.328125 10.945312 1.492188 11.148438 1.492188 L 14.230469 1.492188 L 10.75 6.484375 C 10.707031 6.546875 10.683594 6.621094 10.683594 6.695312 L 10.683594 7.328125 C 10.683594 7.53125 10.847656 7.695312 11.050781 7.695312 L 16.035156 7.695312 C 16.238281 7.695312 16.402344 7.53125 16.402344 7.328125 L 16.402344 6.621094 C 16.402344 6.417969 16.238281 6.253906 16.035156 6.253906 Z M 16.035156 6.253906 \"/>\r\n  </g>\r\n</template>\r\n","import { render } from \"./IconSortDesc.vue?vue&type=template&id=3c4cb704\"\nconst script = {}\nscript.render = render\n\nexport default script","<template>\r\n  <g>\r\n    <path d=\"M 7.847656 12.046875 L 6.375 12.046875 L 6.375 0.367188 C 6.375 0.164062 6.210938 0 6.007812 0 L 3.046875 0 C 2.84375 0 2.679688 0.164062 2.679688 0.367188 L 2.679688 12.046875 L 1.207031 12.046875 C 1.066406 12.046875 0.9375 12.128906 0.875 12.257812 C 0.8125 12.382812 0.832031 12.535156 0.921875 12.644531 L 4.242188 17.597656 C 4.308594 17.683594 4.414062 17.734375 4.527344 17.734375 C 4.636719 17.734375 4.742188 17.683594 4.8125 17.597656 L 8.132812 12.644531 C 8.222656 12.535156 8.238281 12.382812 8.179688 12.257812 C 8.117188 12.128906 7.988281 12.046875 7.847656 12.046875 Z M 7.847656 12.046875 \"/>\r\n    <path d=\"M 17.082031 7.222656 L 14.632812 0.28125 C 14.582031 0.136719 14.441406 0.0390625 14.285156 0.0390625 L 13.578125 0.0390625 C 13.558594 0.0390625 13.539062 0.0390625 13.519531 0.0429688 C 13.5 0.0390625 13.480469 0.0390625 13.460938 0.0390625 L 12.769531 0.0390625 C 12.613281 0.0390625 12.476562 0.136719 12.421875 0.285156 L 9.984375 7.222656 C 9.945312 7.332031 9.960938 7.457031 10.03125 7.554688 C 10.101562 7.652344 10.210938 7.710938 10.332031 7.710938 L 11.390625 7.710938 C 11.554688 7.710938 11.695312 7.605469 11.742188 7.449219 L 12.207031 5.921875 L 14.855469 5.921875 L 15.324219 7.449219 C 15.371094 7.605469 15.511719 7.710938 15.675781 7.710938 L 16.734375 7.710938 C 16.851562 7.710938 16.964844 7.652344 17.035156 7.554688 C 17.101562 7.457031 17.121094 7.332031 17.082031 7.222656 Z M 12.648438 4.460938 C 13.089844 3.03125 13.386719 2.042969 13.535156 1.515625 L 14.4375 4.460938 Z M 12.648438 4.460938 \"/>\r\n    <path d=\"M 16.027344 16.5 L 12.753906 16.5 L 16.230469 11.503906 C 16.273438 11.441406 16.296875 11.371094 16.296875 11.292969 L 16.296875 10.667969 C 16.296875 10.464844 16.132812 10.300781 15.929688 10.300781 L 11.140625 10.300781 C 10.9375 10.300781 10.773438 10.464844 10.773438 10.667969 L 10.773438 11.371094 C 10.773438 11.574219 10.9375 11.738281 11.140625 11.738281 L 14.222656 11.738281 L 10.742188 16.730469 C 10.699219 16.792969 10.675781 16.867188 10.675781 16.941406 L 10.675781 17.574219 C 10.675781 17.777344 10.839844 17.941406 11.042969 17.941406 L 16.027344 17.941406 C 16.230469 17.941406 16.394531 17.777344 16.394531 17.574219 L 16.394531 16.867188 C 16.394531 16.664062 16.230469 16.5 16.027344 16.5 Z M 16.027344 16.5 \"/>\r\n  </g>\r\n</template>\r\n","import { render } from \"./IconSortAsc.vue?vue&type=template&id=78fcc43e\"\nconst script = {}\nscript.render = render\n\nexport default script","<template>\r\n  <g>\r\n    <path d=\"M 11.972656 9.003906 L 17.542969 3.433594 C 18.160156 2.816406 18.160156 1.820312 17.542969 1.207031 L 16.800781 0.460938 C 16.183594 -0.152344 15.1875 -0.152344 14.574219 0.460938 L 9.003906 6.03125 L 3.433594 0.460938 C 2.816406 -0.152344 1.820312 -0.152344 1.207031 0.460938 L 0.460938 1.203125 C -0.152344 1.820312 -0.152344 2.816406 0.460938 3.433594 L 6.03125 9.003906 L 0.460938 14.574219 C -0.152344 15.1875 -0.152344 16.1875 0.460938 16.800781 L 1.207031 17.542969 C 1.820312 18.160156 2.820312 18.160156 3.433594 17.542969 L 9.003906 11.972656 L 14.574219 17.542969 C 15.1875 18.160156 16.1875 18.160156 16.800781 17.542969 L 17.542969 16.800781 C 18.160156 16.183594 18.160156 15.1875 17.542969 14.574219 Z M 11.972656 9.003906 \"/>\r\n  </g>\r\n</template>\r\n","import { render } from \"./IconClose.vue?vue&type=template&id=12c156c8\"\nconst script = {}\nscript.render = render\n\nexport default script"],"sourceRoot":""}